{"version":3,"sources":["storage/actions.js","constants.js","Utils.js","components/SourceTree.js","components/ConfigModal.js","components/Chart.js","images/empty_dash.svg","components/ColorPicker.js","components/ChartsModal.js","components/TableCells/Link.js","components/TableCells/Currency.js","components/TableFooter.js","storage/thunkActions.js","components/Table.js","components/Sidebar/FieldOptions/FieldOptionsColumns.js","components/Fields/ForeignKey.js","components/Sidebar/FieldOptions/FieldOptionsFilters.js","components/Sidebar/FieldOptions/FieldOptionsGroups.js","components/Sidebar/DraggableField.js","components/Sidebar/FieldsContainer.js","components/Formula/CustomAceBehaveaurt.js","components/FormulaModal.js","components/Sidebar/Sidebar.js","components/ZoomChartModal.js","components/ChartContainer.js","images/empty_report.svg","components/EmptyState.js","components/Dashlet.js","App.js","serviceWorker.js","storage/reducers.js","index.js"],"names":["setSortColumns","column","values","dispatch","type","Promise","resolve","fetchPreviewDataSuccess","data","addField","section","field","removeField","index","zoomChart","chart_def","setDraggingField","dragging","moveField","result","toggleChartsModal","dashlet_id","updateSectionItem","item_index","property","value","saveDataSuccess","saveDataError","error","updateObjectProperty","object_name","applyTableFilter","setEditChartIndex","chart_index","setIsOpenModalFormula","isOpen","payload","setModeModalFormula","mode","setEditModeDataModalFormula","edit_mode_data","setIndexModalFormula","emptyDesciptionObj","formulaDescriptions","charFieldMeta","integerFieldMeta","floatFieldMeta","dateTimeFieldMeta","dateFieldMeta","booleanFieldMeta","resetStateFormulaModal","cloneDeep","monthsMap","getJSONAttribute","element","attr_name","default_value","JSON","parse","getAttribute","formatFieldParameter","field_path","field_name","toLowerCase","list_path","split","length","shift","join","updateFieldKeyName","field_list","key_name","path","name","arrayEval","array","console","log","getSelectedGroupedOption","current_value","options","find","e","isValidDate","d","Date","isNaN","numberFormat","num","digits","large_format","i","si","symbol","toFixed","replace","defValue","isDate","dateStr","moment","isValid","month","getMonth","year","getFullYear","dateAddFact","period","amount","add","format","addDay","addMonth","addYear","dateSubstractFact","subtract","substractDay","substractMonth","substractYear","diffFact","dateStrA","dateStrB","diff","diffDays","diffMonths","diffYears","testFn","isEmptyObj","obj","Object","keys","val","reduceToObj","curr","generateString","s","Array","map","charAt","Math","floor","random","generateSample","sample","formulasLib","props","getMonthLabel","number","get","date","getDate","day","getDay","hour","getHours","minute","getMinutes","toString","padStart","getDatePart","startOf","getTimePart","dateAdd","now","changeFormat","SLUG","str","from","to","l","RegExp","getUserToken","localStorage","getItem","SourceTree","getInitialStateBaseSource","initial","report_header_data","metadata","treeData","checkedKeys","checked","expandedKeys","selected_module_info","halfChecked","modules_list","class_name","selected_class","push","indexOf","getFieldList","a","get_new","node","findPathInTree","state","loadBranch","catch","label","breadcrumbs_label","onCheck","fields","keys_list","forEach","element_list","lastIndexOf","substr","el","sort","element_fields","setState","updateFieldList","onExpand","tree","parent","children","tmp","onClickLoad","treeNode","b","c","eventKey","labelNode","fetchingData","finally","fetch","method","credentials","headers","body","stringify","then","res","json","status","message","relationships","fk_name","toast","err","new_props","this","is_create_edit","first_node_disabled","treeNodes","loop","undefined","item","disabled","content","showChildren","startsWith","disableNode","disableCheckbox","title","key","isLeaf","module_info","checkable","showIcon","selectable","autoExpandParent","loadData","checkStrictly","Component","connect","general","updateObjectPropertyAction","ConfigModal","onChangeSource","onHandleChange","class_path","module","cleanPreviewData","bind","toggleConfigModal","users_list","show_config_modal","groups","roles_list","filters","columns","module_class_list","teams_list","x","Modal","scrollable","centered","size","toggle","className","ModalHeader","aria-hidden","ModalBody","Form","Row","form","Col","md","FormGroup","Label","for","Input","id","onChange","target","description","isDisabled","ModalFooter","Button","color","onClick","colors_scheme","OpalChart","groupData","replaces","is_preview","operator","line_series","acum_dict","xaxis","xaxis_oreports_key","type_with_value","use_value_field","value_field","yaxis","row","xaxis_argument","xaxis_argument_oreports_key","Number","colorIndex","yaxis_agurment","min","max","row_key","attr_key","hasOwnProperty","isArray","reduce","return_data","order_options_value","filter","row1","row2","index1","index2","Infinity","onPointClick","info","agurment_field","applyFilter","argument","series","getArgumentField","onLegendClick","compareValues","order","varA","toUpperCase","varB","comparision","isEqual","loading","isZoomed","axis_options","field_type","concat","chart_type","is_line_type","chart_props","dataSource","tooltip","enabled","legend","visible","valueField","argumentField","ignoreEmptyPoints","yaxis_option","customizeTooltip","large_number","originalValue","txt","argumentText","seriesName","text","chart_component","font","connector","width","arg","percent","margin","horizontalAlignment","verticalAlignment","serie","ref","chartRef","sortData","algorithm","backgroundColor","customizeText","formated_number","chart_value","value_type","style","background_color","text_color","nameField","type_value_x","colSorter","isSorter","sortType","dataSorted","_","charts_data","_extends","assign","arguments","source","prototype","call","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","transform","opacity","fill","_ref","svgRef","height","viewBox","ForwardRef","forwardRef","ColorPicker","handleClick","displayColorPicker","handleClose","handleChange","hex","defaultColor","render_color","styles","reactCSS","borderRadius","background","swatch","padding","boxShadow","display","cursor","popover","position","zIndex","cover","top","right","bottom","left","React","charts_options","operator_options","ChartsModal","getOptionsEnums","selectfield_params","order_options","enum","list_name","fieldDef","onSave","edit_chart_index","editChart","addChart","closeModal","initial_state","chart_list","show_charts_modal","yaxis_props","items","yaxis_label","bsSize","isMulti","toggleChartsModalAction","LinkCell","cellData","field_link","dataField","field_module","related_module_name","field_id","dataType","href","rel","CurrencyCell","TableFooter","footer_total","save","close_window","getState","current_state","visible_users","visible_roles","visible_on_module","module_path","owner_id","owner_team_id","success","window","location","fetchPreviewData","timeout_data_id","clearTimeout","url","params","regularColumns","col","customFn","current_record","timeoutData","setTimeout","fieldsMapTypes","option","formulaColumns","calculatedColumnsNames","calculatedColumnsFormulas","formula","normalizeFormula","not_use","operand","parseRes","calculatedColumns","itemContext","contextAsScope","Function","fetchPreviewDataError","timeout_id","config","defaultCurrency","Table","onContentReady","dataGridRef","instance","filterExpr","getCombinedFilter","newGridDataSource","DataSource","store","preview_data","paginate","self","load","done","setChartsData","getModuleName","module_name","modules_by_path","getColumns","number_types","all_columns","table_columns","footer_columns","group_footer_columns","column_props","minWidth","caption","precision","decimal_places","group_index","findIndex","aggregate","obj_data","valueText","showInGroupFooter","alignByColumn","summaryType","valueFormat","showInColumn","onOptionChanged","fullName","endsWith","getIndex","locale","loadMessages","esMessages","app_id","table_filters","columnOption","nextProps","new_state","beginCustomLoading","endCustomLoading","hidden","elementAttr","allowColumnReordering","showBorders","rowAlternationEnabled","columnAutoWidth","wordWrapEnabled","render","fetchPreviewDataAction","column_options","FieldOptions","isCreateEdit","Badge","dispatchSetModeModalFormula","dispatchSetIndexModalFormula","dispatchSetEditModeDataModalFormula","document","getElementsByClassName","parentNode","classList","dispatchSetIsOpen","placeholder","check","inline","link","URL_PREFIX","Option","selectProps","labelKey","valueKey","keysData","includes","valuesData","k","labelFld","valFld","customStyles","indicatorSeparator","base","ForeignKey","getOptions","input","agent","response","promiseOptions","inputValue","openWindowSearch","fieldName","url_search_window","open","noOptionsMessage","dropdownIndicator","innerProps","innerRef","selected_operator","operatorMulti","msg","storeValue","altThis","addEventListener","event","fieldId","valueEvent","newValue","stateValue","storeSection","optionvalue","_str_name","filterString","fieldClass","class","fieldLabel","printLabel","fieldPlaceHolder","placeHolder","pure_field","pureField","field_jsx","loadOptions","cacheOptions","isClearable","filterOptions","hackFilterOptions","autoload","components","DropdownIndicator","getOptionLabel","getOptionValue","opt","ignoreAccents","boolean_options","date_fields_to","date_fields_from_type_date","date_fields_from_type_input","filter_options","equal_from","filter_disabled","allow_edit","default_from_component","default_to_component","date_value","toDate","selected","dateFormat","showTimeSelect","timeFormat","timeIntervals","timeCaption","date_value_to","choices","modifiers","preventOverflow","hide","flip","DraggableField","onRemove","isDragDisabled","fld_options","FieldOptionsGroups","FieldOptionsFilters","FieldOptionsColumns","draggableId","provided","snapshot","draggableProps","dragHandleProps","UncontrolledPopover","placement","trigger","delay","fade","PopoverBody","Container","innerref","cProps","FieldsContainer","selected_option","notitle","titleButton","classes","click","classIcon","droppableId","droppableProps","DocCommentHighlightRules","ace","acequire","CustomHighlightRules","keyword_regex","keywordMapper","createKeywordMapper","escapedRe","identifierRe","$rules","token","regex","next","getStartRule","defaultToken","getTagRule","caseInsensitive","TextHighlightRules","CustomMode","HighlightRules","Mode","FormulaModal","addToFormula","onAddField","onHandleChangeFn","modalFormulaMode","modalFormulaEditModeData","fnOption","slice","generateName","columnNames","formulaBuildError","regularColumnsNames","normFormula","typeOperand","resultType","resultFormula","Error","something","match","getType","metaType","buildMeta","dispatchUpdateSectionItem","fieldMeta","dispatchAddField","dispatchFetchPreviewData","selection","cursorPosition","textBeforeCursor","doc","$lines","lastName","pop","replaceAll","formulaHelper","modalFormulaisOpen","theme","onLoad","editor","customMode","session","setMode","functions","staticWordCompleter","getCompletions","pos","prefix","callback","word","examples","printFormula","meta","langTools","setCompleters","setAutocomplete","onHandleChangeEditor","onCursorChange","detectFunctions","fontSize","setOptions","enableBasicAutocompletion","showLineNumbers","enableLiveAutocompletion","showPrintMargin","showGutter","highlightActiveLine","marginRight","listStyle","fontFamily","syntax","Alert","example","modalFormula","Sidebar","toggleCollapse","prevState","collapse","openEditFormula","filterFieldList","excluded_keys","new_options","current_tab","new_index","abs","added_fields","onClickIcon","ZoomChartModal","zoomed_chart_def","toggleZoomChartModal","show_table","in_modal","ChartContainer","show_undo","undo_field","icon","removeChart","stroke","strokeWidth","rx","y","EmptyState","Dashlet","App","show_modal_dashlet","initialize","fetchMainConfig","toggleZoomDashlet","setCurrentView","is_ajax","ajax_show_all","charts","chart_item","editFromDashlet","render_component","onDragEnd","onDragStart","startDragging","fluid","dashlet_title","detail_name","modal_header","close","saving","getConfigError","saveAction","current_view","Boolean","hostname","onMoveField","destination","newState","start","finish","field_obj","splice","reducers","combineReducers","action","tmp_list","select_list","filter_list","group_list","current_filter","newE","mountOReportsReact","ELEMENT","getElementById","base_obj_id","current_user_id","operator_list","chart_error","defaultJSONParse","initialState","middlewares","thunk","createStore","composeWithDevTools","applyMiddleware","ReactDOM","POSITION","BOTTOM_RIGHT","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.chunk.js","sourcesContent":["export const ADD_FIELD = 'ADD_FIELD';\r\nexport const REMOVE_FIELD = 'REMOVE_FIELD';\r\nexport const SET_DRAGGING_FIELD = 'SET_DRAGGING_FIELD';\r\nexport const MOVE_FIELD = 'MOVE_FIELD';\r\nexport const UPDATE_SECTION_ITEM = 'UPDATE_SECTION_ITEM';\r\nexport const FETCH_PREVIEW_DATA_PENDING = 'FETCH_PREVIEW_DATA_PENDING';\r\nexport const FETCH_PREVIEW_DATA_SUCCESS = 'FETCH_PREVIEW_DATA_SUCCESS';\r\nexport const FETCH_PREVIEW_DATA_ERROR = 'FETCH_PREVIEW_DATA_ERROR';\r\nexport const SAVE_DATA_SUCCESS = 'SAVE_DATA_SUCCESS';\r\nexport const SAVE_DATA_PENDING = 'SAVE_DATA_PENDING';\r\nexport const SAVE_DATA_ERROR = 'SAVE_DATA_ERROR';\r\nexport const GET_CONFIG_PENDING = 'GET_CONFIG_PENDING';\r\nexport const GET_CONFIG_SUCCESS = 'GET_CONFIG_SUCCESS';\r\nexport const GET_CONFIG_ERROR = 'GET_CONFIG_ERROR';\r\nexport const TOGGLE_CONFIG_MODAL = 'TOGGLE_CONFIG_MODAL';\r\nexport const TOGGLE_CHARTS_MODAL = 'TOGGLE_CHARTS_MODAL';\r\nexport const UPDATE_OBJECT_PROPERTY = 'UPDATE_OBJECT_PROPERTY';\r\nexport const UPDATE_FIELD_LIST = 'UPDATE_FIELD_LIST';\r\nexport const ADD_CHART = 'ADD_CHART';\r\nexport const REMOVE_CHART = 'REMOVE_CHART';\r\nexport const ZOOM_CHART = 'ZOOM_CHART';\r\nexport const APPLY_TABLE_FILTER = 'APPLY_TABLE_FILTER';\r\nexport const SET_CHARTS_DATA = 'SET_CHARTS_DATA';\r\nexport const SET_CURRENT_VIEW = 'SET_CURRENT_VIEW';\r\nexport const SET_EDIT_CHART_INDEX = 'SET_EDIT_CHART_INDEX';\r\nexport const EDIT_CHART = 'EDIT_CHART';\r\nexport const SET_ORDER_COLUMNS = 'SET_ORDER_COLUMNS';\r\nexport const SET_IS_OPEN_MODAL_FORMULA = 'SET_IS_OPEN_MODAL_FORMULA';\r\nexport const SET_MODE_MODAL_FORMULA = 'SET_MODE_MODAL_FORMULA';\r\nexport const SET_EDIT_MODE_DATA_MODAL_FORMULA = 'SET_EDIT_MODE_DATA_MODAL_FORMULA';\r\nexport const SET_INDEX_MODAL_FORMULA = 'SET_INDEX_MODAL_FORMULA';\r\n\r\nexport const setSortColumns = (column,values) => dispatch => {\r\n  dispatch({\r\n    type: SET_ORDER_COLUMNS,\r\n    column,\r\n    values\r\n    \r\n  })\r\n\r\n  return Promise.resolve();\r\n}\r\n\r\nexport const fetchPreviewDataPending = (timeout_id) => {\r\n  return {\r\n    type: FETCH_PREVIEW_DATA_PENDING,\r\n    timeout_id\r\n  }\r\n}\r\n\r\nexport const fetchPreviewDataSuccess = (data) => {\r\n  return {\r\n    type: FETCH_PREVIEW_DATA_SUCCESS,\r\n    data: data\r\n  }\r\n}\r\n\r\nexport const fetchPreviewDataError = (error) => {\r\n  return {\r\n    type: FETCH_PREVIEW_DATA_ERROR,\r\n    error: error\r\n  }\r\n}\r\n\r\nexport const getConfigPending = () => {\r\n  return {\r\n    type: GET_CONFIG_PENDING\r\n  }\r\n}\r\n\r\nexport const getConfigSuccess = (data) => {\r\n  return {\r\n    type: GET_CONFIG_SUCCESS,\r\n    data: data\r\n  }\r\n}\r\n\r\nexport const getConfigError = (error) => {\r\n  return {\r\n    type: GET_CONFIG_ERROR,\r\n    error: error\r\n  }\r\n}\r\n\r\nexport const addField = (section, field) => {\r\n  return {\r\n    \"type\": ADD_FIELD,\r\n    section,\r\n    field\r\n  }\r\n}\r\n\r\nexport const removeField = (section, index) => {\r\n  return {\r\n    \"type\": REMOVE_FIELD,\r\n    section,\r\n    index\r\n  }\r\n}\r\n\r\n\r\nexport const addChart = (chart_def) => {\r\n  return {\r\n    \"type\": ADD_CHART,\r\n    chart_def\r\n  }\r\n}\r\n\r\nexport const removeChart = (index) => {\r\n  return {\r\n    \"type\": REMOVE_CHART,\r\n    index\r\n  }\r\n}\r\n\r\nexport const zoomChart = (chart_def) => {\r\n  return {\r\n    \"type\": ZOOM_CHART,\r\n    chart_def\r\n  }\r\n}\r\n\r\nexport const setDraggingField = (dragging) => {\r\n  return {\r\n    \"type\": SET_DRAGGING_FIELD,\r\n    \"dragging\": dragging\r\n  };\r\n};\r\n\r\nexport const moveField = (result) => {\r\n  return {\r\n    \"type\": MOVE_FIELD,\r\n    \"result\": result\r\n  };\r\n};\r\n\r\nexport const toggleConfigModal = () => {\r\n  return {\r\n    \"type\": TOGGLE_CONFIG_MODAL,\r\n  };\r\n};\r\n\r\nexport const toggleChartsModal = (dashlet_id) => {\r\n  return {\r\n    \"type\": TOGGLE_CHARTS_MODAL,\r\n    dashlet_id\r\n  };\r\n};\r\n\r\nexport const updateSectionItem = (section, item_index, property, value) => {\r\n  return {\r\n    \"type\": UPDATE_SECTION_ITEM,\r\n    section,\r\n    item_index,\r\n    property,\r\n    value\r\n  }\r\n}\r\n\r\nexport const saveDataPending = () => {\r\n  return {\r\n    type: SAVE_DATA_PENDING\r\n  }\r\n}\r\n\r\nexport const saveDataSuccess = (data) => {\r\n  return {\r\n    type: SAVE_DATA_SUCCESS,\r\n    data: data\r\n  }\r\n}\r\n\r\nexport const saveDataError = (error) => {\r\n  return {\r\n    type: SAVE_DATA_ERROR,\r\n    error: error\r\n  }\r\n}\r\n\r\nexport const updateObjectProperty = (object_name, property, value) => {\r\n  return {\r\n    \"type\": UPDATE_OBJECT_PROPERTY,\r\n    object_name,\r\n    property,\r\n    value\r\n  }\r\n}\r\n\r\nexport const updateFieldList = (field_list) => {\r\n  return {\r\n    \"type\": UPDATE_FIELD_LIST,\r\n    field_list\r\n  }\r\n}\r\n\r\nexport const applyTableFilter = (column, value) => {\r\n  return {\r\n    \"type\": APPLY_TABLE_FILTER,\r\n    column,\r\n    value\r\n  }\r\n}\r\n\r\nexport const setChartsData = (data) => {\r\n  return {\r\n    type: SET_CHARTS_DATA,\r\n    data\r\n  }\r\n}\r\n\r\n\r\nexport const setCurrentView = (current_view) => {\r\n  return {\r\n    type: SET_CURRENT_VIEW,\r\n    current_view\r\n  }\r\n}\r\n\r\nexport const setEditChartIndex = (chart_index) => {\r\n  return {\r\n    type: SET_EDIT_CHART_INDEX,\r\n    chart_index\r\n  }\r\n}\r\n\r\nexport const editChart = (index, chart_def) => {\r\n  return {\r\n    \"type\": EDIT_CHART,\r\n    index,\r\n    chart_def\r\n  }\r\n}\r\n\r\nexport const setIsOpenModalFormula = isOpen => {\r\n  return {\r\n    \"type\": SET_IS_OPEN_MODAL_FORMULA,\r\n    payload: {\r\n      isOpen\r\n    }\r\n  }\r\n}\r\n\r\nexport const setModeModalFormula = mode => {\r\n  return {\r\n    \"type\": SET_MODE_MODAL_FORMULA,\r\n    payload: {\r\n      mode\r\n    }\r\n  }\r\n}\r\n\r\nexport const setEditModeDataModalFormula = data => {\r\n  return {\r\n    \"type\": SET_EDIT_MODE_DATA_MODAL_FORMULA,\r\n    payload: {\r\n      edit_mode_data: data\r\n    }\r\n  }\r\n}\r\n\r\nexport const setIndexModalFormula = index => {\r\n  return {\r\n    \"type\": SET_INDEX_MODAL_FORMULA,\r\n    payload: {\r\n      index\r\n    }\r\n  }\r\n}","import {\r\n\tcloneDeep\r\n} from 'lodash'\r\n\r\nexport const emptyDesciptionObj = {\r\n\t'name': '',\r\n\t'label': '',\r\n\t'title': '',\r\n\t'description': '',\r\n\t'syntax': '',\r\n\t'examples': []\r\n}\r\n\r\nconst year = {\r\n\t'name': 'year',\r\n\t'label': 'Año',\r\n\t'title': 'year',\r\n\t'description': 'Devuelve un número correspondiente al año de una fecha dada',\r\n\t'syntax': 'year(props(campo_fecha)) || year(props(campo_fecha_hora))',\r\n\t'examples': [\r\n\t\t\"year(props(campo_fecha_hora)) -> year('2021-02-05T14:51:54-05:00') = 2021\",\r\n\t\t\"year(props(campo_fecha)) -> year('2021-09-05') = 2021\",\r\n\t],\r\n\t'printFormula': () => 'year('\r\n}\r\n\r\nconst month = {\r\n\t'name': 'month',\r\n\t'label': 'Mes',\r\n\t'title': 'Month',\r\n\t'description': 'Devuelve un número correspondiente al mes de una fecha dada. 0 Corresponde a Enero, 1 a Febrero, etc',\r\n\t'syntax': 'month(props(campo_fecha)) || month(props(campo_fecha_hora))',\r\n\t'examples': [\r\n\t\t\"month(props(campo_fecha_hora)) -> month('2021-02-05T14:51:54-05:00') = 1\",\r\n\t\t\"month(props(campo_fecha)) -> month('2021-09-05') = 8\",\r\n\t\t\"month(props(campo_fecha)) -> month('2021-12-25') = 11\",\r\n\t],\r\n\t'printFormula': () => 'month('\r\n}\r\n\r\nconst date = {\r\n\t'name': 'date',\r\n\t'label': 'Fecha',\r\n\t'title': 'date',\r\n\t'description': 'Devuelve un número, entre 1 y 31 correspondiente al día del mes de la fecha dada',\r\n\t'syntax': 'date(props(campo_fecha)) || date(props(campo_fecha_hora))',\r\n\t'examples': [\r\n\t\t\"date(props(campo_fecha_hora)) -> date('2021-02-05T14:51:54-05:00') = 5\",\r\n\t\t\"date(props(campo_fecha)) -> date('2021-09-11') = 11\",\r\n\t],\r\n\t'printFormula': () => 'date('\r\n}\r\n\r\nconst day = {\r\n\t'name': 'day',\r\n\t'label': 'Día',\r\n\t'title': 'day',\r\n\t'description': 'Devuelve un número correspondiente al día de la semana de la fecha dada. 0 para lunes, 1 para martes, etc',\r\n\t'syntax': 'day(props(campo_fecha)) || day(props(campo_fecha_hora))',\r\n\t'examples': [\r\n\t\t\"day(props(campo_fecha_hora)) -> day('2021-02-05T14:51:54-05:00') = 5\",\r\n\t\t\"day(props(campo_fecha)) -> day('2021-09-11') = 11\",\r\n\t],\r\n\t'printFormula': () => 'day('\r\n}\r\n\r\nconst hour = {\r\n\t'name': 'hour',\r\n\t'label': 'Hora',\r\n\t'title': 'hour',\r\n\t'description': 'Devuelve un número, entre 0 y 23, correspondiente a la fecha dada',\r\n\t'syntax': 'hour(props(campo_fecha_hora))',\r\n\t'examples': [\r\n\t\t\"hour(props(campo_fecha_hora)) -> hour('2021-02-05T14:51:54-05:00') = 14\",\r\n\t],\r\n\t'printFormula': () => 'hour('\r\n}\r\n\r\nconst minute = {\r\n\t'name': 'minute',\r\n\t'label': 'Minuto',\r\n\t'title': 'minute',\r\n\t'description': 'Devuelve un número, entre 0 y 59, correspondiente a la fecha dada',\r\n\t'syntax': 'minute(props(campo_fecha_hora))',\r\n\t'examples': [\r\n\t\t\"minute(props(campo_fecha_hora)) -> minute('2021-02-05T14:51:54-05:00') = 51\",\r\n\t],\r\n\t'printFormula': () => 'minute('\r\n}\r\n\r\nconst period = {\r\n\t'name': 'period',\r\n\t'label': 'Periodo',\r\n\t'title': 'period',\r\n\t'description': 'Devuelve una cadena que representa el año y mes de una fecha dada',\r\n\t'syntax': 'period(props(campo_fecha_hora)) || period(props(campo_fecha))',\r\n\t'examples': [\r\n\t\t\"period(props(campo_fecha_hora)) -> period('2021-02-05T14:51:54-05:00') = 202102\",\r\n\t\t\"period(props(campo_fecha)) -> period('2021-08-15') = 201808\",\r\n\t],\r\n\t'printFormula': () => 'period('\r\n}\r\n\r\nconst getDatePart = {\r\n\t'name': 'getDatePart',\r\n\t'label': 'Obtener Fecha',\r\n\t'title': 'getDatePart',\r\n\t'description': 'Devuelve la fecha de un campo fecha hora',\r\n\t'syntax': 'getDatePart(props(campo_fecha_hora))',\r\n\t'examples': [\r\n\t\t\"getDatePart(props(campo_fecha_hora)) -> getDatePart('2021-02-05T14:51:54-05:00') = '2012-02-05'\",\r\n\t],\r\n\t'printFormula': () => 'getDatePart('\r\n}\r\n\r\nconst dateAdd = {\r\n\t'name': 'dateAdd',\r\n\t'label': 'Sumar a fecha',\r\n\t'title': 'dateAdd',\r\n\t'description': 'Adiciona a una fecha. el último argumento, \"unidad\", puede ser uno de los siguientes: \"years\", \"quarters\", \"months\", \"weeks\", \"days\", \"hours\", \"minutes\", \"seconds\" o \"miliseconds\"',\r\n\t'syntax': 'dateAdd(props(campo_fecha_hora), cantidad, unidad)',\r\n\t'examples': [\r\n\t\t\"dateAdd(props(campo_fecha_hora), 7, 'years') -> dateAdd('2021-01-12T11:50:14-05:00', 7, 'years') = '2028-01-12T11:50:14-05:00'\",\r\n\t\t\"dateAdd(props(campo_fecha_hora), 2, 'quarters') -> dateAdd('2021-01-12T11:50:58-05:00', 2, 'quarters') = '2021-10-12T11:50:58-05:00'\",\r\n\t\t\"dateAdd(props(campo_fecha_hora), 2, 'months') -> dateAdd('2021-01-12T11:51:22-05:00', 2, 'months') = '2021-03-12T11:51:22-05:00'\",\r\n\t\t\"dateAdd(props(campo_fecha_hora), 3, 'weeks') -> dateAdd('2021-01-12T11:51:22-05:00', 3, 'weeks') = '2021-02-02T11:51:22-05:00'\",\r\n\t\t\"dateAdd(props(campo_fecha_hora), 4, 'days') -> dateAdd('2021-01-12T11:51:22-05:00', 4, 'days') = '2021-01-16T11:51:22-05:00'\",\r\n\t\t\"dateAdd(props(campo_fecha_hora), 8, 'hours') -> dateAdd('2021-01-12T11:51:22-05:00', 8, 'hours') = '2021-01-16T19:51:22-05:00'\",\r\n\t\t\"dateAdd(props(campo_fecha_hora), 1, 'minutes') -> dateAdd('2021-01-12T11:51:22-05:00', 1, 'minutes') = '2021-01-16T11:52:22-05:00'\",\r\n\t\t\"dateAdd(props(campo_fecha_hora), 1, 'seconds') -> dateAdd('2021-01-12T11:51:22-05:00', 1, 'seconds') = '2021-01-16T11:51:23-05:00'\",\r\n\t\t\"dateAdd(props(campo_fecha_hora), 5, 'milliseconds') -> dateAdd('2021-01-12T11:51:22-05:00', 1000, 'milliseconds') = '2021-01-16T11:51:23-05:00'\",\r\n\t],\r\n\t'printFormula': () => 'dateAdd('\r\n}\r\n\r\nconst addDay = {\r\n\t'name': 'addDay',\r\n\t'label': 'Sumar días',\r\n\t'description': 'suma una cantidad de días a la fecha dada. Atajo para la funcion dateAdd(props(campo_fecha_hora), cantidad, \"days\")',\r\n\t'syntax': 'addDay(props(campo_fecha_hora), cantidad) || addDay(props(campo_fecha), cantidad)',\r\n\t'examples': [\r\n\t\t\"addDay(props(campo_fecha_hora), 9) -> addDay('2021-01-05T14:51:54-05:00', 9) = '2021-01-14T14:51:54-05:00'\",\r\n\t\t\"addDay(props(campo_fecha), 3) -> addDay('2021-02-05', 3) = '2021-02-08'\",\r\n\t],\r\n\t'printFormula': () => 'addDay('\r\n}\r\n\r\nconst addMonth = {\r\n\t'name': 'addMonth',\r\n\t'label': 'Sumar meses',\r\n\t'title': 'addMonth',\r\n\t'description': 'suma una cantidad de meses a la fecha dada. Atajo para la funcion dateAdd(props(campo_fecha_hora), cantidad, \"months\")',\r\n\t'syntax': 'addMonth(props(campo_fecha_hora), cantidad) || addMonth(props(campo_fecha), cantidad)',\r\n\t'examples': [\r\n\t\t\"addMonth(props(campo_fecha_hora), 5) -> addMonth('2021-01-12T14:34:26-05:00', 5) = '2021-06-12T14:34:26-05:00'\",\r\n\t\t\"addMonth(props(campo_fecha), 5) -> addMonth('2021-01-12', 5) = '2021-06-12'\",\r\n\t],\r\n\t'printFormula': () => 'addMonth('\r\n}\r\n\r\nconst addYear = {\r\n\t'name': 'addYear',\r\n\t'label': 'Sumar años',\r\n\t'title': 'addYear',\r\n\t'description': 'suma una cantidad de años a la fecha dada. Atajo para la funcion dateAdd(props(campo_fecha_hora), cantidad, \"years\")',\r\n\t'syntax': 'addYear(props(campo_fecha_hora), cantidad) || addYear(props(campo_fecha), cantidad)',\r\n\t'examples': [\r\n\t\t\"addYear(props(campo_fecha_hora), 5) -> addYear('2021-01-12T14:34:26-05:00', 1) = '2022-06-12T14:34:26-05:00'\",\r\n\t\t\"addYear(props(campo_fecha), 5) -> addYear('2021-01-12', 1) = '2022-06-12'\",\r\n\t],\r\n\t'printFormula': () => 'addYear('\r\n}\r\n\r\nconst substractDay = {\r\n\t'name': 'substractDay',\r\n\t'label': 'Restar días',\r\n\t'title': 'substractDay',\r\n\t'description': 'resta una cantidad de días a la fecha dada',\r\n\t'syntax': 'substractDay(props(campo_fecha_hora), cantidad) || substractDay(props(campo_fecha), cantidad)',\r\n\t'examples': [\r\n\t\t\"substractDay(props(campo_fecha_hora), 5) -> substractDay('2021-01-12T14:34:26-05:00', 1) = '2022-01-11T14:34:26-05:00'\",\r\n\t\t\"substractDay(props(campo_fecha), 5) -> substractDay('2021-01-12', 1) = '2022-01-11'\",\r\n\t],\r\n\t'printFormula': () => 'substractDay('\r\n}\r\n\r\nconst substractMonth = {\r\n\t'name': 'substractMonth',\r\n\t'label': 'Restar meses',\r\n\t'title': 'substractMonth',\r\n\t'description': 'resta una cantidad de meses a la fecha dada',\r\n\t'syntax': 'substractMonth(props(campo_fecha_hora), cantidad) || substractMonth(props(campo_fecha), cantidad)',\r\n\t'examples': [\r\n\t\t\"substractMonth(props(campo_fecha_hora), 5) -> substractMonth('2021-01-12T15:11:34-05:00', 5) = '2020-08-12T15:11:34-05:00'\",\r\n\t\t\"substractMonth(props(campo_fecha), 5) -> substractMonth('2021-01-12', 5) = '2020-08-12'\",\r\n\t],\r\n\t'printFormula': () => 'substractMonth('\r\n}\r\n\r\nconst substractYear = {\r\n\t'name': 'substractYear',\r\n\t'label': 'Restar años',\r\n\t'title': 'substractYear',\r\n\t'description': 'resta una cantidad de años a la fecha dada',\r\n\t'syntax': 'substractYear(props(campo_fecha_hora), cantidad) || substractYear(props(campo_fecha), cantidad)',\r\n\t'examples': [\r\n\t\t\"substractYear(props(campo_fecha_hora), 5) -> substractYear('2021-01-12T15:19:15-05:00', 1) = '2020-01-12T15:19:15-05:00'\",\r\n\t\t\"substractYear(props(campo_fecha), 5) -> substractYear('2021-01-12', 1) = '2020-01-12'\",\r\n\t],\r\n\t'printFormula': () => 'substractYear('\r\n}\r\n\r\nconst now = {\r\n\t'name': 'now',\r\n\t'label': 'Fecha actual',\r\n\t'title': 'now',\r\n\t'description': 'Genera la fecha actual con formato fecha hora',\r\n\t'syntax': 'now()',\r\n\t'examples': [\r\n\t\t\"now() = '2020-01-12T15:19:15-05:00'\",\r\n\t],\r\n\t'printFormula': () => 'now('\r\n}\r\n\r\nconst diffDays = {\r\n\t'name': 'diffDays',\r\n\t'label': 'Diferencia días',\r\n\t'title': 'diffDays',\r\n\t'description': 'Devuelve un número que representa la diferencía en días entre 2 fechas',\r\n\t'syntax': 'diffDays(props(campo_fecha_hora1), props(campo_fecha_hora2))',\r\n\t'examples': [\r\n\t\t\"diffDays(props(campo_fecha_hora1), props(campo_fecha_hora2)) -> diffDays('2021-01-14T15:19:15-05:00'), props('2021-01-11T15:19:15-05:00')) = 3\",\r\n\t\t\"diffDays(props(campo_fecha1), props(campo_fecha2)) -> diffDays('2021-01-15'), props('2021-01-19')) = -4\",\r\n\t],\r\n\t'printFormula': () => 'diffDays('\r\n}\r\n\r\nconst diffMonths = {\r\n\t'name': 'diffMonths',\r\n\t'label': 'Diferencia meses',\r\n\t'title': 'diffMonths',\r\n\t'description': 'Devuelve un número que representa la diferencía en meses entre 2 fechas',\r\n\t'syntax': 'diffMonths(props(campo_fecha_hora1), props(campo_fecha_hora2))',\r\n\t'examples': [\r\n\t\t\"diffMonths(props(campo_fecha_hora1), props(campo_fecha_hora2)) -> diffMonths('2021-08-13T08:52:02-05:00'), props('2021-01-13T09:52:02-05:00')) = 6\",\r\n\t\t\"diffMonths(props(campo_fecha1), props(campo_fecha2)) -> diffMonths('2020-08-15'), props('2021-01-13')) = -4\",\r\n\t],\r\n\t'printFormula': () => 'diffMonths('\r\n}\r\n\r\nconst diffYears = {\r\n\t'name': 'diffYears',\r\n\t'label': 'Diferencia años',\r\n\t'title': 'diffYears',\r\n\t'description': 'Devuelve un número que representa la diferencía en años entre 2 fechas',\r\n\t'syntax': 'diffYears(props(campo_fecha_hora1), props(campo_fecha_hora2))',\r\n\t'examples': [\r\n\t\t\"diffYears(props(campo_fecha_hora1), props(campo_fecha_hora2)) -> diffYears('2026-08-13T08:52:02-05:00'), props('2021-01-13T09:52:02-05:00')) = 5\",\r\n\t\t\"diffYears(props(campo_fecha1), props(campo_fecha2)) -> diffYears('2026-08-13'), props('2021-01-13')) = 5\",\r\n\t],\r\n\t'printFormula': () => 'diffYears('\r\n}\r\n\r\nconst changeFormat = {\r\n\t'name': 'changeFormat',\r\n\t'label': 'Cambiar formato',\r\n\t'title': 'changeFormat',\r\n\t'description': 'cambia el formato de una fecha. ',\r\n\t'syntax': 'changeFormat(props(campo_fecha_hora), \"formato\")',\r\n\t'examples': [\r\n\t\t\"changeFormat(props(campo_fecha_hora), 'YYYY') -> changeFormat('2021-01-13T10:14:58-05:00', 'YYYY') = '2021'\",\r\n\t\t\"changeFormat(props(campo_fecha_hora), 'DD') -> changeFormat('2021-01-13T10:14:58-05:00', 'DD') = '13'\",\r\n\t\t\"changeFormat(props(campo_fecha_hora), 'MM') -> changeFormat('2021-01-13T10:14:58-05:00', 'MM') = '01'\",\r\n\t\t\"changeFormat(props(campo_fecha_hora), 'MM-DD-YYYY') -> changeFormat('2021-01-13T10:14:58-05:00', 'MM-DD-YYYY') = '01-13-2021'\",\r\n\t\t\"changeFormat(props(campo_fecha_hora), 'DD MM YYYY hh:mm:ss') -> changeFormat('2021-01-13T10:14:58-05:00', 'DD MM YYYY hh:mm:ss')= '13 01 2021 10:16:14'\",\r\n\t],\r\n\t'printFormula': () => 'changeFormat('\r\n}\r\n\r\nconst getMonthLabel = {\r\n\t'name': 'getMonthLabel',\r\n\t'label': 'Obtener Etiqueta Mes',\r\n\t'title': 'getMonthLabel',\r\n\t'description': 'Devuelve la etiqueta de mes a partir de un numero dado',\r\n\t'syntax': 'getMonthLabel(numero)',\r\n\t'examples': [\r\n\t\t\"getMonthLabel(numero)) -> getMonthLabel(1) = 'Enero'\",\r\n\t\t\"getMonthLabel(numero)) -> getMonthLabel(3) = 'Marzo'\",\r\n\t\t\"getMonthLabel(numero)) -> getMonthLabel(33) = '33'\",\r\n\t\t\"getMonthLabel(getMonth(props(creation_date))) -> getMonthLabel(getMonth('2021-12-03')) -> getMonthLabel(12)= 'Diciembre'\",\r\n\t],\r\n\t'printFormula': () => 'getMonthLabel('\r\n}\r\n\r\nexport const formulaDescriptions = [\r\n\tyear,\r\n\tmonth,\r\n\tgetMonthLabel,\r\n\tdate,\r\n\tday,\r\n\thour,\r\n\tminute,\r\n\tperiod,\r\n\tgetDatePart,\r\n\tdateAdd,\r\n\taddDay,\r\n\taddMonth,\r\n\taddYear,\r\n\tsubstractDay,\r\n\tsubstractMonth,\r\n\tsubstractYear,\r\n\tnow,\r\n\tdiffDays,\r\n\tdiffMonths,\r\n\tdiffYears,\r\n\tchangeFormat,\r\n]\r\n\r\nexport const charFieldMeta = {\r\n\t\"type\": \"CharField\",\r\n\t\"filter_options\": [\r\n\t\t{\r\n\t\t\t\"key\": \"current_record\",\r\n\t\t\t\"label\": \"Registro Actual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"equal\",\r\n\t\t\t\"label\": \"Igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_equal\",\r\n\t\t\t\"label\": \"No es igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"starts_width\",\r\n\t\t\t\"label\": \"Empieza con\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"end_width\",\r\n\t\t\t\"label\": \"Termina con\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"contains\",\r\n\t\t\t\"label\": \"Contiene\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"null_or_empty\",\r\n\t\t\t\"label\": \"Es vacio o nulo\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"empty\",\r\n\t\t\t\"label\": \"Es vacio\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_empty\",\r\n\t\t\t\"label\": \"No es vacio\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"current_user_code\",\r\n\t\t\t\"label\": \"Código Usuario actual\"\r\n\t\t}\r\n\t]\r\n}\r\n\r\nexport const integerFieldMeta = {\r\n\t\"type\": \"IntegerField\",\r\n\t\"filter_options\": [\r\n\t\t{\r\n\t\t\t\"key\": \"equal\",\r\n\t\t\t\"label\": \"Igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_equal\",\r\n\t\t\t\"label\": \"No es igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"gt\",\r\n\t\t\t\"label\": \"Mayor que\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"lt\",\r\n\t\t\t\"label\": \"Menor que\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"gte\",\r\n\t\t\t\"label\": \"Mayor o igual que\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"between\",\r\n\t\t\t\"label\": \"Entre\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"current_user_code\",\r\n\t\t\t\"label\": \"Código Usuario actual\"\r\n\t\t}\r\n\t],\r\n}\r\n\r\nexport const floatFieldMeta = {\r\n\t\"type\": \"FloatField\",\r\n\t\"filter_options\": [\r\n\t\t{\r\n\t\t\t\"key\": \"equal\",\r\n\t\t\t\"label\": \"Igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_equal\",\r\n\t\t\t\"label\": \"No es igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"gt\",\r\n\t\t\t\"label\": \"Mayor que\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"lt\",\r\n\t\t\t\"label\": \"Menor que\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"gte\",\r\n\t\t\t\"label\": \"Mayor o igual que\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"between\",\r\n\t\t\t\"label\": \"Entre\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"current_user_code\",\r\n\t\t\t\"label\": \"Código Usuario actual\"\r\n\t\t}\r\n\t]\r\n}\r\n\r\nexport const dateTimeFieldMeta = {\r\n\t\"type\": \"DateTimeField\",\r\n\t\"filter_options\": [\r\n\t\t{\r\n\t\t\t\"key\": \"equal\",\r\n\t\t\t\"label\": \"Igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_equal\",\r\n\t\t\t\"label\": \"No es igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"before\",\r\n\t\t\t\"label\": \"Antes de\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"after\",\r\n\t\t\t\"label\": \"Después de\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"between\",\r\n\t\t\t\"label\": \"Entre\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"in_past\",\r\n\t\t\t\"label\": \"En el pasado\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"in_future\",\r\n\t\t\t\"label\": \"En el futuro\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"current_month\",\r\n\t\t\t\"label\": \"Mes actual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"current_week\",\r\n\t\t\t\"label\": \"Semana actual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"last_month\",\r\n\t\t\t\"label\": \"Mes pasado\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"today\",\r\n\t\t\t\"label\": \"Hoy\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"last_n_days\",\r\n\t\t\t\"label\": \"Últimos N días\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"next_n_days\",\r\n\t\t\t\"label\": \"Proximos N días\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"this_year\",\r\n\t\t\t\"label\": \"Este año\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"last_year\",\r\n\t\t\t\"label\": \"Año pasado\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"next_year\",\r\n\t\t\t\"label\": \"Proximo año\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"null_or_empty\",\r\n\t\t\t\"label\": \"Es vacio o nulo\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"empty\",\r\n\t\t\t\"label\": \"Es vacio\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_empty\",\r\n\t\t\t\"label\": \"No es vacio\"\r\n\t\t}\r\n\t],\r\n}\r\n\r\nexport const dateFieldMeta = {\r\n\t\"type\": \"DateField\",\r\n\t\"filter_options\": [\r\n\t\t{\r\n\t\t\t\"key\": \"equal\",\r\n\t\t\t\"label\": \"Igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_equal\",\r\n\t\t\t\"label\": \"No es igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"before\",\r\n\t\t\t\"label\": \"Antes de\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"after\",\r\n\t\t\t\"label\": \"Después de\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"between\",\r\n\t\t\t\"label\": \"Entre\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"in_past\",\r\n\t\t\t\"label\": \"En el pasado\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"in_future\",\r\n\t\t\t\"label\": \"En el futuro\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"current_month\",\r\n\t\t\t\"label\": \"Mes actual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"current_week\",\r\n\t\t\t\"label\": \"Semana actual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"last_month\",\r\n\t\t\t\"label\": \"Mes pasado\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"today\",\r\n\t\t\t\"label\": \"Hoy\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"last_n_days\",\r\n\t\t\t\"label\": \"Últimos N días\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"next_n_days\",\r\n\t\t\t\"label\": \"Proximos N días\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"this_year\",\r\n\t\t\t\"label\": \"Este año\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"last_year\",\r\n\t\t\t\"label\": \"Año pasado\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"next_year\",\r\n\t\t\t\"label\": \"Proximo año\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"null_or_empty\",\r\n\t\t\t\"label\": \"Es vacio o nulo\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"empty\",\r\n\t\t\t\"label\": \"Es vacio\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_empty\",\r\n\t\t\t\"label\": \"No es vacio\"\r\n\t\t}\r\n\t],\r\n}\r\n\r\nexport const booleanFieldMeta = {\r\n\t\"type\": \"BooleanField\",\r\n\t\"filter_options\": [\r\n\t\t{\r\n\t\t\t\"key\": \"equal\",\r\n\t\t\t\"label\": \"Igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_equal\",\r\n\t\t\t\"label\": \"No es igual\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"starts_width\",\r\n\t\t\t\"label\": \"Empieza con\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"end_width\",\r\n\t\t\t\"label\": \"Termina con\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"contains\",\r\n\t\t\t\"label\": \"Contiene\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"null_or_empty\",\r\n\t\t\t\"label\": \"Es vacio o nulo\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"empty\",\r\n\t\t\t\"label\": \"Es vacio\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"not_empty\",\r\n\t\t\t\"label\": \"No es vacio\"\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"key\": \"current_user_code\",\r\n\t\t\t\"label\": \"Código Usuario actual\"\r\n\t\t}\r\n\t]\r\n}\r\n\r\nexport const resetStateFormulaModal = {\r\n\t'label': '',\r\n\t'name': '',\r\n\t'formula': '',\r\n\t'description': cloneDeep(emptyDesciptionObj)\r\n}\r\n\r\nexport const monthsMap = {\r\n\t'1': 'Enero',\r\n\t'2': 'Febrero',\r\n\t'3': 'Marzo',\r\n\t'4': 'Abril',\r\n\t'5': 'Mayo',\r\n\t'6': 'Junio',\r\n\t'7': 'Julio',\r\n\t'8': 'Agosto',\r\n\t'9': 'Septiembre',\r\n\t'10': 'Octubre',\r\n\t'11': 'Noviembre',\r\n\t'12': 'Diciembre',\r\n}","import moment from 'moment'\r\n\r\nimport {\r\n    sample,\r\n    random,\r\n    cloneDeep,\r\n    get\r\n} from 'lodash'\r\n\r\nimport {\r\n    charFieldMeta,\r\n    integerFieldMeta,\r\n    floatFieldMeta,\r\n    dateTimeFieldMeta,\r\n    dateFieldMeta,\r\n    booleanFieldMeta,\r\n    monthsMap\r\n} from './constants'\r\n\r\nfunction getJSONAttribute(element, attr_name, default_value) {\r\n    try {\r\n        return JSON.parse(element.getAttribute(attr_name)) || default_value;\r\n    } catch (error) {\r\n        return default_value;\r\n    }\r\n}\r\n\r\nfunction formatFieldParameter(field_path, field_name) {\r\n    field_name = field_name.toLowerCase();\r\n    field_path = field_path.toLowerCase();\r\n    let list_path = field_path.split(\"::\");\r\n    if (list_path.length <= 1) {\r\n        return field_name;\r\n    }\r\n    list_path.shift();\r\n    return list_path.join('__') + '__' + field_name;\r\n}\r\n\r\nfunction updateFieldKeyName(field_list) {\r\n    for (let index = 0; index < field_list.length; index++) {\r\n        const field = field_list[index];\r\n        field.key_name = formatFieldParameter(field.path, field.name);\r\n    }\r\n}\r\n\r\nfunction defaultJSONParse(str, default_value) {\r\n    try {\r\n        if (typeof str === \"string\") {\r\n            return JSON.parse(str) || default_value;\r\n        }\r\n        return str || default_value;\r\n\r\n    } catch (error) {\r\n        console.log(\"error\");\r\n        return default_value;\r\n    }\r\n}\r\n\r\nfunction arrayEval(array) {\r\n    try {\r\n        if (typeof array === \"string\") {\r\n            return JSON.parse(array) || [];\r\n        }\r\n        return array || [];\r\n\r\n    } catch (error) {\r\n        console.log(\"error\");\r\n        return [];\r\n    }\r\n}\r\n\r\nfunction getSelectedGroupedOption(array, current_value) {\r\n    if (!array) return null;\r\n    for (let index = 0; index < array.length; index++) {\r\n        const element = array[index];\r\n        if (element.options && element.options.length > 0) {\r\n            let value = element.options.find((e) => { return e.value === current_value });\r\n            if (value) {\r\n                return value;\r\n            }\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nfunction isValidDate(d) {\r\n    return d instanceof Date && !isNaN(d);\r\n}\r\n\r\nfunction numberFormat(num, digits, large_format) {\r\n    var si = [\r\n        { value: 1, symbol: \"\" },\r\n        { value: 1E3, symbol: \"k\" },\r\n        { value: 1E6, symbol: \"M\" },\r\n        { value: 1E9, symbol: \"G\" },\r\n        { value: 1E12, symbol: \"T\" },\r\n        { value: 1E15, symbol: \"P\" },\r\n        { value: 1E18, symbol: \"E\" }\r\n    ];\r\n    var rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\r\n    var i;\r\n    for (i = si.length - 1; i > 0; i--) {\r\n        if (num >= si[i].value) {\r\n            break;\r\n        }\r\n    }\r\n    if (large_format) {\r\n        try {\r\n            return num.toFixed(digits).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,');\r\n        } catch (error) {\r\n            return '';\r\n        }\r\n\r\n    }\r\n    return (num / si[i].value).toFixed(digits).replace(rx, \"$1\") + si[i].symbol;\r\n}\r\n\r\nfunction defOrFactory (defValue)  {\r\n    return function (value) {\r\n        return !!value ? value : defValue\r\n    }\r\n}\r\n\r\nconst defOrEmptyStr = defOrFactory('')\r\n\r\nfunction props (val) {\r\n    return val\r\n}\r\n\r\nfunction isDate(dateStr) {\r\n\treturn !!dateStr && moment(dateStr).isValid()\r\n}\r\n\r\nfunction getMonthLabel(number) {\r\n    return get(monthsMap, number+'', number+'')\r\n}\r\n\r\nfunction month(dateStr) {\r\n    if (!isDate(dateStr))  {\r\n        return ''\r\n    }\r\n\r\n    try {\r\n        return (new Date(dateStr)).getMonth() + 1\r\n    } catch (e) {\r\n        return ''\r\n    }\r\n}\r\n\r\nfunction year(dateStr) {\r\n    if (!isDate(dateStr))  {\r\n        return ''\r\n    }\r\n\r\n    try {\r\n        return (new Date(dateStr)).getFullYear()\r\n    } catch (e) {\r\n        return ''\r\n    }\r\n}\r\n\r\nfunction date(dateStr) {\r\n    if (!isDate(dateStr))  {\r\n        return ''\r\n    }\r\n\r\n    try {\r\n        return (new Date(dateStr)).getDate()\r\n    } catch (e) {\r\n        return ''\r\n    }\r\n}\r\n\r\nfunction day(dateStr) {\r\n    if (!isDate(dateStr))  {\r\n        return ''\r\n    }\r\n\r\n    try {\r\n        return (new Date(dateStr)).getDay()\r\n    } catch (e) {\r\n        return ''\r\n    }\r\n}\r\n\r\nfunction hour(dateStr) {\r\n    if (!isDate(dateStr))  {\r\n        return ''\r\n    }\r\n\r\n    try {\r\n        return (new Date(dateStr)).getHours()\r\n    } catch (e) {\r\n        return ''\r\n    }\r\n}\r\n\r\nfunction minute(dateStr) {\r\n    if (!isDate(dateStr))  {\r\n        return ''\r\n    }\r\n\r\n    try {\r\n        return (new Date(dateStr)).getMinutes()\r\n    } catch (e) {\r\n        return ''\r\n    }\r\n}\r\n\r\nfunction period(dateStr) {\r\n    return `${year(dateStr)}${(month(dateStr)).toString().padStart(2,\"0\")}`\r\n}\r\n\r\nfunction getDatePart(dateStr) {\r\n    if (!isDate(dateStr)) {\r\n        return ''\r\n    }\r\n    return moment(dateStr).startOf('day').format()\r\n}\r\n\r\nfunction getTimePart(dateStr) {\r\n    if (!isDate(dateStr)) {\r\n        return ''\r\n    }\r\n    return moment(dateStr).startOf('day').format(\"hh:mm:ss\")\r\n}\r\n\r\nfunction dateAdd(dateStr, amount, period) {\r\n    if (!isDate(dateStr)) {\r\n        return ''\r\n    }\r\n    return moment(dateStr).add(amount, period).format()\r\n}\r\n\r\nfunction dateAddFact(period) {\r\n    return function (dateStr, amount) {\r\n        if (!isDate(dateStr)) {\r\n            return ''\r\n        }\r\n        return moment(dateStr).add(amount, period).format()\r\n    } \r\n}\r\n\r\nconst addDay = dateAddFact('day')\r\nconst addMonth = dateAddFact('month')\r\nconst addYear = dateAddFact('year')\r\n\r\nfunction dateSubstractFact(period) {\r\n    return function (dateStr, amount) {\r\n        if (!isDate(dateStr)) {\r\n            return ''\r\n        }\r\n        return moment(dateStr).subtract(amount, period).format()\r\n    } \r\n}\r\n\r\nconst substractDay = dateSubstractFact('day')\r\nconst substractMonth = dateSubstractFact('month')\r\nconst substractYear = dateSubstractFact('year')\r\n\r\nfunction now() {\r\n    return moment().format()\r\n}\r\n\r\nfunction diffFact(period) {\r\n    return function (dateStrA, dateStrB) {\r\n        if (!isDate(dateStrA)) {\r\n            return ''\r\n        }\r\n\r\n        if (!isDate(dateStrB)) {\r\n            return ''\r\n        }\r\n\r\n        return moment(dateStrA).diff(moment(dateStrB), period)\r\n    } \r\n}\r\n\r\nconst diffDays = diffFact('days')\r\nconst diffMonths = diffFact('months')\r\nconst diffYears = diffFact('years')\r\n\r\nfunction changeFormat (dateStr, format) {\r\n    if (!isDate(dateStr)) {\r\n        return ''\r\n    }\r\n\r\n    return moment(dateStr).format(format)\r\n}\r\n\r\nconst isEmptyFact = testFn => val => testFn(val) ? true : false\r\nconst isEmptyObj = isEmptyFact(obj => !Object.keys(obj).length)\r\n\r\nfunction reduceToObj (obj, curr) {\r\n    return { ...obj, ...curr }\r\n}\r\n\r\nfunction generateString() {\r\n    let s = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\r\n    return Array(5).join().split(',').map(function() { return s.charAt(Math.floor(Math.random() * s.length)); }).join('');\r\n}\r\n\r\nfunction generateInteger() {\r\n    return random(1, 1000)   \r\n}\r\n\r\nfunction generateFloat() {\r\n    let min = 0.1\r\n    let max = 10000\r\n    return Math.random() * (max - min) + min;   \r\n}\r\n\r\nfunction generateDateTime() {\r\n    return moment().format()   \r\n}\r\n\r\nfunction generateDate() {\r\n    return moment().format('YYYY-mm-DD')   \r\n}\r\n\r\nfunction generateBoolean() {\r\n    return sample([true, false])\r\n}\r\n\r\nfunction generateSample (type) {\r\n    switch (type) {\r\n        case 'CharField':\r\n            return generateString()\r\n        case 'IntegerField':\r\n        case 'PositiveIntegerField':\r\n            return generateInteger()\r\n        case 'FloatField':\r\n        case 'CurrencyField':\r\n        case 'DecimalField':\r\n            return generateFloat()\r\n        case 'DateTimeField':\r\n            return generateDateTime()\r\n        case 'DateField':\r\n            return generateDate()\r\n        case 'BooleanField':\r\n            return generateBoolean()\r\n        default:\r\n            return generateString()\r\n    }\r\n}\r\n\r\nfunction toType (obj) {\r\n    //Typeof. determina en forma aproximada el tipo de obj\r\n    return ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()\r\n}\r\n\r\nfunction isInt(n) {\r\n    return n % 1 === 0;\r\n }\r\n\r\nfunction getType (something) {\r\n    const type = toType(something)\r\n    if (type === \"string\") {\r\n        //could be parse into a date\r\n        if (something.length >= 10 && isDate(something)) {\r\n            if (something.length > 10) {\r\n                return 'DateTimeField'\r\n            }  else {\r\n                return 'DateField'\r\n            }\r\n        } else {\r\n            return 'CharField'\r\n        }\r\n    } else if (type === \"number\") {\r\n        if (isInt(something)) {\r\n            return 'IntegerField'\r\n        } else {\r\n            return 'FloatField'\r\n        }\r\n    } else if (type === \"boolean\")  {\r\n        return 'BooleanField'\r\n    } else if (type === \"undefined\") {\r\n        return 'CharField'\r\n    } else {\r\n        return false\r\n    }\r\n}\r\n\r\nfunction buildMeta (type) {\r\n    switch (type) {\r\n        case 'CharField':\r\n            return cloneDeep(charFieldMeta)\r\n        case 'IntegerField':\r\n            return cloneDeep(integerFieldMeta)\r\n        case 'FloatField':\r\n            return cloneDeep(floatFieldMeta)\r\n        case 'DateTimeField':\r\n            return cloneDeep(dateTimeFieldMeta)\r\n        case 'DateField':\r\n            return cloneDeep(dateFieldMeta)\r\n        case 'BooleanField':\r\n            return cloneDeep(booleanFieldMeta)\r\n        default:\r\n            return cloneDeep(charFieldMeta)\r\n    }\r\n}\r\n\r\nconst formulasLib = {\r\n    props,\r\n    year,\r\n    month,\r\n    getMonthLabel,\r\n    date,\r\n    day,\r\n    hour,\r\n    minute,\r\n    period,\r\n    getDatePart,\r\n    getTimePart,\r\n    dateAdd,\r\n    addDay,\r\n    addMonth,\r\n    addYear,\r\n    substractDay,\r\n    substractMonth,\r\n    substractYear,\r\n    now,\r\n    diffDays,\r\n    diffMonths,\r\n    diffYears,\r\n    changeFormat,\r\n}\r\n\r\nexport const SLUG = function (str = '') {\r\n    str = str.replace(/^\\s+|\\s+$/g, '') // trim\r\n    str = str.toLowerCase()\r\n\r\n    // remove accents, swap ñ for n, etc\r\n    let from = \"ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;\"\r\n    let to = \"aaaaaeeeeeiiiiooooouuuunc------\"\r\n    for (let i = 0, l = from.length; i < l; i++) {\r\n        str = str.replace(new RegExp(from.charAt(i), 'g'), to.charAt(i))\r\n    }\r\n\r\n    str = str.replace(/[^a-z0-9 -]/g, '') // remove invalid chars\r\n        .replace(/\\s+/g, '_') // collapse whitespace and replace by -\r\n        .replace(/-+/g, '_')  // collapse dashes\r\n\r\n    return str\r\n}\r\n\r\nexport const generateName = function (str = '') {\r\n    let name = SLUG(str);\r\n    name = \"cstm_formula_\"+name\r\n    name = name.replace(/_+/g, '_').substr(0,50)\r\n    // Eliminar los _ al final de campo, para evitar error de migraciones\r\n    return name.slice(name.length - 1) === \"_\" ? name.slice(0, -1) : name\r\n}\r\n\r\n// Get usertoken from localstorage\r\nexport const getUserToken = function () {\r\n    return localStorage.getItem('usertoken');\r\n}\r\n\r\nexport { \r\n    getJSONAttribute, \r\n    formatFieldParameter, \r\n    updateFieldKeyName, \r\n    arrayEval, \r\n    getSelectedGroupedOption, \r\n    isValidDate, \r\n    defaultJSONParse, \r\n    numberFormat,\r\n    getType,\r\n    generateSample,\r\n    buildMeta,\r\n    isEmptyObj,\r\n    reduceToObj,\r\n    formulasLib,\r\n};","import Tree, { TreeNode } from 'rc-tree';\r\nimport 'rc-tree/assets/index.css';\r\nimport React, { Component } from 'react';\r\nimport cookie from 'react-cookies';\r\nimport { connect } from 'react-redux';\r\nimport { toast } from 'react-toastify';\r\nimport { updateFieldList, updateObjectProperty as updateObjectPropertyAction } from '../storage/actions';\r\nimport { formatFieldParameter, getUserToken } from '../Utils';\r\nimport cloneDeep from 'lodash/cloneDeep'\r\n\r\nexport class SourceTree extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = this.getInitialStateBaseSource(props, true);\r\n  }\r\n\r\n  getInitialStateBaseSource = (props, initial) => {\r\n    if (initial) {\r\n      if (props.report_header_data && props.report_header_data.metadata && props.report_header_data.metadata.treeData && props.report_header_data.metadata.treeData.length > 0 && props.report_header_data.metadata.checkedKeys && props.report_header_data.metadata.checkedKeys.checked.length > 0) {\r\n        return {\r\n          treeData: props.report_header_data.metadata.treeData,\r\n          checkedKeys: props.report_header_data.metadata.checkedKeys,\r\n          expandedKeys: props.report_header_data.metadata.expandedKeys\r\n        }\r\n      }\r\n    }\r\n    let selected_module_info = null;\r\n    let treeData = [];\r\n    let checkedKeys = {\r\n      checked: [],\r\n      halfChecked: []\r\n    };\r\n    let expandedKeys = [];\r\n    for (let index = 0; index < props.modules_list.length; index++) {\r\n      const element = props.modules_list[index];\r\n      if (element.options && element.options.length > 0) {\r\n        let value = element.options.find((e) => { return e.class_name === props.report_header_data.selected_class });\r\n        if (value) {\r\n          selected_module_info = value;\r\n          selected_module_info.path = selected_module_info.class_name;\r\n          treeData.push(selected_module_info);\r\n          if (checkedKeys.checked.indexOf(selected_module_info.path) === -1) {\r\n            checkedKeys.checked.push(selected_module_info.path);\r\n          }\r\n          expandedKeys = checkedKeys.checked;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      treeData,\r\n      checkedKeys,\r\n      expandedKeys\r\n    }\r\n  }\r\n\r\n  async componentWillReceiveProps(new_props) {\r\n    if ((new_props.report_header_data && this.props.report_header_data) && (new_props.report_header_data.selected_class !== this.props.report_header_data.selected_class)) {\r\n      await this.setState(this.getInitialStateBaseSource(new_props));\r\n      this.onCheck(this.state.checkedKeys);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.onCheck(this.state.checkedKeys, true);\r\n  }\r\n\r\n  getFieldList = async (element, get_new = false) => {\r\n    let node = this.findPathInTree(this.state.treeData, element);\r\n    if (!node) {\r\n      return null;\r\n    }\r\n\r\n    if (!node.field_list || get_new) {\r\n      await this.loadBranch(node).catch((error) => { console.log(error); node.field_list = [] });\r\n    }\r\n    return {\r\n      label: node.breadcrumbs_label || node.label,\r\n      options: node.field_list\r\n    };\r\n\r\n  }\r\n\r\n  onCheck = async (checkedKeys, get_new = false) => {\r\n    let fields = [];\r\n    let keys_list = [];\r\n\r\n    if (get_new && checkedKeys && checkedKeys.checked) {\r\n      checkedKeys.checked.forEach(e => {\r\n        let element_list = [];\r\n        while (e.lastIndexOf(\"::\") > -1) {\r\n          element_list.push(e);\r\n          e = e.substr(0, e.lastIndexOf(\"::\"));\r\n        }\r\n        element_list.forEach(el => {\r\n          if (keys_list.indexOf(el) === -1) {\r\n            keys_list.push(el);\r\n          }\r\n        });\r\n      });\r\n\r\n      if(keys_list.length > 0){\r\n        keys_list.push(keys_list[0].split(\"::\")[0]);\r\n      }\r\n      keys_list = keys_list.sort();\r\n\r\n      if(keys_list.length === 0){\r\n        keys_list.push(this.props.report_header_data.selected_class);\r\n      }\r\n\r\n    } else {\r\n      keys_list = checkedKeys.checked;\r\n    }\r\n\r\n    for (let index = 0; index < keys_list.length; index++) {\r\n      const element = keys_list[index];\r\n      let element_fields = await this.getFieldList(element, get_new);\r\n      if (element_fields && checkedKeys.checked.indexOf(element) > -1) {\r\n        fields.push(element_fields);\r\n      }\r\n    }\r\n    this.setState({\r\n      checkedKeys,\r\n    });\r\n\r\n    this.props.updateFieldList(fields);\r\n  }\r\n\r\n\r\n  onExpand = (expandedKeys) => {\r\n    this.setState({\r\n      expandedKeys,\r\n    });\r\n  }\r\n\r\n  findPathInTree = (tree, path, parent) => {\r\n    for (let index = 0; index < tree.length; index++) {\r\n      const element = tree[index];\r\n      element.breadcrumbs_label = (parent ? parent.breadcrumbs_label + \" > \" : '') + element.label;\r\n      if (element.path === path) {\r\n        return element;\r\n      }\r\n\r\n      if (element.children && element.children.length > 0) {\r\n        let tmp = this.findPathInTree(element.children, path, element);\r\n        if (tmp) {\r\n          return tmp;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  onClickLoad = async (treeNode,b,c,d,e) => {\r\n\r\n    //const wait = time => new Promise(resolve => setTimeout(resolve, time))\r\n\r\n    const treeData = [...this.state.treeData];\r\n    let node = this.findPathInTree(treeData, treeNode.props.eventKey);\r\n    let labelNode = node.label\r\n    node.label += \" cargando...\"\r\n    node.fetchingData = true\r\n    this.setState({ treeData })\r\n    //await wait(3000)\r\n    await this.loadBranch(node).finally(() => { \r\n      node.label = labelNode\r\n      delete node.fetchingData\r\n    })\r\n    this.setState({ treeData })\r\n    const expandedKeys = [...this.state.expandedKeys]\r\n    expandedKeys.push(treeNode.props.eventKey);\r\n    this.setState({ treeData, expandedKeys });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.props.is_create_edit) {\r\n      this.props.updateObjectProperty('report_header_data', 'metadata', this.state);\r\n    }\r\n\r\n  }\r\n\r\n  loadBranch = async (node) => {\r\n    node.children = [];\r\n\r\n    return fetch('/api/BLFlex/GetClassInfo/', {\r\n      method: 'POST',\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Accept\": \"application/json\",\r\n        //\"X-CSRFToken\": cookie.load('csrftoken'),\r\n        \"X-Auth-Token\": getUserToken(),\r\n        'X-Requested-With': 'XMLHttpRequest'\r\n      },\r\n      body: JSON.stringify(node)\r\n    }).then(res => res.json())\r\n      .then(data => {\r\n        if (data.status === false) {\r\n          throw (data.message);\r\n        }\r\n        node.children = [];\r\n        let relationships = data.data['relationships'];\r\n        node.field_list = data.data['fields'] || [];\r\n\r\n        for (let i = 0; i < node.field_list.length; i++) {\r\n          const field = node.field_list[i];\r\n          field.path = node.path;\r\n          field.key_name = formatFieldParameter(node.path, field.name);\r\n        }\r\n\r\n        relationships['many_to_many'].forEach((element, index) => {\r\n          element.path = node.path + '::' + element.fk_name;\r\n          node.children.push(element);\r\n        });\r\n\r\n        relationships['many_to_one'].forEach((element, index) => {\r\n          element.path = node.path + '::' + element.fk_name;\r\n          node.children.push(element);\r\n        });\r\n\r\n        relationships['one_to_many'].forEach((element, index) => {\r\n          element.path = node.path + '::' + element.class_name;\r\n          node.children.push(element);\r\n        });\r\n\r\n\r\n      }).catch(error => {\r\n        console.log(error);\r\n        try {\r\n          toast.error(error);\r\n        } catch (err) {\r\n          toast.error(\"Ocurrió un error al guardar\");\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    let first_node_disabled = false;\r\n    const { is_create_edit } = this.props;\r\n    const loop = (data, parent=undefined) => {\r\n      return data.map((item, index) => {\r\n        let disabled = (first_node_disabled === false && index === 0 ? true : false);\r\n        first_node_disabled = true;\r\n        let showChildren = true\r\n        let content\r\n\r\n        if (parent && item.label.startsWith('(m2m)') && item.label === parent.label) {\r\n          showChildren = false\r\n        }\r\n\r\n        if (showChildren) {\r\n          content = item.children ? loop(item.children, item) : null\r\n        } else {\r\n          content = null\r\n        }\r\n\r\n        let disableNode = false\r\n\r\n        if ('fetchingData' in item && item.fetchingData) {\r\n          disableNode = true\r\n        }\r\n\r\n        return (\r\n          <TreeNode disabled={ disableNode } disableCheckbox={ disabled || !is_create_edit } title={item.label} key={item.path} isLeaf={false} module_info={item}>{ content }</TreeNode>\r\n        );\r\n      });\r\n    };\r\n    const treeNodes = loop(this.state.treeData);\r\n    return (\r\n      <div >\r\n        <Tree\r\n          checkable\r\n          showIcon={false}\r\n          selectable={false}\r\n          onCheck={this.onCheck}\r\n          checkedKeys={this.state.checkedKeys}\r\n          expandedKeys={this.state.expandedKeys}\r\n          onExpand={this.onExpand}\r\n          autoExpandParent={true}\r\n          loadData={this.onClickLoad}\r\n          checkStrictly\r\n        >\r\n          {treeNodes}\r\n        </Tree>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'report_header_data': state.general.report_header_data,\r\n    'modules_list': cloneDeep(state.general.modules_list),\r\n    'is_create_edit': state.general.is_create_edit\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    'updateObjectProperty': (object_name, property, value) => {\r\n      dispatch(updateObjectPropertyAction(object_name, property, value));\r\n    },\r\n    'updateFieldList': (field_list) => {\r\n      dispatch(updateFieldList(field_list));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceTree)\r\n","import cloneDeep from 'lodash/cloneDeep';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Select from 'react-select';\r\nimport { Button, Col, Form, FormGroup, Input, Label, Modal, ModalBody, ModalFooter, ModalHeader, Row } from 'reactstrap';\r\nimport { fetchPreviewDataSuccess, toggleConfigModal as toggleConfigModalAction, updateObjectProperty as updateObjectPropertyAction } from '../storage/actions';\r\nimport { getSelectedGroupedOption } from '../Utils';\r\nimport SourceTree from './SourceTree';\r\n\r\n\r\n\r\nexport class ConfigModal extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onHandleChange = this.onHandleChange.bind(this);\r\n    }\r\n\r\n    async onHandleChange(property, value) {\r\n        await this.props.updateObjectProperty(\"report_header_data\", property, value);\r\n    }\r\n\r\n    onChangeSource = async (e) => {\r\n        await this.onHandleChange('selected_class', e.value);\r\n        await this.onHandleChange('module_path', e.class_path);\r\n        await this.onHandleChange('module', e.module);\r\n        this.props.cleanPreviewData();\r\n    }\r\n    render() {\r\n        const { report_header_data, users_list, toggleConfigModal, show_config_modal, modules_list, roles_list, groups, filters, columns, is_create_edit, teams_list } = this.props;\r\n        const module_class_list = cloneDeep(modules_list);\r\n        module_class_list.map((item) => {\r\n            if (!item.options) {\r\n                return item;\r\n            }\r\n            item.options.map((x) => { x[\"value\"] = x[\"class_name\"]; return x });\r\n            return item\r\n        });\r\n        return (<Modal scrollable={false} centered={true} size=\"lg\" isOpen={show_config_modal} toggle={toggleConfigModal} className=\"config-modal\">\r\n            <ModalHeader toggle={toggleConfigModal}><i className=\"fa fa-cog\" aria-hidden=\"true\"></i> Configuración</ModalHeader>\r\n            <ModalBody>\r\n                <Form>\r\n                    <Row form>\r\n                        <Col md={12}>\r\n                            <FormGroup>\r\n                                <Label for=\"name\">Nombre del reporte</Label>\r\n                                <Input type=\"text\" disabled={!is_create_edit} name=\"name\" id=\"name\" onChange={(e) => { this.onHandleChange(\"name\", e.target.value); }} value={report_header_data.name} />\r\n                            </FormGroup>\r\n                        </Col>\r\n                        {/* <Col md={6}>\r\n                            <FormGroup>\r\n                                <Label for=\"owner\">Propietario</Label>\r\n                                <Select name=\"owner\" isDisabled={!is_create_edit} options={users_list} onChange={(e) => { this.onHandleChange('owner_id', e.value) }} value={users_list.find((e) => { return e.value === report_header_data.owner_id })} />\r\n                            </FormGroup>\r\n                        </Col> */}\r\n                    </Row>\r\n                    {/* <Row form>\r\n                        <Col md={4}>\r\n                            <FormGroup>\r\n                                <Label for=\"visible_on_module\">Mostrar en</Label>\r\n                                <Select isDisabled={!is_create_edit} name=\"visible_on_module\" options={modules_list} onChange={(e) => { this.onHandleChange('visible_on_module', e.value) }} value={getSelectedGroupedOption(modules_list, report_header_data.visible_on_module)} />\r\n                            </FormGroup>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                            <FormGroup>\r\n                                <Label for=\"visible_users\">Visible para los usuarios</Label>\r\n                                <Select isDisabled={!is_create_edit} isMulti name=\"visible_users\" options={users_list} onChange={(items) => { this.onHandleChange('visible_users', (items ? items.map((item) => { return item.value }) : [])) }} value={users_list.filter((user) => { return report_header_data.visible_users.indexOf(user.value) !== -1 })} />\r\n                            </FormGroup>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                            <FormGroup>\r\n                                <Label for=\"visible_roles\">Visible para los roles</Label>\r\n                                <Select isDisabled={!is_create_edit} isMulti name=\"visible_roles\" options={roles_list} onChange={(items) => { this.onHandleChange('visible_roles', (items ? items.map((item) => { return item.value }) : [])) }} value={roles_list.filter((rol) => { return report_header_data.visible_roles.indexOf(rol.value) !== -1 })} />\r\n                            </FormGroup>\r\n                        </Col>\r\n                    </Row> */}\r\n                    <Row form>\r\n                        <Col md={12}>\r\n                            <FormGroup>\r\n                                <Label for=\"description\">Descripción</Label>\r\n                                <Input disabled={!is_create_edit} type=\"textarea\" name=\"description\" id=\"description\" onChange={(e) => { this.onHandleChange(\"description\", e.target.value); }} value={report_header_data.description} />\r\n                            </FormGroup>\r\n                        </Col>\r\n                    </Row>\r\n                    {/* <Row form>\r\n                        <Col md={12}>\r\n                            <FormGroup>\r\n                                <Label for=\"owner_team\">Equipo asignado</Label>\r\n                                <Select isDisabled={!is_create_edit} name=\"owner_team_id\" options={teams_list} onChange={(e) => { this.onHandleChange('owner_team_id', e.value) }} value={(report_header_data.owner_team_id && teams_list ? teams_list.find((team) => { return team.value === report_header_data.owner_team_id }) : null)} />\r\n                            </FormGroup>\r\n                        </Col>\r\n                    </Row> */}\r\n                    <Row form>\r\n                        <Col md={12}>\r\n                            <FormGroup>\r\n                                <Label for=\"module_path\">Fuente</Label>\r\n                                <div className=\"source-tree\">\r\n                                    <Col md={6}>\r\n                                        <Select isDisabled={(!is_create_edit || (groups && groups.length > 0) || (filters && filters.length > 0) || (columns && columns.length > 0))} name=\"module_path\" options={module_class_list} onChange={(e) => { this.onChangeSource(e) }} value={getSelectedGroupedOption(module_class_list, report_header_data.selected_class)} />\r\n                                    </Col>\r\n                                    <Col className=\"tree-container\" md={12}>\r\n                                        <SourceTree />\r\n                                    </Col>\r\n\r\n                                </div>\r\n\r\n                            </FormGroup>\r\n                        </Col>\r\n                    </Row>\r\n                </Form>\r\n            </ModalBody>\r\n            <ModalFooter>\r\n                {/* <Button color=\"secondary\" onClick={toggleConfigModal}>Cancelar</Button> */}\r\n                <Button color=\"primary\" className=\"btn_primary_def_1\" onClick={toggleConfigModal}>Continuar</Button>\r\n\r\n            </ModalFooter>\r\n        </Modal>);\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        'report_header_data': state.general.report_header_data,\r\n        'users_list': state.general.users_list,\r\n        'show_config_modal': state.general.show_config_modal,\r\n        'modules_list': state.general.modules_list,\r\n        'roles_list': state.general.roles_list,\r\n        'groups': state.general.groups,\r\n        'filters': state.general.filters,\r\n        'columns': state.general.columns,\r\n        'is_create_edit': state.general.is_create_edit,\r\n        'teams_list': state.general.teams_list\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        'toggleConfigModal': () => {\r\n            dispatch(toggleConfigModalAction());\r\n        },\r\n        'updateObjectProperty': async (object_name, property, value) => {\r\n            await dispatch(updateObjectPropertyAction(object_name, property, value));\r\n        },\r\n        'cleanPreviewData': () => {\r\n            dispatch(fetchPreviewDataSuccess([]));\r\n        },\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ConfigModal);","import React, { Component } from 'react'\r\nimport { Chart } from 'devextreme-react/chart';\r\n\r\nimport PieChart from 'devextreme-react/pie-chart';\r\nimport { toast } from 'react-toastify';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { applyTableFilter } from '../storage/actions';\r\nimport isEqual from 'lodash/isEqual';\r\nimport { numberFormat } from '../Utils';\r\nimport Funnel, {\r\n  Item,\r\n  Border,\r\n  Label,\r\n  Font,\r\n  Legend\r\n} from 'devextreme-react/funnel';\r\nimport _ from 'lodash';\r\n\r\n\r\n//TODO: Obtener desde el backend\r\nconst colors_scheme = [\"#80c9a7\", \"#bada8c\", \"#326fac\", \"#32b9b0\", \"#56bd8d\", \"#d1e5b1\", \"#ffd690\", \"#5ac5d9\", \"#6691c0\", \"#00a89d\", \"#addfea\", \"#f27c93\", \"#84d1e0\", \"#134b95\", \"#a8d9c4\", \"#a3cf66\", \"#f9a94b\", \"#f9bca5\", \"#69c7c2\", \"#ffe3b5\", \"#8cc640\", \"#f5a6b7\", \"#f9be77\", \"#f05a26\", \"#ed294e\", \"#f69c7b\", \"#2fb6d0\", \"#f79420\", \"#ef5370\", \"#f37a50\", \"#ffca6d\", \"#9bd7d5\", \"#1eb473\", \"#fcbb48\", \"#fcd4a4\", \"#98b7d5\"]\r\n\r\n\r\nclass OpalChart extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      line_series: []\r\n    }\r\n  }\r\n\r\n  groupData = async (props, replaces) => {\r\n    // if (props.loading) {\r\n    //   return;\r\n    // }\r\n    let data = props.data;\r\n    let chart_def = props.chart_def;\r\n    if (data.length <= 0 || (props.is_preview && data.length > 300 && !chart_def.operator)) {\r\n      return this.setState({ data: [], line_series: [] });\r\n    }\r\n\r\n    if (typeof replaces === 'undefined') {\r\n      replaces = {};\r\n    }\r\n\r\n    let acum_dict = {};\r\n    let xaxis = chart_def.xaxis;\r\n    if (chart_def.type === 'numeric') {\r\n       xaxis = \"oreports_all\";\r\n    }\r\n    let operator = chart_def.operator;\r\n    if (!chart_def.operator) {\r\n      return this.setState({ data: data, line_series: [] });\r\n    }\r\n\r\n    let xaxis_oreports_key = xaxis + \"_oreports_key\";\r\n    let type_with_value = ['line', 'area', 'stacked_bar', 'grouped_bar', 'horizontal_stacked_bar', 'horizontal_grouped_bar'].indexOf(chart_def.type) !== -1;\r\n    let use_value_field = (type_with_value && chart_def.value_field ? true : false);\r\n    let line_series = [];\r\n\r\n    await chart_def.yaxis.forEach(yaxis => {\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        try {\r\n          const row = data[i];\r\n          const xaxis_argument = (row[xaxis] in replaces ? replaces[row[xaxis]] : row[xaxis]);\r\n          const xaxis_argument_oreports_key = (row[xaxis_oreports_key] in replaces ? replaces[row[xaxis_oreports_key]] : row[xaxis_oreports_key]);\r\n          const value = (use_value_field ? Number(row[chart_def.value_field]) : Number(row[yaxis]));\r\n          if (!(xaxis_argument in acum_dict)) {\r\n            acum_dict[xaxis_argument] = {};\r\n            acum_dict[xaxis_argument][xaxis] = xaxis_argument;\r\n            acum_dict[xaxis_argument][xaxis_oreports_key] = xaxis_argument_oreports_key;\r\n\r\n            var colorIndex = i;\r\n            if (colorIndex > colors_scheme.length - 1) {\r\n              colorIndex = colorIndex % colors_scheme.length;\r\n            }\r\n            acum_dict[xaxis_argument][\"color\"] = colors_scheme[colorIndex];\r\n          }\r\n\r\n          let yaxis_agurment = (use_value_field ? row[yaxis] : yaxis);\r\n          if (use_value_field && line_series.indexOf(yaxis_agurment) === -1) {\r\n            line_series.push(yaxis_agurment);\r\n          }\r\n\r\n          if(chart_def.type === 'numeric' && operator === 'count' && row[yaxis] !== null && line_series.indexOf(row[yaxis]) === -1){\r\n            line_series.push(row[yaxis]);\r\n          }\r\n\r\n          if (!(yaxis_agurment in acum_dict[xaxis_argument])) {\r\n            acum_dict[xaxis_argument][yaxis_agurment + \"__counter\"] = 1;\r\n            if (operator === 'avg') {\r\n              acum_dict[xaxis_argument][yaxis_agurment] = [value];\r\n            } else if (operator === 'count') {\r\n              acum_dict[xaxis_argument][yaxis_agurment] = 1;\r\n            } else {\r\n              acum_dict[xaxis_argument][yaxis_agurment] = value;\r\n            }\r\n          } else {\r\n            acum_dict[xaxis_argument][yaxis_agurment + \"__counter\"] += 1;\r\n            if (operator === 'sum') {\r\n              acum_dict[xaxis_argument][yaxis_agurment] += value;\r\n            } else if (operator === 'count') {\r\n              acum_dict[xaxis_argument][yaxis_agurment] += 1;\r\n            } else if (operator === 'min') {\r\n              acum_dict[xaxis_argument][yaxis_agurment] = Math.min(acum_dict[xaxis_argument][yaxis_agurment], value);\r\n            } else if (operator === 'max') {\r\n              acum_dict[xaxis_argument][yaxis_agurment] = Math.max(acum_dict[xaxis_argument][yaxis_agurment], value);\r\n            } else if (operator === 'avg') {\r\n              acum_dict[xaxis_argument][yaxis_agurment].push(value);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.log(\"error for\", error);\r\n        }\r\n\r\n      }\r\n      if (operator === 'avg') {\r\n        for (var row_key in acum_dict) {\r\n          if (use_value_field) {\r\n            for (var attr_key in acum_dict[row_key]) {\r\n              if (acum_dict[row_key].hasOwnProperty(attr_key) && Array.isArray(acum_dict[row_key][attr_key])) {\r\n                acum_dict[row_key][attr_key] = acum_dict[row_key][attr_key].reduce(function (a, b) {\r\n                  return a + b;\r\n                }, 0) / acum_dict[row_key][attr_key].length;\r\n              }\r\n            }\r\n          } else {\r\n            acum_dict[row_key][yaxis] = acum_dict[row_key][yaxis].reduce(function (a, b) {\r\n              return a + b;\r\n            }, 0) / acum_dict[row_key][yaxis].length;\r\n          }\r\n        }\r\n      }else if(chart_def.type === 'numeric' && operator === 'count'){\r\n        \r\n        acum_dict[undefined][yaxis] = line_series.length;\r\n        line_series = [];\r\n      }\r\n    });\r\n    let return_data = Object.values(acum_dict);\r\n    if (chart_def && chart_def.order_options_value && chart_def.order_options_value.length > 0 && return_data.length > 0) {\r\n      const options = chart_def.order_options_value.map(e => { return e.value });\r\n      return_data = return_data.filter(row => {\r\n        return options.indexOf(row[xaxis_oreports_key]) !== -1;\r\n      });\r\n      return_data.sort((row1, row2) => {\r\n        const index1 = options.indexOf(row1[xaxis_oreports_key]);\r\n        const index2 = options.indexOf(row2[xaxis_oreports_key]);\r\n        return ((index1 > -1 ? index1 : Infinity) - (index2 > -1 ? index2 : Infinity));\r\n      });\r\n    }\r\n\r\n\r\n    if (return_data.length > 300) {\r\n      toast.error(\"Muchos datos para graficar, pruebe cambiando los filtros.\");\r\n      return this.setState({ data: [], line_series: line_series });\r\n    }\r\n\r\n\r\n    return this.setState({ data: return_data, line_series });\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.props.data.length > 0) {\r\n      this.groupData(this.props);\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(new_props) {\r\n    if ((!isEqual(new_props.data, this.props.data)) || (new_props.chart_def.xaxis !== this.props.chart_def.xaxis) || (new_props.chart_def.value_field !== this.props.chart_def.value_field) || (!isEqual(new_props.chart_def.yaxis, this.props.chart_def.yaxis)) || (new_props.chart_def.type !== this.props.chart_def.type) || (new_props.chart_def.operator !== this.props.chart_def.operator) || (new_props.loading !== this.props.loading) || (!isEqual(new_props.chart_def.order_options_value, this.props.chart_def.order_options_value))) {\r\n      this.groupData(new_props);\r\n    }\r\n  }\r\n\r\n  onPointClick = (info, agurment_field = false) => {\r\n    if (info.item && agurment_field) {\r\n      this.props.applyFilter(agurment_field, info.item.argument);\r\n    }\r\n    if (info.target && info.target.series) {\r\n      this.props.applyFilter(info.target.series.getArgumentField(), info.target.argument);\r\n    }\r\n  }\r\n\r\n  onLegendClick = (argument) => {\r\n    return (info) => {\r\n      if (argument && info.target) {\r\n\r\n        let value = info.target;\r\n\r\n        if (value.name) {\r\n          value = value.name;\r\n        }\r\n        if (['line', 'area', 'stacked_bar', 'grouped_bar', 'horizontal_stacked_bar', 'horizontal_grouped_bar'].indexOf(this.props.chart_def.type) !== -1 && this.props.chart_def.yaxis && this.props.chart_def.yaxis.length > 0) {\r\n          this.props.applyFilter(this.props.chart_def.yaxis[0], value);\r\n        } else {\r\n          this.props.applyFilter(argument, value);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  compareValues = (key, order = 'asc') => {\r\n    return function innerSort(a,b){\r\n      if(!a.hasOwnProperty(key) || !b.hasOwnProperty(key))return 0;\r\n\r\n      const varA = (typeof a[key] === 'string') ? a[key].toUpperCase() : a[key];\r\n      const varB = (typeof b[key] === 'string') ? b[key].toUpperCase() : b[key];\r\n\r\n      let comparision = 0;\r\n      if(varA > varB){\r\n        comparision = 1;\r\n      }else if(varA < varB){\r\n        comparision = -1;\r\n      }\r\n\r\n      return ((order === 'desc') ? (comparision * -1) : comparision)\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    const { chart_def, groups, columns, isZoomed } = this.props;\r\n\r\n    // if (loading) {\r\n    //   return <div className=\"chart-loading\"><span><i className=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i> Cargando...</span></div>;\r\n    // }\r\n    let axis_options = columns.map(field => { return { value: field.key_name, label: field.label, field_type: field[\"type\"] } }).concat(groups.map(field => { return { value: field.key_name, label: field.label, field_type: field[\"type\"] } }));\r\n    let chart_type = chart_def.type;\r\n    let is_line_type = ['line', 'area', 'stacked_bar', 'grouped_bar', 'horizontal_stacked_bar', 'horizontal_grouped_bar'].indexOf(chart_def.type) !== -1;\r\n\r\n    let chart_props = {\r\n      title: chart_def.title,\r\n      dataSource: this.state.data,\r\n      tooltip: {\r\n        enabled: true,\r\n        format: (value) => {\r\n          return numberFormat(value, 2);\r\n        },\r\n      },\r\n      legend: {\r\n        visible: true\r\n      },\r\n      onPointClick: this.onPointClick,\r\n      onLegendClick: this.onLegendClick(chart_def.xaxis)\r\n    }\r\n\r\n    switch (chart_def.type) {\r\n      case \"stacked_bar\":\r\n        chart_type = \"stackedBar\";\r\n        break;\r\n      case \"grouped_bar\":\r\n        chart_type = \"bar\";\r\n        break;\r\n      case \"horizontal_bar\":\r\n        chart_type = \"bar\";\r\n        chart_props[\"rotated\"] = true;\r\n        break;\r\n      case \"horizontal_stacked_bar\":\r\n        chart_type = \"stackedBar\";\r\n        chart_props[\"rotated\"] = true;\r\n        break;\r\n      case \"horizontal_grouped_bar\":\r\n        chart_type = \"bar\";\r\n        chart_props[\"rotated\"] = true;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    let series = [];\r\n\r\n    if (is_line_type) {\r\n      series = this.state.line_series.map(element => {\r\n        return {\r\n          valueField: element,\r\n          argumentField: chart_def.xaxis,\r\n          type: chart_type,\r\n          ignoreEmptyPoints: false,\r\n          name: element\r\n        }\r\n      });\r\n    } else {\r\n      series = chart_def.yaxis.map(element => {\r\n        let yaxis_option = axis_options.find(item => { return item.value === element });\r\n        return {\r\n          valueField: element,\r\n          argumentField: chart_def.xaxis,\r\n          type: chart_type,\r\n          ignoreEmptyPoints: true,\r\n          name: (yaxis_option ? yaxis_option.label : '')\r\n        }\r\n      });\r\n    }\r\n\r\n\r\n    chart_props[\"tooltip\"] = {\r\n      enabled: true,\r\n      format: (value) => {\r\n        return numberFormat(value, 2);\r\n      },\r\n      customizeTooltip: function (data) {\r\n        let large_number = numberFormat(data.originalValue, 2, true);\r\n        var txt = data.argumentText;\r\n        if (data.argumentText !== data.seriesName) {\r\n          txt += \"\\n\" + data.seriesName;\r\n        }\r\n        txt += \"\\n\" + large_number;\r\n        return { text: txt }\r\n      }\r\n    }\r\n\r\n\r\n\r\n    let chart_component = null;\r\n    if (chart_type === \"donut\") {\r\n      chart_props[\"commonSeriesSettings\"] = {\r\n        label: {\r\n          visible: true,\r\n          font: {\r\n            size: 16,\r\n            color: \"black\"\r\n          },\r\n          connector: {\r\n            visible: true,\r\n            width: 0.5\r\n          },\r\n        },\r\n        argumentField: chart_def.xaxis,\r\n        type: ''\r\n      };\r\n      chart_props[\"tooltip\"] = {\r\n        enabled: true,\r\n        format: (value) => {\r\n          return numberFormat(value, 2);\r\n        },\r\n        customizeTooltip: function (arg) {\r\n          let large_number = numberFormat(arg.originalValue, 2, true);\r\n          return {\r\n            text: `${arg.argumentText}\\n${large_number} - ${(arg.percent * 100).toFixed(2)}%`\r\n          };\r\n        }\r\n      }\r\n      chart_props[\"legend\"] = {\r\n        margin: 0,\r\n        horizontalAlignment: \"right\",\r\n        verticalAlignment: \"top\"\r\n      }\r\n      series.forEach(serie => {\r\n        serie.label = {\r\n          format: (value) => {\r\n            return numberFormat(value, 2);\r\n          },\r\n        }\r\n      });\r\n      chart_props[\"series\"] = series;\r\n      chart_props[\"resolveLabelOverlapping\"] = \"hide\";\r\n\r\n      chart_component = (\r\n        <PieChart\r\n          {...chart_props}\r\n          ref={(c) => this.chartRef = c}\r\n        >\r\n        </PieChart>\r\n      );\r\n    } else if (chart_type === \"funnel\") {\r\n      chart_props[\"argumentField\"] = chart_def.xaxis;\r\n      chart_props[\"valueField\"] = (series.length > 0 ? series[0].valueField : '');\r\n      chart_props[\"tooltip\"] = {\r\n        enabled: true,\r\n        format: (value) => {\r\n          return numberFormat(value, 2);\r\n        },\r\n        customizeTooltip: function (data) {\r\n          let large_number = numberFormat(data.value, 2, true);\r\n          var txt = `${data.item.argument}\\n${large_number}`;\r\n          return { text: txt }\r\n        }\r\n      }\r\n      chart_props[\"onItemClick\"] = (info) => {\r\n        return this.onPointClick(info, chart_def.xaxis);\r\n      }\r\n\r\n      chart_component = (\r\n        <Funnel\r\n          {...chart_props}\r\n          ref={(c) => this.chartRef = c}\r\n          sortData={(chart_def.order_options_value && chart_def.order_options_value.length > 0 ? false : true)}\r\n          algorithm={\"dynamicHeight\"}\r\n        >\r\n          <Legend visible={isZoomed ? true : false} />\r\n          <Item>\r\n            <Border visible={true} />\r\n          </Item>\r\n          <Label\r\n            visible={isZoomed ? true : false}\r\n            horizontalAlignment=\"left\"\r\n            backgroundColor=\"none\"\r\n            customizeText={(arg) => {\r\n              let formated_number = numberFormat(arg.value, 2);\r\n              return `${arg.item.argument} - ${formated_number}`;\r\n            }}\r\n          ><Font size={16} color={\"#000\"} /></Label>\r\n        </Funnel>\r\n      );\r\n    } else if (chart_type === \"numeric\") {\r\n      let chart_value = 0;\r\n      let value_field = series.length > 0 ? series[0].valueField : '';\r\n      (this.state.data || []).forEach(element => {\r\n        chart_value += element[value_field] || 0;\r\n      });\r\n\r\n      let value_type = axis_options.find((data) => { return data.value === value_field });\r\n      let large_number = 0;\r\n      if (value_type) {\r\n        switch (value_type.field_type) {\r\n          case \"CurrencyField\":\r\n            large_number = \"$\" + numberFormat(chart_value, 2, true);\r\n            chart_value = \"$\" + numberFormat(chart_value, 2);\r\n            break;\r\n          default:\r\n            large_number = numberFormat(chart_value, 2, true);\r\n            chart_value = numberFormat(chart_value, 2);\r\n            break;\r\n        }\r\n      }\r\n      chart_component = (\r\n        <div className=\"numeric-chart\" title={large_number} style={{\r\n          backgroundColor: chart_def.background_color || 'inherit',\r\n          color: chart_def.text_color || 'inherit',\r\n        }}>\r\n          <span className=\"numeric-chart-title\">{chart_def.title || ''}</span>\r\n          <span className=\"numeric-chart-body\">{chart_value}</span>\r\n        </div>\r\n      );\r\n    } else {\r\n      if (series.length > 1 || is_line_type) {\r\n        chart_props[\"series\"] = series;\r\n      } else {\r\n        chart_props[\"seriesTemplate\"] = {\r\n          nameField: chart_def.xaxis\r\n        };\r\n\r\n        chart_props[\"commonSeriesSettings\"] = {\r\n          argumentField: chart_def.xaxis,\r\n          valueField: (series.length > 0 ? series[0].valueField : ''),\r\n          type: chart_type,\r\n          ignoreEmptyPoints: true,\r\n        };\r\n      }\r\n      \r\n      const type_value_x = axis_options.find(e=>e.value === chart_def.xaxis)\r\n      if(type_value_x && type_value_x.field_type === \"IntegerField\")chart_props['argumentAxis'] = {'type':'discrete'}\r\n\r\n      const colSorter = columns.find(e=> e.isSorter);\r\n      if(colSorter){\r\n        const sortType = colSorter.sortType || null ? colSorter.sortType : 'desc';\r\n        let dataSorted = _.cloneDeep(chart_props.dataSource);\r\n        chart_props['dataSource'] = dataSorted.sort(this.compareValues(colSorter.name, sortType));\r\n      }\r\n      \r\n      chart_component = (<Chart \r\n        ref={(c) => this.chartRef = c}\r\n        {...chart_props}\r\n      >\r\n      </Chart>);\r\n    }\r\n    return chart_component;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'groups': state.general.groups,\r\n    'columns': state.general.columns,\r\n    'is_create_edit': state.general.is_create_edit,\r\n    //'loading': state.general.loading,\r\n    'data': state.general.charts_data,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    'applyFilter': (column, value) => {\r\n      dispatch(applyTableFilter(column, value));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OpalChart);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Group_2639\",\n  \"data-name\": \"Group 2639\",\n  transform: \"translate(19395 1576.005)\",\n  opacity: 0.5\n}, React.createElement(\"g\", {\n  id: \"Group_2637\",\n  \"data-name\": \"Group 2637\",\n  transform: \"translate(-19394.824 -1576.005)\"\n}, React.createElement(\"path\", {\n  id: \"Union_1\",\n  \"data-name\": \"Union 1\",\n  d: \"M16.385,36.808V24.457H4.035a4.035,4.035,0,0,1,0-8.07H16.385V4.036a4.035,4.035,0,1,1,8.07,0V16.386H36.806a4.035,4.035,0,1,1,0,8.07H24.456V36.808a4.035,4.035,0,0,1-8.07,0Z\",\n  transform: \"translate(100.419 28.47) rotate(-16)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_2\",\n  \"data-name\": \"Union 2\",\n  d: \"M16.385,36.808V24.458H4.035a4.036,4.036,0,0,1,0-8.071H16.385V4.036a4.035,4.035,0,1,1,8.07,0V16.386H36.806a4.036,4.036,0,0,1,0,8.071H24.456V36.808a4.035,4.035,0,0,1-8.07,0Z\",\n  transform: \"translate(242.773 0) rotate(28)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_4\",\n  \"data-name\": \"Union 4\",\n  d: \"M16.385,36.808V24.458H4.035a4.036,4.036,0,0,1,0-8.071H16.385V4.036a4.035,4.035,0,1,1,8.07,0V16.386H36.806a4.036,4.036,0,0,1,0,8.071H24.456V36.808a4.035,4.035,0,0,1-8.07,0Z\",\n  transform: \"translate(319.476 297.683) rotate(9)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_6\",\n  \"data-name\": \"Union 6\",\n  d: \"M16.385,36.808V24.458H4.035a4.036,4.036,0,0,1,0-8.071H16.385V4.036a4.035,4.035,0,1,1,8.07,0V16.386H36.806a4.036,4.036,0,0,1,0,8.071H24.456V36.808a4.035,4.035,0,0,1-8.07,0Z\",\n  transform: \"translate(27.361 293.694) rotate(-18)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_3\",\n  \"data-name\": \"Union 3\",\n  d: \"M10.427,23.423v-7.86H2.568a2.568,2.568,0,0,1,0-5.136h7.859V2.568a2.568,2.568,0,0,1,5.136,0v7.86h7.859a2.568,2.568,0,0,1,0,5.136H15.563v7.86a2.568,2.568,0,0,1-5.136,0Z\",\n  transform: \"translate(401.501 145.003) rotate(13)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_7\",\n  \"data-name\": \"Union 7\",\n  d: \"M10.427,23.423v-7.86H2.568a2.568,2.568,0,0,1,0-5.136h7.859V2.568a2.568,2.568,0,0,1,5.136,0v7.86h7.859a2.568,2.568,0,0,1,0,5.136H15.563v7.86a2.568,2.568,0,0,1-5.136,0Z\",\n  transform: \"translate(65.244 106.978) rotate(-15)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_5\",\n  \"data-name\": \"Union 5\",\n  d: \"M10.427,23.423v-7.86H2.568a2.568,2.568,0,0,1,0-5.136h7.859V2.568a2.568,2.568,0,0,1,5.136,0v7.86h7.859a2.568,2.568,0,0,1,0,5.136H15.563v7.86a2.568,2.568,0,0,1-5.136,0Z\",\n  transform: \"translate(184.787 348.896) rotate(-11)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_1\",\n  \"data-name\": \"Exclusion 1\",\n  d: \"M14,28a14.1,14.1,0,0,1-2.822-.284,13.921,13.921,0,0,1-5.006-2.106A14.039,14.039,0,0,1,1.1,19.449a13.926,13.926,0,0,1-.816-2.628,14.135,14.135,0,0,1,0-5.643A13.924,13.924,0,0,1,2.391,6.172,14.041,14.041,0,0,1,8.551,1.1,13.9,13.9,0,0,1,11.179.284a14.134,14.134,0,0,1,5.643,0,13.921,13.921,0,0,1,5.006,2.106A14.04,14.04,0,0,1,26.9,8.551a13.932,13.932,0,0,1,.816,2.628,14.137,14.137,0,0,1,0,5.643,13.925,13.925,0,0,1-2.107,5.006A14.041,14.041,0,0,1,19.45,26.9a13.914,13.914,0,0,1-2.628.816A14.1,14.1,0,0,1,14,28ZM14,4.359A9.6,9.6,0,0,0,8.61,6.006a9.669,9.669,0,0,0-3.493,4.242,9.628,9.628,0,0,0,.889,9.143,9.667,9.667,0,0,0,4.241,3.493,9.628,9.628,0,0,0,9.143-.889,9.671,9.671,0,0,0,3.493-4.241,9.628,9.628,0,0,0-.889-9.143,9.668,9.668,0,0,0-4.242-3.493A9.582,9.582,0,0,0,14,4.359Z\",\n  transform: \"translate(330.824 60.005)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_6\",\n  \"data-name\": \"Exclusion 6\",\n  d: \"M14,28a14.1,14.1,0,0,1-2.822-.284,13.921,13.921,0,0,1-5.006-2.106A14.039,14.039,0,0,1,1.1,19.449a13.926,13.926,0,0,1-.816-2.628,14.135,14.135,0,0,1,0-5.643A13.924,13.924,0,0,1,2.391,6.172,14.041,14.041,0,0,1,8.551,1.1,13.9,13.9,0,0,1,11.179.284a14.134,14.134,0,0,1,5.643,0,13.921,13.921,0,0,1,5.006,2.106A14.04,14.04,0,0,1,26.9,8.551a13.932,13.932,0,0,1,.816,2.628,14.137,14.137,0,0,1,0,5.643,13.925,13.925,0,0,1-2.107,5.006A14.041,14.041,0,0,1,19.45,26.9a13.914,13.914,0,0,1-2.628.816A14.1,14.1,0,0,1,14,28ZM14,4.359A9.6,9.6,0,0,0,8.61,6.006a9.669,9.669,0,0,0-3.493,4.242,9.628,9.628,0,0,0,.889,9.143,9.667,9.667,0,0,0,4.241,3.493,9.628,9.628,0,0,0,9.143-.889,9.671,9.671,0,0,0,3.493-4.241,9.628,9.628,0,0,0-.889-9.143,9.668,9.668,0,0,0-4.242-3.493A9.582,9.582,0,0,0,14,4.359Z\",\n  transform: \"translate(-0.176 160.005)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_4\",\n  \"data-name\": \"Exclusion 4\",\n  d: \"M14,28a14.1,14.1,0,0,1-2.822-.284,13.921,13.921,0,0,1-5.006-2.106A14.039,14.039,0,0,1,1.1,19.449a13.926,13.926,0,0,1-.816-2.628,14.135,14.135,0,0,1,0-5.643A13.924,13.924,0,0,1,2.391,6.172,14.041,14.041,0,0,1,8.551,1.1,13.9,13.9,0,0,1,11.179.284a14.134,14.134,0,0,1,5.643,0,13.921,13.921,0,0,1,5.006,2.106A14.04,14.04,0,0,1,26.9,8.551a13.932,13.932,0,0,1,.816,2.628,14.137,14.137,0,0,1,0,5.643,13.925,13.925,0,0,1-2.107,5.006A14.041,14.041,0,0,1,19.45,26.9a13.914,13.914,0,0,1-2.628.816A14.1,14.1,0,0,1,14,28ZM14,4.359A9.6,9.6,0,0,0,8.61,6.006a9.669,9.669,0,0,0-3.493,4.242,9.628,9.628,0,0,0,.889,9.143,9.667,9.667,0,0,0,4.241,3.493,9.628,9.628,0,0,0,9.143-.889,9.671,9.671,0,0,0,3.493-4.241,9.628,9.628,0,0,0-.889-9.143,9.668,9.668,0,0,0-4.242-3.493A9.582,9.582,0,0,0,14,4.359Z\",\n  transform: \"translate(262.824 370.005)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_8\",\n  \"data-name\": \"Exclusion 8\",\n  d: \"M14,28a14.1,14.1,0,0,1-2.822-.284,13.921,13.921,0,0,1-5.006-2.106A14.039,14.039,0,0,1,1.1,19.449a13.926,13.926,0,0,1-.816-2.628,14.135,14.135,0,0,1,0-5.643A13.924,13.924,0,0,1,2.391,6.172,14.041,14.041,0,0,1,8.551,1.1,13.9,13.9,0,0,1,11.179.284a14.134,14.134,0,0,1,5.643,0,13.921,13.921,0,0,1,5.006,2.106A14.04,14.04,0,0,1,26.9,8.551a13.932,13.932,0,0,1,.816,2.628,14.137,14.137,0,0,1,0,5.643,13.925,13.925,0,0,1-2.107,5.006A14.041,14.041,0,0,1,19.45,26.9a13.914,13.914,0,0,1-2.628.816A14.1,14.1,0,0,1,14,28ZM14,4.359A9.6,9.6,0,0,0,8.61,6.006a9.669,9.669,0,0,0-3.493,4.242,9.628,9.628,0,0,0,.889,9.143,9.667,9.667,0,0,0,4.241,3.493,9.628,9.628,0,0,0,9.143-.889,9.671,9.671,0,0,0,3.493-4.241,9.628,9.628,0,0,0-.889-9.143,9.668,9.668,0,0,0-4.242-3.493A9.582,9.582,0,0,0,14,4.359Z\",\n  transform: \"translate(380.824 274.005)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_2\",\n  \"data-name\": \"Exclusion 2\",\n  d: \"M8.5,17a8.559,8.559,0,0,1-1.713-.173,8.452,8.452,0,0,1-3.039-1.279,8.524,8.524,0,0,1-3.08-3.74,8.455,8.455,0,0,1-.5-1.6,8.582,8.582,0,0,1,0-3.426,8.454,8.454,0,0,1,1.279-3.04A8.525,8.525,0,0,1,5.192.668a8.441,8.441,0,0,1,1.6-.5,8.582,8.582,0,0,1,3.426,0,8.452,8.452,0,0,1,3.039,1.279,8.524,8.524,0,0,1,3.08,3.74,8.459,8.459,0,0,1,.5,1.6,8.583,8.583,0,0,1,0,3.426,8.455,8.455,0,0,1-1.279,3.04,8.525,8.525,0,0,1-3.74,3.079,8.448,8.448,0,0,1-1.6.5A8.558,8.558,0,0,1,8.5,17Zm0-14.353a5.826,5.826,0,0,0-3.273,1A5.871,5.871,0,0,0,3.107,6.222a5.845,5.845,0,0,0,.54,5.551,5.869,5.869,0,0,0,2.575,2.121,5.846,5.846,0,0,0,5.551-.54,5.872,5.872,0,0,0,2.121-2.575,5.846,5.846,0,0,0-.54-5.551,5.87,5.87,0,0,0-2.575-2.121A5.818,5.818,0,0,0,8.5,2.647Z\",\n  transform: \"translate(335.824 202.005)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_5\",\n  \"data-name\": \"Exclusion 5\",\n  d: \"M8.5,17a8.559,8.559,0,0,1-1.713-.173,8.452,8.452,0,0,1-3.039-1.279,8.524,8.524,0,0,1-3.08-3.74,8.455,8.455,0,0,1-.5-1.6,8.582,8.582,0,0,1,0-3.426,8.454,8.454,0,0,1,1.279-3.04A8.525,8.525,0,0,1,5.192.668a8.441,8.441,0,0,1,1.6-.5,8.582,8.582,0,0,1,3.426,0,8.452,8.452,0,0,1,3.039,1.279,8.524,8.524,0,0,1,3.08,3.74,8.459,8.459,0,0,1,.5,1.6,8.583,8.583,0,0,1,0,3.426,8.455,8.455,0,0,1-1.279,3.04,8.525,8.525,0,0,1-3.74,3.079,8.448,8.448,0,0,1-1.6.5A8.558,8.558,0,0,1,8.5,17Zm0-14.353a5.826,5.826,0,0,0-3.273,1A5.871,5.871,0,0,0,3.107,6.222a5.845,5.845,0,0,0,.54,5.551,5.869,5.869,0,0,0,2.575,2.121,5.846,5.846,0,0,0,5.551-.54,5.872,5.872,0,0,0,2.121-2.575,5.846,5.846,0,0,0-.54-5.551,5.87,5.87,0,0,0-2.575-2.121A5.818,5.818,0,0,0,8.5,2.647Z\",\n  transform: \"translate(109.824 361.005)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_3\",\n  \"data-name\": \"Exclusion 3\",\n  d: \"M8.5,17a8.559,8.559,0,0,1-1.713-.173,8.452,8.452,0,0,1-3.039-1.279,8.524,8.524,0,0,1-3.08-3.74,8.455,8.455,0,0,1-.5-1.6,8.582,8.582,0,0,1,0-3.426,8.454,8.454,0,0,1,1.279-3.04A8.525,8.525,0,0,1,5.192.668a8.441,8.441,0,0,1,1.6-.5,8.582,8.582,0,0,1,3.426,0,8.452,8.452,0,0,1,3.039,1.279,8.524,8.524,0,0,1,3.08,3.74,8.459,8.459,0,0,1,.5,1.6,8.583,8.583,0,0,1,0,3.426,8.455,8.455,0,0,1-1.279,3.04,8.525,8.525,0,0,1-3.74,3.079,8.448,8.448,0,0,1-1.6.5A8.558,8.558,0,0,1,8.5,17Zm0-14.353a5.826,5.826,0,0,0-3.273,1A5.871,5.871,0,0,0,3.107,6.222a5.845,5.845,0,0,0,.54,5.551,5.869,5.869,0,0,0,2.575,2.121,5.846,5.846,0,0,0,5.551-.54,5.872,5.872,0,0,0,2.121-2.575,5.846,5.846,0,0,0-.54-5.551,5.87,5.87,0,0,0-2.575-2.121A5.818,5.818,0,0,0,8.5,2.647Z\",\n  transform: \"translate(191.824 74.005)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_7\",\n  \"data-name\": \"Exclusion 7\",\n  d: \"M8.5,17a8.559,8.559,0,0,1-1.713-.173,8.452,8.452,0,0,1-3.039-1.279,8.524,8.524,0,0,1-3.08-3.74,8.455,8.455,0,0,1-.5-1.6,8.582,8.582,0,0,1,0-3.426,8.454,8.454,0,0,1,1.279-3.04A8.525,8.525,0,0,1,5.192.668a8.441,8.441,0,0,1,1.6-.5,8.582,8.582,0,0,1,3.426,0,8.452,8.452,0,0,1,3.039,1.279,8.524,8.524,0,0,1,3.08,3.74,8.459,8.459,0,0,1,.5,1.6,8.583,8.583,0,0,1,0,3.426,8.455,8.455,0,0,1-1.279,3.04,8.525,8.525,0,0,1-3.74,3.079,8.448,8.448,0,0,1-1.6.5A8.558,8.558,0,0,1,8.5,17Zm0-14.353a5.826,5.826,0,0,0-3.273,1A5.871,5.871,0,0,0,3.107,6.222a5.845,5.845,0,0,0,.54,5.551,5.869,5.869,0,0,0,2.575,2.121,5.846,5.846,0,0,0,5.551-.54,5.872,5.872,0,0,0,2.121-2.575,5.846,5.846,0,0,0-.54-5.551,5.87,5.87,0,0,0-2.575-2.121A5.818,5.818,0,0,0,8.5,2.647Z\",\n  transform: \"translate(86.824 165.005)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"g\", {\n  id: \"statistics\",\n  transform: \"translate(120.064 106.425)\",\n  opacity: 0.5\n}, React.createElement(\"path\", {\n  id: \"Path_1074\",\n  \"data-name\": \"Path 1074\",\n  d: \"M47.522,88.116A16.439,16.439,0,0,0,58.958,83.47l16.3,8.15a16.182,16.182,0,0,0-.2,2,16.522,16.522,0,1,0,33.043,0,16.321,16.321,0,0,0-1.656-7.078L128.56,64.43a16.321,16.321,0,0,0,7.078,1.656,16.541,16.541,0,0,0,16.522-16.522,16.274,16.274,0,0,0-.825-4.893l19.215-14.408a16.511,16.511,0,1,0-7.376-13.742A16.274,16.274,0,0,0,164,21.415L144.783,35.823a16.45,16.45,0,0,0-24.011,20.82L98.657,78.758a16.235,16.235,0,0,0-18.514,2.989l-16.3-8.15a16.182,16.182,0,0,0,.2-2A16.522,16.522,0,1,0,47.522,88.116Zm0,0\",\n  transform: \"translate(-19.618)\",\n  fill: \"#909090\"\n}), React.createElement(\"path\", {\n  id: \"Path_1075\",\n  \"data-name\": \"Path 1075\",\n  d: \"M182.473,271.893H176.6V155.507A5.5,5.5,0,0,0,171.091,150H149.062a5.5,5.5,0,0,0-5.507,5.507V271.893H132.541V188.551a5.5,5.5,0,0,0-5.507-5.507H105a5.5,5.5,0,0,0-5.507,5.507v83.343H88.483V232.608a5.5,5.5,0,0,0-5.507-5.507H60.947a5.5,5.5,0,0,0-5.507,5.507v39.285H44.425V210.58a5.505,5.505,0,0,0-5.507-5.507H16.889a5.505,5.505,0,0,0-5.507,5.507v61.314H5.507a5.507,5.507,0,1,0,0,11.014H182.473a5.507,5.507,0,1,0,0-11.014Zm0,0\",\n  transform: \"translate(0 -94.928)\",\n  fill: \"#909090\"\n}))));\n\nvar SvgEmptyDash = function SvgEmptyDash(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 426.998,\n    height: 398.005,\n    viewBox: \"0 0 426.998 398.005\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgEmptyDash, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/empty_dash.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\r\nimport reactCSS from 'reactcss'\r\nimport { SketchPicker } from 'react-color'\r\n\r\nclass ColorPicker extends React.Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      displayColorPicker: false,\r\n      color: props.defaultColor || '#fff',\r\n    };\r\n  }\r\n\r\n  handleClick = () => {\r\n    this.setState({ displayColorPicker: !this.state.displayColorPicker })\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ displayColorPicker: false })\r\n  };\r\n\r\n  handleChange = (color) => {\r\n    this.setState({ color: color.hex })\r\n    this.props.onChange(color.hex);\r\n  };\r\n\r\n  render() {\r\n\r\n    const { value } = this.props;\r\n    const render_color = (value ? value : this.state.color);\r\n\r\n    const styles = reactCSS({\r\n      'default': {\r\n        color: {\r\n          width: '36px',\r\n          height: '14px',\r\n          borderRadius: '2px',\r\n          background: `${render_color}`,\r\n        },\r\n        swatch: {\r\n          padding: '5px',\r\n          background: '#fff',\r\n          borderRadius: '5px',\r\n          boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\r\n          display: 'inline-block',\r\n          cursor: 'pointer',\r\n        },\r\n        popover: {\r\n          position: 'absolute',\r\n          zIndex: '2',\r\n        },\r\n        cover: {\r\n          position: 'fixed',\r\n          top: '0px',\r\n          right: '0px',\r\n          bottom: '0px',\r\n          left: '0px',\r\n        },\r\n      },\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        <div style={styles.swatch} onClick={this.handleClick}>\r\n          <div style={styles.color} />\r\n        </div>\r\n        {this.state.displayColorPicker ? <div style={styles.popover}>\r\n          <div style={styles.cover} onClick={this.handleClose} />\r\n          <SketchPicker color={this.state.color} onChange={this.handleChange} />\r\n        </div> : null}\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ColorPicker","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Select from 'react-select';\r\nimport { Button, Col, Form, FormGroup, Input, Label, Modal, ModalBody, ModalFooter, Row } from 'reactstrap';\r\nimport { toggleChartsModal as toggleChartsModalAction, addChart, setEditChartIndex, editChart } from '../storage/actions';\r\n\r\nimport OpalChart from './Chart';\r\nimport { ReactComponent as EmptyImage } from '../images/empty_dash.svg';\r\nimport cookie from 'react-cookies';\r\nimport ColorPicker from './ColorPicker';\r\nimport {getUserToken} from '../Utils';\r\n\r\nconst charts_options = [\r\n  { value: \"bar\", label: \"Barras\" },\r\n  { value: \"stacked_bar\", label: \"Barras Apiladas\" },\r\n  { value: \"grouped_bar\", label: \"Barras Agrupadas\" },\r\n  { value: \"horizontal_bar\", label: \"Barras Horizontales\" },\r\n  { value: \"horizontal_stacked_bar\", label: \"Barras Horizontales Apiladas\" },\r\n  { value: \"horizontal_grouped_bar\", label: \"Barras Horizontales Agrupadas\" },\r\n  { value: \"donut\", label: \"Dona\" },\r\n  { value: \"line\", label: \"Líneas\" },\r\n  { value: \"area\", label: \"Área\" },\r\n  { value: \"funnel\", label: \"Funnel\" },\r\n  { value: \"numeric\", label: \"Numérico\" }\r\n]; //TODO: Colocar imagenes, pedir los svg\r\n\r\nconst operator_options = [\r\n  { value: \"count\", label: \"Contar\" },\r\n  { value: \"sum\", label: \"Sumar\" },\r\n  { value: \"avg\", label: \"Promedio\" },\r\n  { value: \"max\", label: \"Maximo\" },\r\n  { value: \"min\", label: \"Mínimo\" }\r\n]; //TODO: Obtener desde el backend\r\n\r\n\r\nclass ChartsModal extends Component {\r\n\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.initial_state = {\r\n      title: '',\r\n      type: '',\r\n      xaxis: '',\r\n      yaxis: [],\r\n      operator: '',\r\n      order_options: [],\r\n      order_options_value: [],\r\n      value_field: '',\r\n      background_color: '#fff',\r\n      text_color: \"#000\"\r\n    }\r\n\r\n    this.state = { ...this.initial_state };\r\n  }\r\n\r\n  getOptionsEnums = async (selectfield_params) => {\r\n    if (!selectfield_params) {\r\n      this.setState({\r\n        order_options: []\r\n      });\r\n      return;\r\n    }\r\n\r\n    let data = {\r\n      enum: selectfield_params.list_name,\r\n      fieldDef: selectfield_params\r\n    }\r\n\r\n    fetch('/api/BLFlex/GetOptionsEnum/', {\r\n      method: 'POST',\r\n      credentials: \"same-origin\",\r\n      headers: {\r\n        \"Accept\": \"application/json\",\r\n        // \"X-CSRFToken\": cookie.load('csrftoken'),\r\n        \"X-Auth-Token\": getUserToken(),\r\n        'X-Requested-With': 'XMLHttpRequest'\r\n      },\r\n      body: JSON.stringify(data)\r\n    })\r\n      .then(res => {\r\n        return res.json()\r\n      })\r\n      .then(res => {\r\n        if (res.data.status && res.data.options) {\r\n          this.setState({\r\n            order_options: res.data.options.map(field => { return { value: field.key, label: field.label } })\r\n          });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(\"[getOptionsEnums] Error\", error);\r\n        this.setState({\r\n          order_options: []\r\n        });\r\n      });\r\n  }\r\n\r\n  componentWillReceiveProps(new_props) {\r\n    if (new_props.edit_chart_index !== this.props.edit_chart_index) {\r\n      try {\r\n        let chart_def = new_props.chart_list[new_props.edit_chart_index];\r\n        this.setState({ ...chart_def });\r\n      } catch (error) {\r\n        \r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  onSave = async () => {\r\n    const { edit_chart_index } = this.props;\r\n    if(typeof edit_chart_index !== \"undefined\" && edit_chart_index !== null){\r\n      await this.props.editChart(edit_chart_index, this.state);\r\n    }else{\r\n      await this.props.addChart(this.state);\r\n    }\r\n    this.closeModal();\r\n    // if (this.props.dashlet_id) {\r\n\r\n    //   fetch('/OpalUiGridClass/containers_save_options/', {\r\n    //     method: 'POST',\r\n    //     credentials: \"same-origin\",\r\n    //     headers: {\r\n    //       \"Accept\": \"application/json\",\r\n    //       \"X-CSRFToken\": cookie.load('csrftoken'),\r\n    //       'X-Requested-With': 'XMLHttpRequest'\r\n    //     },\r\n    //     body: JSON.stringify({\r\n    //       \"options\": this.state,\r\n    //       \"id\": this.props.dashlet_id,\r\n    //       \"category\": 'OpalUiGrid_Chart_Def',\r\n    //     })\r\n    //   })\r\n    //     .then(res => {\r\n    //       //toast.success(\"Guardado satisfactoriamente\");\r\n    //       return true;\r\n    //     })\r\n    //     .catch(error => {\r\n    //       try {\r\n    //         toast.error(error);\r\n    //       } catch (err) {\r\n    //         toast.error(\"Ocurrió un error al guardar\");\r\n    //       }\r\n    //       return false;\r\n    //     });\r\n    //   await this.props.toggleChartsModal();\r\n    //   this.props.setChartStruct(this.state);\r\n\r\n    // } else {\r\n    //   this.props.addChart(this.state);\r\n    //   this.setState({ ...this.initial_state });\r\n    // }\r\n  }\r\n\r\n  onHandleChange = (field, value) => {\r\n    this.setState({\r\n      [field]: value\r\n    });\r\n  }\r\n\r\n  closeModal = async () => {\r\n    this.setState({ ...this.initial_state }); \r\n    await this.props.setEditChartIndex(undefined);\r\n    this.props.toggleChartsModal();\r\n  }\r\n\r\n  render() {\r\n    const { show_charts_modal, groups, columns, edit_chart_index } = this.props;\r\n    let axis_options = columns.map(field => { return { value: field.key_name, label: field.label, selectfield_params: field.selectfield_params } }).concat(groups.map(field => { return { value: field.key_name, label: field.label, selectfield_params: field.selectfield_params } }));\r\n\r\n    let yaxis_props = {}\r\n\r\n    if (['donut'].indexOf(this.state.type) >= 0) {\r\n      yaxis_props[\"isMulti\"] = true;\r\n      yaxis_props[\"onChange\"] = (items) => { this.onHandleChange('yaxis', (items ? items.map((item) => { return item.value }) : [])) };\r\n      yaxis_props[\"value\"] = axis_options.filter((data) => { return this.state.yaxis.indexOf(data.value) !== -1 });\r\n    } else {\r\n      yaxis_props[\"isMulti\"] = false;\r\n      yaxis_props[\"onChange\"] = (items) => { this.onHandleChange('yaxis', (items ? [items.value] : [])) };\r\n      yaxis_props[\"value\"] = axis_options.filter((data) => { return this.state.yaxis.indexOf(data.value) !== -1 });\r\n    }\r\n\r\n    let yaxis_label = \"Eje Y\";\r\n\r\n    switch (this.state.type) {\r\n      case \"donut\":\r\n        yaxis_label = \"Valores\";\r\n        break;\r\n      case \"funnel\":\r\n      case \"numeric\":\r\n        yaxis_label = \"Valor\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return (<Modal scrollable={false} centered={true} size=\"lg\" isOpen={show_charts_modal} toggle={this.closeModal} className=\"config-modal charts-modal\">\r\n      <ModalBody>\r\n        <div className=\"chart-sidebar\">\r\n          <span className=\"chart-title\">{typeof edit_chart_index !== 'undefined' && edit_chart_index !== null ? 'Edita' : 'Crea'} un Gráfico</span>\r\n          <Form>\r\n            <Row form>\r\n              <Col>\r\n                <FormGroup>\r\n                  <Label for=\"name\">Nombre</Label>\r\n                  <Input type=\"text\" name=\"name\" id=\"name\" className=\"input-sm\" bsSize=\"sm\" value={this.state.title} onChange={(e) => { this.onHandleChange(\"title\", e.target.value); }} />\r\n                </FormGroup>\r\n              </Col>\r\n              <Col>\r\n                <FormGroup>\r\n                  <Label for=\"chart_type\">Seleccione un tipo de gráfico</Label>\r\n                  <Select name=\"chart_type\" options={charts_options} onChange={(e) => { this.onHandleChange(\"type\", e.value); }} value={charts_options.find((e) => { return e.value === this.state.type })} />\r\n                </FormGroup>\r\n              </Col>\r\n              {this.state.type !== 'numeric' ? <Col>\r\n                <FormGroup>\r\n                  <Label for=\"name\">{this.state.type === 'donut' ? 'Etiqueta' : 'Eje X'}</Label>\r\n                  <Select name=\"xaxis\" options={axis_options} onChange={(e) => { this.onHandleChange(\"xaxis\", e.value); this.getOptionsEnums(e.selectfield_params); }} value={axis_options.find((e) => { return e.value === this.state.xaxis })} />\r\n                </FormGroup>\r\n              </Col> : null}\r\n              <Col>\r\n                <FormGroup>\r\n                  <Label for=\"name\">{yaxis_label}</Label>\r\n                  <Select name=\"yaxis\" {...yaxis_props} options={axis_options} />\r\n                </FormGroup>\r\n              </Col>\r\n              {['line', 'area', 'stacked_bar', 'grouped_bar', 'horizontal_stacked_bar', 'horizontal_grouped_bar'].indexOf(this.state.type) >= 0 ? <Col>\r\n                <FormGroup>\r\n                  <Label for=\"value_field\">Valor</Label>\r\n                  <Select name=\"value_field\" options={axis_options} onChange={(e) => { this.onHandleChange(\"value_field\", e.value); }} value={axis_options.find((e) => { return e.value === this.state.value_field })} />\r\n                </FormGroup>\r\n              </Col> : null}\r\n              <Col>\r\n                <FormGroup>\r\n                  <Label for=\"name\">Operador</Label>\r\n                  <Select name=\"operation\" options={operator_options} onChange={(e) => { this.onHandleChange(\"operator\", e.value); }} value={operator_options.find((e) => { return e.value === this.state.operator })} />\r\n                </FormGroup>\r\n              </Col>\r\n              {['bar', 'stacked_bar', 'grouped_bar', 'horizontal_bar', 'horizontal_stacked_bar', 'horizontal_grouped_bar', 'funnel'].indexOf(this.state.type) >= 0 && this.state.order_options.length > 0 ? <Col>\r\n                <FormGroup>\r\n                  <Label for=\"orden\">Orden</Label>\r\n                  <Select name=\"yaxis\" isMulti options={this.state.order_options} onChange={(items) => {\r\n                    this.onHandleChange('order_options_value', (items ? items : []))\r\n                  }} value={this.state.order_options_value} />\r\n                </FormGroup>\r\n              </Col> : null}\r\n            </Row>\r\n            {this.state.type === 'numeric' ?\r\n              <Row>\r\n                <Col md={6}>\r\n                  <FormGroup>\r\n                    <Label for=\"name\">Color del Texto</Label>\r\n                    <ColorPicker defaultColor=\"#000\" onChange={(color) => { this.onHandleChange(\"text_color\", color); }} value={this.state.text_color} />\r\n                  </FormGroup>\r\n                </Col>\r\n                <Col md={6}>\r\n                  <FormGroup>\r\n                    <Label for=\"name\">Color del Fondo</Label>\r\n                    <ColorPicker defaultColor=\"#fff\" onChange={(color) => { this.onHandleChange(\"background_color\", color); }} value={this.state.background_color} />\r\n                  </FormGroup>\r\n                </Col>\r\n              </Row> : null}\r\n\r\n          </Form>\r\n        </div>\r\n        <div className=\"chart-preview\">\r\n          <div className=\"chart-dx-preview\">\r\n            <span className=\"chart-preview-title\">Vista Previa</span>\r\n            {this.state.type ? <OpalChart is_preview={true} chart_def={{ ...this.state }} /> : <div className=\"dash-placeholder\">\r\n              <EmptyImage />\r\n            </div>}\r\n\r\n          </div>\r\n\r\n          <ModalFooter>\r\n            <Button color=\"primary\" className=\"btn_primary_def_1\" onClick={this.onSave}>{typeof edit_chart_index !== 'undefined' && edit_chart_index !== null ? 'Editar' : 'Agregar'}</Button>\r\n            <Button color=\"secondary\" className=\"btn_secondary_def_1\"  onClick={() => { this.closeModal(); }}>Cancelar</Button>\r\n          </ModalFooter>\r\n        </div>\r\n\r\n      </ModalBody>\r\n\r\n    </Modal>);\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'show_charts_modal': state.general.show_charts_modal,\r\n    'groups': state.general.groups,\r\n    'columns': state.general.columns,\r\n    //'is_create_edit': state.general.is_create_edit,\r\n    'edit_chart_index': state.general.edit_chart_index,\r\n    'dashlet_id': state.general.dashlet_id,\r\n    'chart_list': state.general.chart_list,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    'toggleChartsModal': () => {\r\n      dispatch(toggleChartsModalAction());\r\n    },\r\n    'addChart': (chart_def) => {\r\n      dispatch(addChart(chart_def));\r\n    },\r\n    'setEditChartIndex': (chart_index) => {\r\n      dispatch(setEditChartIndex(chart_index));\r\n    },\r\n    'editChart': (index, chart_def) => {\r\n      dispatch(editChart(index, chart_def));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChartsModal);","import React from 'react';\r\n\r\nexport default function LinkCell(cellData) {\r\n  let field_link = \"\";\r\n  try {\r\n    let field = cellData.column.dataField;\r\n    let field_module = cellData.column.related_module_name;\r\n    let field_id = field + \"_link_id\";\r\n    field_link = \"/\" + field_module + \"/detail/\" + cellData.data[field_id] + \"/\";\r\n  } catch (error) {\r\n    field_link = \"#\";\r\n  }\r\n  let data = cellData.value;\r\n  if (cellData.column.dataType === 'datetime' || cellData.column.dataType === 'date'){\r\n    data = cellData.text;\r\n  }\r\n  return (\r\n    <div>\r\n      <a href={field_link} target=\"_blank\" rel=\"noopener noreferrer\">{data}</a>\r\n      <div className=\"current-value\"></div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nexport default function CurrencyCell(cellData) {\r\n  let data = cellData.value;\r\n  if(data || data === 0){\r\n      //data = data.toFixed(4);\r\n      data = \"$ \" + data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"current-value\">{data}</div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';;\r\n\r\nexport class TableFooter extends Component {\r\n  render() {\r\n    const { data, is_create_edit } = this.props;\r\n    let footer_total = (data ? data.length : 0);\r\n    return (\r\n      <div className=\"table-footer\">\r\n        {is_create_edit ?\r\n\r\n          <span className=\"info-message\"><i className=\"fa fa-info-circle\" aria-hidden=\"true\"></i> Está realizando una vista previa de un número limitado de registros. Guarde y cierre el informe para ver todo.</span>\r\n          : <span className=\"info-message\">{footer_total + \" registros\"}</span>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  'data': state.general.charts_data,\r\n  'is_create_edit': state.general.is_create_edit,\r\n});\r\n\r\nexport default connect(mapStateToProps)(TableFooter);\r\n","import cookie from 'react-cookies';\r\nimport { toast } from 'react-toastify';\r\nimport { \r\n    fetchPreviewDataError, \r\n    fetchPreviewDataPending, \r\n    fetchPreviewDataSuccess, \r\n    getConfigPending,\r\n    getConfigSuccess,\r\n    getConfigError,\r\n    saveDataError, \r\n    saveDataPending, \r\n    saveDataSuccess \r\n} from './actions';\r\n\r\nimport {\r\n    formulasLib, getUserToken\r\n} from '../Utils'\r\n\r\nexport const save = (close_window = false) => {\r\n    return (dispatch, getState) => {\r\n        let current_state = getState().general || {};\r\n        dispatch(saveDataPending());\r\n        fetch('/api/BLFlex/SaveReport/', {\r\n            method: 'POST',\r\n            credentials: \"same-origin\",\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                // \"X-CSRFToken\": cookie.load('csrftoken'),\r\n                \"X-Auth-Token\": getUserToken(),\r\n                'X-Requested-With': 'XMLHttpRequest'\r\n            },\r\n            body: JSON.stringify({\r\n                \"id\": current_state.id,\r\n                \"name\": current_state.report_header_data.name,\r\n                \"description\": current_state.report_header_data.description,\r\n                \"selected_class\": current_state.report_header_data.selected_class,\r\n                \"module\":  current_state.report_header_data.module,\r\n                \"visible_users\": current_state.report_header_data.visible_users,\r\n                \"visible_roles\": current_state.report_header_data.visible_roles,\r\n                \"visible_on_module\": current_state.report_header_data.visible_on_module,\r\n                \"module_path\": current_state.report_header_data.module_path,\r\n                \"select_list\": current_state.columns,\r\n                \"filter_list\": current_state.filters,\r\n                \"chart_list\": current_state.chart_list,\r\n                \"owner\": { id: current_state.report_header_data.owner_id },\r\n                \"owner_team\": { id: current_state.report_header_data.owner_team_id },\r\n                \"group_list\": current_state.groups,\r\n                \"version\": 2,\r\n                \"metadata\": JSON.stringify(Object.assign(current_state.report_header_data.metadata || {}, {\r\n                    field_list: current_state.field_list,\r\n                }))\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                if (res.status === false) {\r\n                    throw (res.message);\r\n                }\r\n                toast.success(\"Guardado satisfactoriamente\");\r\n                dispatch(saveDataSuccess(res.data));\r\n                if (close_window) {\r\n                    window.location.href = '/BLFlex/detail/' + res.data.id;\r\n                }\r\n                return res.data;\r\n            })\r\n            .catch(error => {\r\n                try {\r\n                    toast.error(error);\r\n                } catch (err) {\r\n                    toast.error(\"Ocurrió un error al guardar\");\r\n                }\r\n\r\n                dispatch(saveDataError(error));\r\n            })\r\n    };\r\n}\r\n\r\nexport const fetchMainConfig = () => {\r\n    return (dispatch, getState) => {\r\n        let current_state = getState().general || {};\r\n        let url = '/api/BLFlex/GetConfig/';\r\n\r\n        dispatch(getConfigPending());\r\n        fetch(url, {\r\n            method: 'POST',\r\n            credentials: \"same-origin\",\r\n            headers: {\r\n                \"Accept\": \"application/json\",\r\n                // \"X-CSRFToken\": cookie.load('csrftoken'),\r\n                \"X-Auth-Token\": getUserToken(),\r\n                'X-Requested-With': 'XMLHttpRequest'\r\n            },\r\n            body: JSON.stringify({\r\n                \"id\": current_state.id || 0\r\n            })\r\n        })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                if (res.status === false) {\r\n                    throw (res.message);\r\n                }\r\n                //console.log(res.data);\r\n                //check if res.data.metadata is a string or object\r\n                try {\r\n                    if (typeof res.data.report_header_data.metadata === 'string') {\r\n                        res.data.report_header_data.metadata = JSON.parse(res.data.report_header_data.metadata);\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n                \r\n                dispatch(getConfigSuccess(res.data));\r\n                dispatch(fetchPreviewData());\r\n                return res.data;\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                try {\r\n                    toast.error(error);\r\n                } catch (err) {\r\n                    toast.error(\"Ocurrió un error al guardar\");\r\n                }\r\n\r\n                dispatch(getConfigError(error));\r\n            });\r\n    }\r\n}\r\n\r\nexport const fetchPreviewData = () => {\r\n    return (dispatch, getState) => {\r\n        let current_state = getState().general || {};\r\n        if (current_state.timeout_data_id !== null && typeof (current_state.timeout_data_id) !== \"undefined\") {\r\n            clearTimeout(current_state.timeout_data_id);\r\n        }\r\n        let url = '';\r\n        let params = {};\r\n        if (current_state.is_create_edit) {\r\n            url = '/api/BLFlex/PreviewData/';\r\n            //extraer las opciones del field_list en forma segura\r\n            const regularColumns = current_state.columns.filter(col => !col.customFn)\r\n            //concatenar las columnas \r\n            params = {\r\n                \"module_path\": current_state.report_header_data.module_path,\r\n                \"selected_class\": current_state.report_header_data.selected_class,\r\n                \"module\": current_state.report_header_data.module,\r\n                \"filters\": current_state.filters,\r\n                //\"columns\": current_state.columns,\r\n                \"columns\": regularColumns,\r\n                \"groups\": current_state.groups\r\n            }\r\n        } else {\r\n            url = '/api/BLFlex/UpdateData/';\r\n            params = {\r\n                \"id\": current_state.report_header_data.id,\r\n                \"filter_list\": current_state.filters,\r\n                'current_record': (current_state.current_record ? current_state.current_record : 0)\r\n            }\r\n        }\r\n        let timeoutData = setTimeout(() => {\r\n            fetch(url, {\r\n                method: 'POST',\r\n                credentials: \"same-origin\",\r\n                headers: {\r\n                    \"Accept\": \"application/json\",\r\n                    // \"X-CSRFToken\": cookie.load('csrftoken'),\r\n                    \"X-Auth-Token\": getUserToken(),\r\n                    'X-Requested-With': 'XMLHttpRequest'\r\n                },\r\n                body: JSON.stringify(params)\r\n            })\r\n                .then(res => res.json())\r\n                .then(res => {\r\n                    const fieldsMapTypes = current_state.field_list[0].options.map(option => Object.assign({}, { [option.name]: option.type })).reduce((obj, curr) => {\r\n                        return { ...obj, ...curr }\r\n                    }, {})\r\n                    const formulaColumns = current_state.columns.filter(col => col.customFn).concat(current_state.groups.filter(col => col.customFn))\r\n                    const calculatedColumnsNames = formulaColumns.map(col => col.key_name)\r\n                    const calculatedColumnsFormulas = formulaColumns\r\n                        .map(col => Object.assign({}, { [col.key_name]: col.formula }))\r\n                        .reduce((obj, curr) => {\r\n                            return { ...obj, ...curr }\r\n                        }, {})\r\n\r\n                    let contextAsScope = item => () => {\r\n                        return {\r\n                            ...formulasLib,\r\n                            ...item\r\n                        }\r\n                    }\r\n                    //columna tipo customFn, es necesario reemplazar los operandos en la formula y evaluar\r\n                    if (res.status === false) {\r\n                        throw (res.message);\r\n                    }\r\n\r\n                    const normalizeFormula = (formula) => {\r\n                        return formula.replace(/props\\((.*?)\\)/g, function (not_use, operand) {\r\n                            if (calculatedColumnsNames.indexOf(operand) === -1) {\r\n                                if ((operand in fieldsMapTypes) && [\"DecimalField\", \"FloatField\"].indexOf(fieldsMapTypes[operand]) !== -1) {\r\n                                    return `(parseFloat(${operand} || 0))`\r\n                                } else {\r\n                                    return `(${operand})`\r\n                                }\r\n                            } else {\r\n                                return `(${normalizeFormula(calculatedColumnsFormulas[operand], true)})`\r\n                            }\r\n                        })\r\n                    }\r\n\r\n                    const parseRes = res.data.map(item => {\r\n\r\n                        const calculatedColumns = formulaColumns.map(col => {\r\n                            const itemContext = contextAsScope(item)()\r\n                            return { [col.key_name]: (new Function(...Object.keys(itemContext), `return ${normalizeFormula(col.formula)}`))(...Object.values(itemContext)) }\r\n                        }).reduce((obj, curr) => {\r\n                            return { ...obj, ...curr }\r\n                        }, {})\r\n\r\n                        return { ...item, ...calculatedColumns }\r\n                    });\r\n\r\n                    dispatch(fetchPreviewDataSuccess(parseRes));\r\n                    return parseRes\r\n                })\r\n                .catch(error => {\r\n                    dispatch(fetchPreviewDataError(error));\r\n                })\r\n        }, 500);\r\n        dispatch(fetchPreviewDataPending(timeoutData));\r\n    }\r\n}","import DataGrid, { GroupItem, Scrolling, Selection, Summary, TotalItem, FilterRow, HeaderFilter, Sorting } from 'devextreme-react/data-grid';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport esMessages from 'devextreme/localization/messages/es.json';\r\nimport { locale, loadMessages } from 'devextreme/localization';\r\nimport { setChartsData, setSortColumns } from '../storage/actions';\r\nimport config from \"devextreme/core/config\";\r\nimport LinkCell from \"./TableCells/Link\";\r\nimport CurrencyCell from \"./TableCells/Currency\";\r\nimport { Template } from \"devextreme-react/core/template\";\r\nimport cookie from 'react-cookies';\r\nimport TableFooter from './TableFooter';\r\nimport { fetchPreviewData as fetchPreviewDataAction } from '../storage/thunkActions';\r\nimport { getUserToken } from '../Utils';\r\n// import cloneDeep from 'lodash/cloneDeep';\r\n\r\nimport isEqual from 'lodash/isEqual';\r\nconfig({\r\n  defaultCurrency: 'USD'\r\n});\r\n\r\nclass Table extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    locale('es');\r\n    loadMessages(esMessages);\r\n    this.state = {\r\n      table_columns: [],\r\n      footer_columns: [],\r\n      group_footer_columns: [],\r\n      modules_by_path: {}\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (typeof window[\"oreports_app_table_\" + this.props.app_id] === \"undefined\") {\r\n      window[\"oreports_app_table_\" + this.props.app_id] = this;\r\n    }\r\n\r\n    if (!this.dataGridRef || !this.dataGridRef.instance) {\r\n      return false;\r\n    }\r\n\r\n    this.props.table_filters.forEach(filter => {\r\n      try {\r\n        this.dataGridRef.instance.columnOption(filter[0], \"filterValue\", filter[2]);\r\n      } catch (error) {\r\n        console.log(\"error table_filters\", error);\r\n      }\r\n    });\r\n\r\n    this.getColumns(this.props);\r\n  }\r\n\r\n  // addMenuItems(e) {\r\n  //   if (e.target === 'header') {\r\n  //     // e.items can be undefined\r\n  //     if (!e.items) e.items = [];\r\n\r\n  //     // Add a custom menu item\r\n  //     e.items.push({\r\n  //       text: 'Log Column Caption',\r\n  //       onItemClick: () => {\r\n  //         console.log(e.column.caption, e);\r\n  //       }\r\n  //     });\r\n  //   }\r\n  // }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    if(!isEqual(nextProps.columns, this.props.columns) || !isEqual(nextProps.groups, this.props.groups) || !isEqual(nextProps.report_header_data.module_path, this.props.report_header_data.module_path) || !isEqual(nextProps.report_header_data.selected_class, this.props.report_header_data.selected_class)){\r\n      this.getColumns(nextProps);\r\n    }\r\n  }\r\n\r\n  shouldComponentUpdate(new_props, new_state) {\r\n    if (new_props.loading !== this.props.loading) {\r\n      if (this.dataGridRef && this.dataGridRef.instance) {\r\n        if (new_props.loading) {\r\n          this.dataGridRef.instance.beginCustomLoading(\"Cargando\");\r\n        } else {\r\n          this.dataGridRef.instance.endCustomLoading();\r\n        }\r\n      } \r\n    }\r\n    if (!isEqual(new_props.table_filters, this.props.table_filters)) {\r\n      if (!this.dataGridRef || !this.dataGridRef.instance) {\r\n        return false;\r\n      }\r\n\r\n      new_props.table_filters.forEach(filter => {\r\n        try {\r\n          this.dataGridRef.instance.columnOption(filter[0], \"filterValue\", filter[2]);\r\n        } catch (error) {\r\n          console.log(\"error table_filters\", error);\r\n        }\r\n        //this.dataGridRef.instance.filter([filter]);\r\n\r\n      });\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  onContentReady = (e) => {\r\n    if (!this.dataGridRef || !this.dataGridRef.instance) {\r\n      return;\r\n    }\r\n\r\n    let filterExpr = this.dataGridRef.instance.getCombinedFilter();\r\n    if (!filterExpr) {\r\n      this.props.setChartsData(this.props.preview_data);\r\n      return;\r\n    }\r\n\r\n    const newGridDataSource = new DataSource({\r\n      store: this.props.preview_data,\r\n      paginate: false\r\n    });\r\n\r\n\r\n    if (!newGridDataSource) {\r\n      return;\r\n    }\r\n    newGridDataSource.filter(filterExpr);\r\n    let self = this;\r\n    newGridDataSource.load().done(function (result) {\r\n      self.props.setChartsData(result);\r\n    });\r\n  }\r\n\r\n  getModuleName = async (path, module_path, selected_class) => {\r\n\r\n    let module_name = this.state.modules_by_path[path];\r\n\r\n    if (!module_name){\r\n      return await fetch('/api/BLFlex/GetRelatedModuleByPath/', {\r\n        method: 'POST',\r\n        credentials: \"same-origin\",\r\n        headers: {\r\n          \"Accept\": \"application/json\",\r\n          // \"X-CSRFToken\": cookie.load('csrftoken'),\r\n          \"X-Auth-Token\": getUserToken(),\r\n          'X-Requested-With': 'XMLHttpRequest'\r\n        },\r\n        body: JSON.stringify({\r\n          \"module_path\": module_path,\r\n          \"selected_class\": selected_class,\r\n          \"path\": path,\r\n        })\r\n      }).then(res => {\r\n        return res.json()\r\n      })\r\n        .then(res => {\r\n          // let tmp_dict = cloneDeep(this.state.modules_by_path);\r\n          // tmp_dict[path] = res.module_name;\r\n          // this.setState({\r\n          //   modules_by_path: tmp_dict\r\n          // });\r\n          return res.data.module_name;\r\n        })\r\n        .catch(error => {\r\n          return false;\r\n        });\r\n    }else{\r\n      return module_name;\r\n    }\r\n  }\r\n\r\n  getColumns = async (props) => {\r\n    const { columns, groups } = props;\r\n    const number_types = ['IntegerField', 'number', 'FloatField', 'CurrencyField', 'DecimalField'];\r\n\r\n    const all_columns = columns.concat(groups);\r\n    \r\n\r\n    let table_columns = [];\r\n    let footer_columns = [];\r\n    let group_footer_columns = [];\r\n    for (let index = 0; index < all_columns.length; index++) {\r\n      const column = all_columns[index];\r\n      let column_props = {\r\n        minWidth: 200,\r\n        dataField: column.key_name,\r\n        caption: column.label\r\n      }\r\n\r\n      if (number_types.indexOf(column['type']) > -1) {\r\n        column_props['dataType'] = 'number';\r\n      }\r\n\r\n      if (column[\"type\"] === 'CurrencyField') {\r\n        column_props[\"cellTemplate\"] = \"currencyCell\";\r\n      } else if (column[\"type\"] === 'FloatField') {\r\n        column_props['format'] = { type: 'fixedPoint', precision: 2 };\r\n      }else if (column[\"type\"] === 'DecimalField') {\r\n        column_props['format'] = { type: 'fixedPoint', precision: column.decimal_places || 2 };\r\n      }else if (column[\"type\"] === 'DateTimeField') {\r\n        column_props['dataType'] = \"datetime\";\r\n      } else if (column[\"type\"] === 'DateField') {\r\n        column_props['dataType'] = \"date\";\r\n      }\r\n\r\n      if(column['isSorter']){\r\n        //column_props['defaultSortIndex']=1;\r\n        //column_props['defaultSortOrder']=\"asc\";\r\n        column_props['sortIndex']=1;\r\n        column_props['sortOrder']=column['sortType'] || \"asc\";\r\n      }\r\n      \r\n\r\n      let group_index = groups.findIndex((item) => item.key_name === column.key_name);\r\n\r\n      if (((column[\"link\"] && typeof column[\"link\"] === \"boolean\") || column[\"link\"] === 'True') && group_index === -1) { //Retrocompatibilidad, así se guarda en el OReports desde tiempos inmemoriales\r\n        column_props[\"related_module_name\"] = await this.getModuleName(column[\"path\"], props.report_header_data.module_path, props.report_header_data.selected_class);\r\n        column_props[\"cellTemplate\"] = \"linkCell\";\r\n      }\r\n\r\n      if (group_index > -1) {\r\n        column_props[\"groupIndex\"] = group_index;\r\n        column_props[\"cellTemplate\"] = undefined;\r\n      }\r\n      \r\n      table_columns.push(column_props);\r\n\r\n      if (column.aggregate) {  //Retrocompatibilidad, así se guarda en el OReports desde tiempos inmemoriales\r\n        let customizeText = undefined;\r\n        if (column[\"type\"] === 'CurrencyField' && column.aggregate !== 'count'){\r\n          customizeText = (obj_data) => {\r\n            let data = obj_data.value;\r\n            if(data || data === 0){\r\n                data = \"$ \" + data.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n            }\r\n            try {\r\n              let ret = obj_data.valueText.replace(obj_data.value, data);\r\n              return ret;\r\n            } catch (error) {}\r\n            \r\n            return data;\r\n          }\r\n        }\r\n        if (groups.length > 0) {\r\n          group_footer_columns.push(<GroupItem\r\n            key={\"footer_group_\" + column.key_name}\r\n            column={column.key_name}\r\n            showInGroupFooter={false}\r\n            alignByColumn={true}\r\n            summaryType={column.aggregate}\r\n            valueFormat={column_props.format}\r\n            customizeText={customizeText}/>);\r\n        }\r\n        footer_columns.push(<TotalItem\r\n          key={\"footer_\" + column.key_name}\r\n          column={column.key_name}\r\n          showInColumn={true}\r\n          summaryType={column.aggregate}\r\n          valueFormat={column_props.format}\r\n          customizeText={customizeText} />);\r\n      }\r\n    }\r\n    this.setState({\r\n      table_columns,\r\n      footer_columns,\r\n      group_footer_columns\r\n    });\r\n  }\r\n\r\n\r\n  onOptionChanged = async(e) => {\r\n    if(e.fullName.endsWith(\"ortOrder\")) {  \r\n      \r\n      try {\r\n        let getIndex = e.fullName.split(']')[0].substr(-1)  \r\n        const col = this.props.columns[getIndex] || null;\r\n\r\n        if(col){\r\n          const values = {isSorter: true, sortType: e.value}\r\n          this.props.setSortColumns(col, values);\r\n        }\r\n      } catch (error) {\r\n        console.log('error=> ',error);\r\n        \r\n      }\r\n    }\r\n  }\r\n\r\n  \r\n\r\n\r\n  render() {\r\n    const { table_columns, footer_columns, group_footer_columns } = this.state;\r\n    const { preview_data } = this.props;\r\n    return (\r\n      <div className={\"table-container\" + (this.props.hidden ? ' hidden' : '')}>\r\n        <DataGrid\r\n          elementAttr={{\r\n            id: 'tableContainer'\r\n          }}\r\n          ref={(c) => this.dataGridRef = c}\r\n          columns={table_columns}\r\n          dataSource={new DataSource({\r\n            store: preview_data,\r\n            paginate: false\r\n          })}\r\n          onOptionChanged={this.onOptionChanged}\r\n          allowColumnReordering={false}\r\n          showBorders={false}\r\n          rowAlternationEnabled={true}\r\n          //onContextMenuPreparing={this.addMenuItems}\r\n          columnAutoWidth={true}\r\n          onContentReady={this.onContentReady}\r\n          wordWrapEnabled={true}\r\n        >\r\n          <Sorting mode=\"single\"/>\r\n          <Template name={\"linkCell\"} render={LinkCell} >\r\n          </Template>\r\n          <Template name={\"currencyCell\"} render={CurrencyCell} >\r\n          </Template>\r\n          <FilterRow visible={true} />\r\n          <HeaderFilter visible={true} />\r\n          <Scrolling mode=\"virtual\" />\r\n          <Selection mode=\"single\" />\r\n          {preview_data.length > 0 ?\r\n            <Summary>\r\n              {footer_columns}\r\n              {group_footer_columns}\r\n            </Summary> : null}\r\n        </DataGrid>\r\n        <TableFooter />\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'columns': state.general.columns,\r\n    'groups': state.general.groups,\r\n    'preview_data': state.general.preview_data,\r\n    'loading': state.general.loading,\r\n    'is_create_edit': state.general.is_create_edit,\r\n    'table_filters': state.general.table_filters,\r\n    'app_id': state.general.app_id,\r\n    'report_header_data': state.general.report_header_data,\r\n  };\r\n};\r\n\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    'setChartsData': (data) => {\r\n      dispatch(setChartsData(data));\r\n      \r\n    },\r\n    'setSortColumns': async(col,values) => {\r\n      await dispatch(setSortColumns(col,values));\r\n      dispatch(fetchPreviewDataAction());\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Table);","import React, { Component } from 'react';\r\nimport Select from 'react-select';\r\nimport { connect } from 'react-redux'\r\nimport { setIsOpenModalFormula, setModeModalFormula, setIndexModalFormula, setEditModeDataModalFormula } from '../../../storage/actions'\r\nimport { Form, FormGroup, Input, Label, Badge } from 'reactstrap';\r\n\r\nimport {\r\n\tcloneDeep\r\n} from 'lodash'\r\n\r\nimport {\r\n\temptyDesciptionObj\r\n} from '../../../constants'\r\n\r\nconst column_options = [\r\n    { value: \"count\", label: \"Contar\" },\r\n    { value: \"sum\", label: \"Sumar\" },\r\n    { value: \"avg\", label: \"Promedio\" },\r\n    { value: \"max\", label: \"Maximo\" },\r\n    { value: \"min\", label: \"Mínimo\" }\r\n]\r\n\r\nexport class FieldOptions extends Component {\r\n    render() {\r\n        const { onHandleChange, field, isCreateEdit } = this.props;\r\n        return (<Form>\r\n            <FormGroup>\r\n                <Label for=\"module\">Módulo</Label>\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"module\" disabled value={field.path} />\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Label for=\"name\">Campo</Label>\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"name\" disabled value={field.name} />\r\n            </FormGroup>\r\n            { field.customFn ? <FormGroup>\r\n                <Label for=\"name\">Fórmula</Label>{isCreateEdit ? <Badge color=\"secondary\" className=\"edit-function-bagged-popover\" onClick={ async (e) => {\r\n                    this.props.dispatchSetModeModalFormula('edit')\r\n                    this.props.dispatchSetIndexModalFormula(this.props.index)\r\n                    this.props.dispatchSetEditModeDataModalFormula({\r\n                        label: field.label,\r\n                        name: field.name,\r\n                        formula: field.formula,\r\n                        description: cloneDeep(emptyDesciptionObj),\r\n                        section: 'columns',\r\n                    })\r\n                    document.getElementsByClassName(\"popover show bs-popover-auto\")[0].parentNode.classList.toggle(\"hidden\")\r\n                    this.props.dispatchSetIsOpen(true)\r\n                } }><i className=\"fa fa-edit\" aria-hidden=\"true\"></i></Badge> : null }\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"name\" disabled value={field.formula} />\r\n            </FormGroup> : null }\r\n            <FormGroup>\r\n                <Label for=\"label\">Etiqueta</Label>\r\n                <Input disabled={!isCreateEdit} className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"label\" onChange={(e) => { onHandleChange(\"label\", e.target.value); }} value={field.label} />\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Label for=\"aggregate\">Operación</Label>\r\n                <Select isDisabled={!isCreateEdit} placeholder=\"Seleccione una operación\" options={column_options} onChange={(e) => { onHandleChange(\"aggregate\", e.value); }} value={column_options.find((e) => { return e.value === field.aggregate })} />\r\n            </FormGroup>\r\n            <FormGroup check inline>\r\n                <Label check>\r\n                    Enlace {' '}\r\n                    <Input disabled={!isCreateEdit} type=\"checkbox\" name=\"link\" onChange={(e) => { onHandleChange(\"link\", (e.target.checked ? 'True' : 'False')); }} checked={((field.link && typeof field.link === \"boolean\") || field.link === 'True') ? true : false} />\r\n                </Label>\r\n            </FormGroup>\r\n            {/* <FormGroup check inline>\r\n                <Label check>\r\n                    Totalizar {' '}\r\n                    <Input disabled={!isCreateEdit} type=\"checkbox\" name=\"footer_total\" onChange={(e) => { onHandleChange(\"footer_total\", (e.target.checked ? 'True' : 'False')); }} checked={((field.footer_total && typeof field.footer_total === \"boolean\") || field.footer_total === 'True') ? true : false} />\r\n                </Label>\r\n            </FormGroup> */}\r\n        </Form>);\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n        dispatchSetIsOpen: isOpen => dispatch(setIsOpenModalFormula(isOpen)),\r\n        dispatchSetModeModalFormula: mode => dispatch(setModeModalFormula(mode)),\r\n        dispatchSetIndexModalFormula: index => dispatch(setIndexModalFormula(index)),\r\n        dispatchSetEditModeDataModalFormula: data => dispatch(setEditModeDataModalFormula(data))\r\n\t}\r\n}\r\n\r\nexport default connect(undefined, mapDispatchToProps)(FieldOptions);","import React from 'react';\r\nimport {FormGroup, Label, /* Input */ } from 'reactstrap';\r\n//import Select from 'react-select';\r\n//import 'react-select/dist/react-select.css';\r\nimport {store} from '../../index';\r\nimport cookie from 'react-cookies';\r\nimport {connect} from 'react-redux';\r\n\r\nimport PropTypes from 'prop-types';\r\n//import Async, { makeAsyncSelect } from 'react-select/async';\r\n\r\nimport AsyncSelect from \"react-select/async\";\r\nimport { components } from 'react-select';\r\nimport { updateSectionItem } from '../../storage/actions';\r\nimport { fetchPreviewData as fetchPreviewDataAction } from '../../storage/thunkActions';\r\nimport _ from 'lodash';\r\nimport {getUserToken} from '../../Utils';\r\n\r\n\r\n\r\nlet URL_PREFIX = '';\r\n\r\nconst Option = props => {\r\n    const {labelKey, valueKey} = props.selectProps;\r\n\tlet keysData = Object.keys(props.data).filter(e=>!['id','_str_name'].includes(e));\r\n\r\n\tconst valuesData = [];\r\n\tconst id = props.data[valueKey];\r\n    keysData.forEach((k,i)=>{ \r\n        const labelFld = props.data[k]['str'];\r\n\t\tconst valFld = props.data[k]['val'];\r\n\t\t\r\n\t\tvaluesData.push(<small key={labelFld+'_opt_'+i+'_'+id}><strong>{labelFld}</strong>:{valFld}</small>)\r\n\t\tif(i<keysData.length)valuesData.push(<br key={\"br_opt_\"+i+'_'+id} />)\r\n    }) \r\n\r\n\r\n    return (\r\n        <components.Option {...props} key={props.data.id} >\r\n            {props.data[labelKey]}<br/>\r\n            {valuesData}\r\n        </components.Option>\r\n    )}; \r\n\r\n\r\nconst customStyles = {\r\n\tindicatorSeparator: base => ({\r\n\t\t...base,\r\n\t\tdisplay: 'none'\r\n\t}),\r\n\t/* dropdownIndicator: base => ({\r\n\t\t...base,\r\n\t\tdisplay: 'none'\r\n\t}), */\r\n\t\r\n}\r\n\r\n\r\nclass ForeignKey extends React.Component {\r\n    constructor(props){\r\n\t\t\tsuper(props);\r\n\t\t\tconst selected_operator = props.fieldDef ? props.fieldDef.selected_operator : false;\r\n\t\t\tthis.operatorMulti = ['fk_in','fk_not_in'];\r\n\t\t\tthis.state = {\r\n\t\t\t\t//valid: ((props.storeValue === \"\" || !Boolean(props.storeValue.id)) && this.props.fieldDef.required) ? false : true,\r\n\t\t\t\tmsg: \"\",\r\n\t\t\t\tvalue: props.storeValue || '',\r\n\t\t\t\tlabelKey:\"_str_name\",\r\n\t\t\t\tvalueKey:\"id\",\r\n\t\t\t\tisMulti :this.operatorMulti.includes(selected_operator),\r\n\t\t\t\t\r\n\t\t\t};\r\n\t\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t\t\tthis.getOptions = this.getOptions.bind(this);\r\n\t\t\t\r\n\t}\r\n\t\r\n\tcomponentDidMount(){\r\n\t\tlet altThis= this;\r\n\t\t\r\n\t\twindow.addEventListener('message', function(event){\r\n\t\t\ttry{\r\n\t\t\t\tlet data = JSON.parse(event.data);\r\n\t\t\t\tif(data.fieldId === altThis.props.fieldDef.name){\r\n\t\t\t\t\tlet valueEvent = data.value;\r\n\t\t\t\t\tlet newValue =  _.cloneDeep(altThis.state.value);\r\n\t\t\t\t\tif(altThis.state.isMulti){\r\n\t\t\t\t\t\tif(!newValue || newValue.length===0)newValue=[];\r\n\t\t\t\t\t\tlet finded = newValue.find(e=>e[altThis.state.valueKey] === valueEvent[altThis.state.valueKey])\r\n\t\t\t\t\t\tif(!finded)newValue.push(valueEvent);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tnewValue = valueEvent;\r\n\t\t\t\t\t}\r\n\t\t\t\t\taltThis.handleChange(newValue);\r\n\t\t\t\t}\r\n\t\t\t}catch(error){\r\n\t\t\t\t//console.log('addEventListener=> ',error);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps){\r\n\t\tconst isMulti = this.operatorMulti.includes(nextProps.selected_operator);\r\n\t\tif(this.state.isMulti !== isMulti){\r\n\t\t\tlet stateValue = this.state.value;\r\n\t\t\tlet newValue = [];\r\n\t\t\tif(stateValue && _.isArray(stateValue) && stateValue.length>0 && !isMulti)newValue=stateValue[0];\r\n\t\t\tif(isMulti && stateValue)newValue.push(stateValue)\r\n\t\t\t\r\n\t\t\tthis.setState({isMulti},()=>{\r\n\t\t\t\tthis.handleChange(newValue);\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\t/* let newValue = nextProps.storeValue;\r\n\t\tlet val = {id:'', _str_name:''};\r\n\t\tif(newValue){\r\n\t\t\tval.id = newValue.id;\r\n\t\t\tval._str_name = newValue._str_name;\r\n\t\t}\r\n\t\tthis.setState({value:newValue});\r\n\t\t\r\n\t\tif (newValue && newValue !== this.state.value) {\r\n\t\t\tif(this.props.fieldDef.required && !Boolean(val.id)){\r\n\t\t\t\tthis.setState({valid: false});\r\n\t\t\t}else if(!this.state.valid){\r\n\t\t\t\tthis.setState({valid: true});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} */\r\n\t}\r\n\r\n\r\n    \r\n    handleChange(newValue){\r\n\t\tthis.setState({value: newValue},()=>{\r\n\t\t\tthis.props.updateSectionItem(this.props.storeSection, this.props.index, this.props.property, newValue )\r\n\t\t})\r\n    }\r\n\r\n    getOptions = (input: string) => {\r\n        if (!input || input.length <= 3) {\r\n\t\t\treturn Promise.resolve([]);\r\n\t\t}\r\n        return fetch(URL_PREFIX + '/search_records_rel_select/' + this.props.fieldDef.module_name + '/', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tcredentials: \"same-origin\",\r\n            headers: {\r\n\t\t\t\t\"Accept\": \"application/json\",\r\n                //\"X-CSRFToken\": cookie.load('csrftoken'),\r\n\t\t\t\t\"X-Auth-Token\": getUserToken(),\r\n\t\t\t\t'X-Requested-With': 'XMLHttpRequest'\r\n\t\t\t\t\r\n            },\r\n\t\t\tbody: JSON.stringify({'keyword': input, agent: 'react-coreapp', 'store': store.getState() })})\r\n          .then((response) => {\r\n            return response.json();\r\n          }).then((json) => {\r\n            return json ;\r\n          });\r\n      };\r\n\r\n\r\n\r\n    promiseOptions = inputValue =>\r\n        new Promise(resolve => {\r\n            setTimeout(() => {\r\n            resolve(this.getOptions(inputValue));\r\n        }, 1000);\r\n\t});\r\n\t\r\n\r\n\t  \r\n\trenderOption(optionvalue) {\r\n        let data = [];\r\n        for (let key in optionvalue) {\r\n            if (!['id','_str_name'].includes(key)) {\r\n                data.push( <span key={key}> <b> {optionvalue[key]['str']}:</b>{optionvalue[key]['val']}<br/> </span>);\r\n            }\r\n        }\r\n        return ( <div> {data} </div>);\r\n\t}\r\n\t\r\n\r\n    renderValue(newValue){\r\n        return <div>{newValue._str_name}</div>\r\n\t}\r\n\t\r\n\r\n\r\n    hackFilterOptions(options, filterString, values){\r\n        /** Por defecto el componente react-select busca sobre los resultados del servidor, el problema es que lo hace solo en el 'label' */\r\n        return options;\r\n    }\r\n\t\r\n\t\r\n\topenWindowSearch= () => {\r\n\t\tlet fieldName = (this.props.fieldDef.name) ? this.props.fieldDef.name : \"\";\r\n\t\tlet url_search_window = URL_PREFIX + \"/\" +  this.props.fieldDef.module_name + \"/popup_index/?fieldId=\" + fieldName;\r\n\t\twindow.open(url_search_window, 'popup', 'width=800,height=600,left=10,top=10')\r\n\t}\r\n\r\n\r\n\tnoOptionsMessage = () => {\r\n\t\treturn \"No hay Registros\"\r\n\t}\r\n\r\n\tdropdownIndicator = (innerProps, innerRef) => {\r\n\t\tlet isDisabled = this.props.isDisabled ? true : false;\t\r\n\t\treturn (\r\n\t\t\t<div className={\"\"}>\r\n\t\t\t\t<button type=\"button\" disabled={isDisabled} className={\"btn btn-transparent\"} \r\n\t\t\t\t\tonClick={this.openWindowSearch}>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<i className={\"fa fa-search\"} ></i>\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\t\r\n\trender(){\r\n\t\tlet fieldName = (this.props.fieldDef.name) ? this.props.fieldDef.name : \"\";\r\n\t\tlet fieldClass = (this.props.fieldDef.class) ? this.props.fieldDef.class : \"\";\r\n\t\tlet fieldLabel = (this.props.fieldDef.label) ? this.props.fieldDef.label : \"\";\r\n\t\tlet printLabel = (this.props.fieldDef.printLabel) ? this.props.fieldDef.printLabel : true;\t\t\r\n\t\tlet fieldId = 'id_' + fieldName;\r\n\t\tlet fieldPlaceHolder = this.props.fieldDef.placeHolder ? this.props.fieldDef.placeHolder : '';\r\n\t\tlet pure_field = this.props.pureField ? true : false;\r\n\t\tlet isDisabled = this.props.isDisabled ? true : false;\t\r\n\t\tconst {isMulti} = this.state;\r\n\r\n\t\tlet field_jsx = (\r\n\r\n\t\t\t\t\t\t<div \r\n\t\t\t\t\t\t\t/* className={classRequired+\" \"+classTooltip + \" row no-gutters\"} title={tooltip} */\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<AsyncSelect \r\n\t\t\t\t\t\t\t\tisMulti={isMulti}\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n                                loadOptions={this.promiseOptions}\r\n                                cacheOptions \r\n                                isClearable\r\n                                \r\n                                disabled={isDisabled} \r\n                                filterOptions={this.hackFilterOptions} \r\n                                autoload={false} \r\n                                //ref='dmesa' \r\n                                labelKey={this.state.labelKey} \r\n                                valueKey={this.state.valueKey}\r\n\t\t\t\t\t\t\t\tcomponents={{Option,DropdownIndicator: this.dropdownIndicator }}\r\n\t\t\t\t\t\t\t\tdropdownIndicator = {this.dropdownIndicator}\r\n\t\t\t\t\t\t\t\t//formatOptionLabel={this.renderOption}\r\n\t\t\t\t\t\t\t\tgetOptionLabel={(option)=>{\r\n\t\t\t\t\t\t\t\t\treturn option[this.state.labelKey] || '';\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tgetOptionValue={opt => opt[this.state.valueKey]}\r\n\t\t\t\t\t\t\t\tisDisabled={isDisabled}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t//menuPosition=\"fixed\"\r\n\t\t\t\t\t\t\t\t//menuShouldBlockScroll={true}\r\n\t\t\t\t\t\t\t\t//closeMenuOnScroll={false}\r\n\t\t\t\t\t\t\t\t//menuIsOpen={true}\r\n\t\t\t\t\t\t\t\t//inputValue=\"_str_name\"\r\n\t\t\t\t\t\t\t\tnoOptionsMessage={this.noOptionsMessage}\r\n                                name={fieldName}  \r\n                                ignoreAccents={false} \r\n                                id={fieldId} \r\n                                placeholder={fieldPlaceHolder} \r\n                                value={this.state.value} \r\n                                className={fieldClass + \" col  clearIndicator\"} \r\n\t\t\t\t\t\t\t\t//onChange={(option) => this.handleChange(option)}\r\n\t\t\t\t\t\t\t\tonChange={this.handleChange}\r\n                                \r\n                                //resetValue={deleteValue} \r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{/* <Input type='hidden' name={fieldName} id={fieldId} value={(this.props.storeValue['id']) ? this.props.storeValue['id']: '' } /> */}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\tif(pure_field){\r\n\t\t\treturn field_jsx;\r\n\t\t}else return (\r\n\t\t\t<FormGroup>\r\n\t\t\t\t<Label for={fieldId}>{printLabel ? fieldLabel : ''}</Label>\r\n\t\t\t\t{field_jsx}\r\n\t\t\t</FormGroup>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nForeignKey.propTypes = {\r\n    fieldDef: PropTypes.object.isRequired,\r\n    //onChangePage: PropTypes.func.isRequired,\r\n    //initialPage: PropTypes.number\r\n};\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {};\r\n};\r\n  \r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n\t\t'updateSectionItem': async (section, index, property, value) => {\r\n\t\t\tawait dispatch(updateSectionItem(section, index, property, value));\r\n\t\t\tdispatch(fetchPreviewDataAction());\r\n\t\t}\r\n\t}  \r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ForeignKey);\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport Select from 'react-select';\r\nimport { Form, FormGroup, Input, Label } from 'reactstrap';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport moment from 'moment';\r\nimport { isValidDate } from '../../../Utils';\r\nimport ForeignKey from '../../Fields/ForeignKey';\r\n\r\nconst boolean_options = [\r\n    { value: \"False\", label: \"No\" },\r\n    { value: \"True\", label: \"Si\" },\r\n]\r\nconst date_fields_to = ['between'];\r\nconst date_fields_from_type_date = ['equal', 'not_equal', 'before', 'after', 'between'];\r\nconst date_fields_from_type_input = ['last_n_days', 'next_n_days'];\r\n\r\n\r\n\r\nexport class FieldOptions extends Component {\r\n    render() {\r\n        const { onHandleChange, field, isCreateEdit, section, index } = this.props;\r\n        let filter_options = field.filter_options ? field.filter_options.map(x => { x[\"value\"] = x[\"key\"]; return x }) : [];\r\n        let equal_from = null;\r\n        let to = null;\r\n        let filter_disabled = !isCreateEdit && (!field.allow_edit || field.allow_edit === 'False');\r\n\r\n        const default_from_component = (<FormGroup>\r\n            <Label for=\"equal_from\">Igual/Desde</Label>\r\n            <Input disabled={filter_disabled} className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"equal_from\" onChange={(e) => { onHandleChange(\"equal_from\", e.target.value); }} value={field.equal_from} />\r\n        </FormGroup>);\r\n\r\n        const default_to_component = (<FormGroup>\r\n            <Label for=\"equal_from\">Hasta</Label>\r\n            <Input disabled={filter_disabled} className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"to\" onChange={(e) => { onHandleChange(\"to\", e.target.value); }} value={field.to} />\r\n        </FormGroup>);\r\n    \r\n        if (field.type === 'DateField' || field.type === 'DateTimeField') {\r\n\r\n            if (date_fields_from_type_date.indexOf(field.selected_operator) > -1) {\r\n                let date_value = null;\r\n                try {\r\n                    if (field.equal_from) {\r\n                        if (isValidDate(field.equal_from)) {\r\n                            date_value = field.equal_from;\r\n                        } else {\r\n                            date_value = moment(field.equal_from).toDate();\r\n                        }\r\n                    }\r\n\r\n                } catch (error) { };\r\n\r\n                if (field.type === 'DateField') {\r\n                    equal_from = (<FormGroup>\r\n                        <Label for=\"equal_from\">Igual/Desde</Label><br></br>\r\n\r\n                        <DatePicker\r\n                            selected={date_value}\r\n                            onChange={(e) => { onHandleChange(\"equal_from\", e); }}\r\n                            dateFormat=\"dd/MM/yyyy\"\r\n                            className=\"form-control\"\r\n                            isClearable={true}\r\n                            disabled={filter_disabled}\r\n                        />\r\n                    </FormGroup>);\r\n                } else {\r\n                    equal_from = (<FormGroup>\r\n                        <Label for=\"equal_from\">Igual/Desde</Label><br></br>\r\n\r\n                        <DatePicker\r\n                            selected={date_value}\r\n                            onChange={(e) => { onHandleChange(\"equal_from\", e); }}\r\n                            showTimeSelect\r\n                            timeFormat=\"HH:mm\"\r\n                            timeIntervals={15}\r\n                            dateFormat=\"dd/MM/yyyy HH:mm\"\r\n                            //locale=\"es\"\r\n                            timeCaption=\"time\"\r\n\r\n                            className=\"form-control\"\r\n                            isClearable={true}\r\n                            disabled={filter_disabled}\r\n\r\n                        />\r\n                    </FormGroup>);\r\n                }\r\n\r\n                if (date_fields_to.indexOf(field.selected_operator) > -1) {\r\n                    let date_value_to = null;\r\n                    try {\r\n                        if (field.to) {\r\n                            if (isValidDate(field.to)) {\r\n                                date_value_to = field.to;\r\n                            } else {\r\n                                date_value_to = moment(field.to).toDate();\r\n                            }\r\n                        }\r\n\r\n                    } catch (error) { };\r\n\r\n                    if (field.type === 'DateField') {\r\n                        to = (<FormGroup>\r\n                            <Label for=\"to\">Hasta</Label><br></br>\r\n\r\n                            <DatePicker\r\n                                selected={date_value_to}\r\n                                onChange={(e) => { onHandleChange(\"to\", e); }}\r\n                                dateFormat=\"dd/MM/yyyy\"\r\n                                className=\"form-control\"\r\n                                isClearable={true}\r\n                                disabled={filter_disabled}\r\n                            />\r\n                        </FormGroup>);\r\n                    } else {\r\n                        to = (<FormGroup>\r\n                            <Label for=\"to\">Hasta</Label><br></br>\r\n\r\n                            <DatePicker\r\n                                selected={date_value_to}\r\n                                onChange={(e) => { onHandleChange(\"to\", e); }}\r\n                                showTimeSelect\r\n                                timeFormat=\"HH:mm\"\r\n                                timeIntervals={15}\r\n                                dateFormat=\"dd/MM/yyyy HH:mm\"\r\n                                //locale=\"es\"\r\n                                timeCaption=\"time\"\r\n\r\n                                className=\"form-control\"\r\n                                isClearable={true}\r\n                                disabled={filter_disabled}\r\n                            />\r\n                        </FormGroup>);\r\n                    }\r\n                }\r\n            } else if (date_fields_from_type_input.indexOf(field.selected_operator) > -1) {\r\n                equal_from = (<FormGroup>\r\n                    <Label for=\"equal_from\">Igual/Desde</Label><br></br>\r\n                    <Input disabled={filter_disabled} className=\"input-sm\" bsSize=\"sm\" type=\"number\" name=\"equal_from\" onChange={(e) => { onHandleChange(\"equal_from\", e.target.value); }} value={field.equal_from} />\r\n                </FormGroup>);\r\n            }\r\n        } else if (field.type === 'BooleanField') {\r\n            if (!['fk_not_in', 'fk_in', 'null_or_empty', 'not_empty', 'empty', 'current_user_code', 'current_record'].includes(field.selected_operator)) {\r\n                equal_from = (<FormGroup>\r\n                    <Label for=\"equal_from\">Igual/Desde</Label>\r\n                    <Select isDisabled={filter_disabled} isMulti name=\"equal_from\" options={boolean_options} onChange={(items) => { onHandleChange('equal_from', (items ? items.map((item) => { return item.value }) : [])) }} value={(typeof field.equal_from !== \"undefined\" ? boolean_options.filter((item) => { return field.equal_from.indexOf(item.value) !== -1 }) : null)} />\r\n                </FormGroup>);\r\n            }\r\n        } else if (field.choices && ['CharField', 'SelectField', 'MultiSelectField'].includes(field.type)) {\r\n\r\n            if (!['fk_not_in', 'fk_in', 'null_or_empty', 'not_empty', 'empty', 'current_user_code', 'current_record'].includes(field.selected_operator)) {\r\n                let choices = field.choices ? field.choices.map(x => { return { value: x[0], label: x[1] } }) : [];\r\n                equal_from = (<FormGroup>\r\n                    <Label for=\"equal_from\">Igual/Desde</Label>\r\n                    <Select isDisabled={filter_disabled} isMulti name=\"equal_from\" options={choices} onChange={(items) => { onHandleChange('equal_from', (items ? items.map((item) => { return item.value }) : [])) }} value={(typeof field.equal_from !== \"undefined\" ? choices.filter((item) => { return field.equal_from.indexOf(item.value) !== -1 }) : null)} />\r\n                </FormGroup>);\r\n            }\r\n\r\n        } else if (field.type === 'ForeignKey') {\r\n            if (['not_equal', 'equal', 'fk_in', 'fk_not_in'].includes(field.selected_operator)) {\r\n                const storeValue = field.equal_from;\r\n                equal_from =\r\n                    (<ForeignKey\r\n                        fieldDef={field}\r\n                        storeSection={section}\r\n                        property=\"equal_from\"\r\n                        index={index}\r\n                        name={field.name}\r\n                        storeValue={storeValue}\r\n                        selected_operator={field.selected_operator}\r\n                        onChange={(e) => { onHandleChange(\"equal_from\", e.target.value); }}\r\n                        isDisabled={filter_disabled}\r\n\r\n                    />)\r\n            } else if (!['null_or_empty', 'not_empty', 'empty', 'current_user_code', 'current_record', 'current_user'].includes(field.selected_operator)) {\r\n                equal_from = default_from_component;\r\n            }\r\n        } else {\r\n            //CharField, TextField, FloatField, CurrencyField, IntergerField, DecimalField, EmailField, SmallIntergerField, ImageField, Filefield\r\n            if (!['fk_not_in', 'fk_in', 'null_or_empty', 'not_empty', 'empty', 'current_user_code', 'current_record'].includes(field.selected_operator)) {\r\n                equal_from = default_from_component;\r\n            }\r\n            if (field.selected_operator === 'between') {\r\n                to = default_to_component;\r\n            }\r\n        }\r\n        return (<Form>\r\n            <FormGroup>\r\n                <Label for=\"module\">Módulo</Label>\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"module\" disabled value={field.path} />\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Label for=\"name\">Campo</Label>\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"name\" disabled value={field.name} />\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Label for=\"label\">Etiqueta</Label>\r\n                <Input disabled={!isCreateEdit} className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"label\" onChange={(e) => { onHandleChange(\"label\", e.target.value); }} value={field.label} />\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Label for=\"type\">Tipo</Label>\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"type\" disabled value={field.type} />\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Label for=\"aggregate\">Operador</Label>\r\n                <Select isDisabled={filter_disabled} options={filter_options} onChange={(e) => { onHandleChange(\"selected_operator\", e.value); }} value={filter_options.find((e) => { return e.value === field.selected_operator })} />\r\n            </FormGroup>\r\n            {field.selected_operator ? equal_from : null}\r\n            {field.selected_operator ? to : null}\r\n            <FormGroup check inline>\r\n                <Label check>\r\n                    Editable {' '}\r\n                    <Input disabled={!isCreateEdit} type=\"checkbox\" name=\"allow_edit\" onChange={(e) => { onHandleChange(\"allow_edit\", (e.target.checked ? 'True' : 'False')); }} checked={((field.allow_edit && typeof field.allow_edit === \"boolean\") || field.allow_edit === 'True') ? true : false} />\r\n                </Label>\r\n            </FormGroup>\r\n        </Form>);\r\n    }\r\n}\r\n\r\nexport default FieldOptions;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { setIsOpenModalFormula, setModeModalFormula, setIndexModalFormula, setEditModeDataModalFormula } from '../../../storage/actions'\r\nimport { Form, FormGroup, Input, Label, Badge } from 'reactstrap';\r\n\r\nimport {\r\n\tcloneDeep\r\n} from 'lodash'\r\n\r\nimport {\r\n\temptyDesciptionObj\r\n} from '../../../constants'\r\n\r\nexport class FieldOptions extends Component {\r\n    render() {\r\n        const { onHandleChange, field, isCreateEdit } = this.props;\r\n        return (<Form>\r\n            <FormGroup>\r\n                <Label for=\"module\">Módulo</Label>\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"module\" disabled value={field.path} />\r\n            </FormGroup>\r\n            <FormGroup>\r\n                <Label for=\"name\">Campo</Label>\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"name\" disabled value={field.name} />\r\n            </FormGroup>\r\n            { field.customFn ? <FormGroup>\r\n                <Label for=\"name\">Fórmula</Label>{isCreateEdit ? <Badge color=\"secondary\" className=\"edit-function-bagged-popover\" onClick={ async (e) => {\r\n                    this.props.dispatchSetModeModalFormula('edit')\r\n                    this.props.dispatchSetIndexModalFormula(this.props.index)\r\n                    this.props.dispatchSetEditModeDataModalFormula({\r\n                        label: field.label,\r\n                        name: field.name,\r\n                        formula: field.formula,\r\n                        description: cloneDeep(emptyDesciptionObj),\r\n                        section: 'groups',\r\n                    })\r\n                    document.getElementsByClassName(\"popover show bs-popover-auto\")[0].parentNode.classList.toggle(\"hidden\")\r\n                    this.props.dispatchSetIsOpen(true)\r\n                } }><i className=\"fa fa-edit\" aria-hidden=\"true\"></i></Badge> : null }\r\n                <Input className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"name\" disabled value={field.formula} />\r\n            </FormGroup> : null }\r\n            <FormGroup>\r\n                <Label for=\"label\">Etiqueta</Label>\r\n                <Input disabled={!isCreateEdit} className=\"input-sm\" bsSize=\"sm\" type=\"text\" name=\"label\" onChange={(e) => { onHandleChange(\"label\", e.target.value); }} value={field.label} />\r\n            </FormGroup>\r\n            {/* <FormGroup check inline>\r\n                <Label check>\r\n                    Enlace {' '}\r\n                    <Input type=\"checkbox\" name=\"link\" onChange={(e) => { onHandleChange(\"link\", (e.target.checked ? 'True' : 'False')); }} checked={((field.link && typeof field.link === \"boolean\") || field.link === 'True') ? true : false} />\r\n                </Label>\r\n            </FormGroup> */}\r\n        </Form>);\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n        dispatchSetIsOpen: isOpen => dispatch(setIsOpenModalFormula(isOpen)),\r\n        dispatchSetModeModalFormula: mode => dispatch(setModeModalFormula(mode)),\r\n        dispatchSetIndexModalFormula: index => dispatch(setIndexModalFormula(index)),\r\n        dispatchSetEditModeDataModalFormula: data => dispatch(setEditModeDataModalFormula(data))\r\n\t}\r\n}\r\n\r\nexport default connect(undefined, mapDispatchToProps)(FieldOptions);","import React, { Component } from 'react';\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport { PopoverBody, UncontrolledPopover } from 'reactstrap';\r\nimport FieldOptionsColumns from './FieldOptions/FieldOptionsColumns';\r\nimport FieldOptionsFilters from './FieldOptions/FieldOptionsFilters';\r\nimport FieldOptionsGroups from './FieldOptions/FieldOptionsGroups';\r\n\r\nconst modifiers = {\r\n  preventOverflow: {\r\n    enabled: false,\r\n  },\r\n  hide: {\r\n    enabled: false\r\n  },\r\n  flip: {\r\n    enabled: false,\r\n  },\r\n};\r\n\r\nexport class DraggableField extends Component {\r\n\r\n  render() {\r\n    const { field, onRemove, index, onHandleChange, section, isDragDisabled, isCreateEdit } = this.props;\r\n    let fld_options = null;\r\n    switch (section) {\r\n      case \"groups\":\r\n        fld_options = <FieldOptionsGroups field={field} onHandleChange={onHandleChange} index={index} section={section} isCreateEdit={isCreateEdit} />;\r\n        break;\r\n      case \"filters\":\r\n        fld_options = <FieldOptionsFilters field={field} onHandleChange={onHandleChange} index={index} section={section} isCreateEdit={isCreateEdit} />;\r\n        break;\r\n\r\n      default:\r\n        fld_options = <FieldOptionsColumns field={field} onHandleChange={onHandleChange} index={index} section={section} isCreateEdit={isCreateEdit} />;\r\n        break;\r\n    }\r\n    return (\r\n      <Draggable draggableId={field.key_name + \"_\" + index} index={index} isDragDisabled={isDragDisabled}>\r\n        {(provided, snapshot) => {\r\n          return (\r\n            <div  {...provided.draggableProps}\r\n              {...provided.dragHandleProps}\r\n              ref={provided.innerRef}\r\n              className=\"draggable-field-container\"\r\n            >\r\n              <div id={\"Popover-\" + field.key_name + \"_\" + index} className=\"draggable-field\">\r\n                <span className=\"draggable-field-label\">{field.label}</span>\r\n                {isCreateEdit ? <i className=\"fa fa-times-circle\" aria-hidden=\"true\" onClick={onRemove}></i> : null}\r\n              </div>\r\n              <UncontrolledPopover\r\n                placement=\"right-start\"\r\n                target={\"Popover-\" + field.key_name + \"_\" + index}\r\n                trigger=\"legacy\"\r\n                modifiers={modifiers}\r\n                delay={0}\r\n                fade={false}\r\n              >\r\n                <PopoverBody className={\"oreports-popover\"}>\r\n                  {fld_options}\r\n                </PopoverBody>\r\n              </UncontrolledPopover>\r\n            </div>);\r\n        }}\r\n\r\n      </Draggable>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DraggableField;","import React, { Component } from 'react';\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\nimport { connect } from 'react-redux';\r\nimport Select from 'react-select';\r\nimport { Label, Button } from 'reactstrap';\r\nimport { addField, removeField, updateSectionItem } from '../../storage/actions';\r\nimport { fetchPreviewData as fetchPreviewDataAction } from '../../storage/thunkActions';\r\nimport DraggableField from './DraggableField';\r\n\r\nlet Container = (props) => {\r\n  const { innerref, children } = props;\r\n  const cProps = { ...props };\r\n\r\n  let className = props.className;\r\n  // if (props.dragging) {\r\n  //   className += \" monitor-drop-in-container\";\r\n  // }\r\n\r\n  // if (props.snapshot.isDraggingOver) {\r\n  //   className += \" monitor-current-drop-container\";\r\n  // }\r\n  const bannedProps = ['innerref', 'dragging', 'dispatch', 'snapshot'];\r\n  for (let i of bannedProps) {\r\n    delete cProps[i];\r\n  }\r\n  return (\r\n    <div ref={innerref} {...cProps} className={className}>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport class FieldsContainer extends Component {\r\n  state = {\r\n    selected_option: ''\r\n  }\r\n  render() {\r\n    const { title, notitle, field_list, section, fields, is_create_edit, titleButton } = this.props;\r\n    return (\r\n      <div className=\"fields-main-container\">\r\n        <div className=\"fields-title-container\">\r\n          {!notitle ? <div className=\"fields-title-label-container\"><Label size=\"15\">{title}</Label></div> : null}\r\n          {titleButton ? <div className=\"fields-title-action-container\"><Button className={titleButton.classes} onClick={ titleButton.click } size=\"sm\"><i className={titleButton.classIcon} aria-hidden=\"true\"></i></Button></div> : null}\r\n        </div>\r\n          {is_create_edit ? <Select placeholder=\"Seleccione un campo\" options={field_list} onChange={(e) => { this.props.addField(section, e); }} value={this.state.selected_option} /> : null}\r\n        <Droppable droppableId={section}>\r\n          {(provided, snapshot) => (\r\n\r\n            <Container className={\"fields-container\" + (this.props.dragging ? \" box-bordered\" : \"\")}\r\n              innerref={provided.innerRef}\r\n              {...provided.droppableProps}\r\n              snapshot={snapshot}\r\n            >\r\n              {fields.map((field, index) => (\r\n                <DraggableField isCreateEdit={is_create_edit} isDragDisabled={!is_create_edit} section={section} field={field} index={index} key={field.key_name + \"_\" + index} onRemove={() => { this.props.removeField(section, index) }} onHandleChange={(property, value) => { this.props.updateSectionItem(section, index, property, value) }} />\r\n              ))}\r\n              {provided.placeholder}\r\n            </Container>\r\n          )}\r\n        </Droppable>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'dragging': state.general.dragging,\r\n    'is_create_edit': state.general.is_create_edit\r\n  };\r\n};\r\n\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    'addField': async (section, field) => {\r\n      await dispatch(addField(section, field));\r\n      dispatch(fetchPreviewDataAction());\r\n    },\r\n    'removeField': async (section, index) => {\r\n      await dispatch(removeField(section, index));\r\n      dispatch(fetchPreviewDataAction());\r\n    },\r\n    'updateSectionItem': async (section, index, property, value) => {\r\n      await dispatch(updateSectionItem(section, index, property, value));\r\n      dispatch(fetchPreviewDataAction());\r\n    }\r\n  };\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FieldsContainer);\r\n","import \"ace-builds/src-noconflict/mode-javascript\";\r\nimport langTools from \"ace-builds/src-noconflict/ext-language_tools\";\r\n\r\nimport { formulaDescriptions } from \"../../constants\";\r\n\r\nconst DocCommentHighlightRules = window.ace.acequire(\"ace/mode/doc_comment_highlight_rules\").DocCommentHighlightRules;\r\n\r\nexport function setAutocomplete(functions, props) {\r\n  const staticWordCompleter = {\r\n    getCompletions: function(editor, session, pos, prefix, callback) {\r\n        const wordList = functions.concat(props);\r\n        callback(null, wordList.map(function(word) {\r\n          if (word.examples) {\r\n            return {\r\n              caption: word.name,\r\n              value: word.printFormula(),\r\n              meta: \"Función\",\r\n              obj: word\r\n            };\r\n          } else {\r\n            return {\r\n                caption: word.label,\r\n                value: \"props(\" + word.key_name + \")\",\r\n                meta: \"Columna\"\r\n            };\r\n          }\r\n        }));\r\n    }\r\n  }\r\n  langTools.setCompleters([staticWordCompleter]);\r\n}\r\n\r\nexport class CustomHighlightRules extends window.ace.acequire(\r\n  \"ace/mode/text_highlight_rules\"\r\n).TextHighlightRules {\r\n  constructor() {\r\n    super();\r\n    let keyword_regex = \"\";\r\n    for (let index = 0; index < formulaDescriptions.length; index++) {\r\n      let word = formulaDescriptions[index];\r\n      keyword_regex += word.name + \"|\"\r\n    }\r\n    const keywordMapper = this.createKeywordMapper({\r\n      \"variable.language\":\r\n          \"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|\"  + // Constructors\r\n          \"Namespace|QName|XML|XMLList|\"                                             + // E4X\r\n          \"ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|\"   +\r\n          \"Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|\"                    +\r\n          \"Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|\"   + // Errors\r\n          \"SyntaxError|TypeError|URIError|\"                                          +\r\n          \"decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|\" + // Non-constructor functions\r\n          \"isNaN|parseFloat|parseInt|\"                                               +\r\n          \"JSON|Math|\"                                                               + // Other\r\n          \"this|arguments|prototype|window|document\"                                 , // Pseudo\r\n      \"keyword\":\r\n          \"const|yield|import|get|set|\" +\r\n          \"break|case|catch|continue|default|delete|do|else|finally|for|function|\" +\r\n          \"if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|\" + keyword_regex +\r\n          // invalid or reserved\r\n          \"__parent__|__count__|escape|unescape|with|__proto__|\" +\r\n          \"class|enum|extends|super|export|implements|private|public|interface|package|protected|static\",\r\n      \"storage.type\":\r\n          \"const|let|var|function\",\r\n      \"constant.language\":\r\n          \"null|Infinity|NaN|undefined\",\r\n      \"support.function\":\r\n          \"alert\",\r\n      \"constant.language.boolean\": \"true|false\"\r\n  }, \"identifier\");\r\n  const escapedRe = \"\\\\\\\\(?:x[0-9a-fA-F]{2}|\" + // hex\r\n        \"u[0-9a-fA-F]{4}|\" + // unicode\r\n        \"[0-2][0-7]{0,2}|\" + // oct\r\n        \"3[0-6][0-7]?|\" + // oct\r\n        \"37[0-7]?|\" + // oct\r\n        \"[4-7][0-7]?|\" + //oct\r\n        \".)\";\r\n    const kwBeforeRe = \"case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void\";\r\n    const identifierRe = \"[a-zA-Z\\\\$_\\u00a1-\\uffff][a-zA-Z\\\\d\\\\$_\\u00a1-\\uffff]*\\\\b\";\r\n    this.$rules = {\r\n      \"no_regex\" : [\r\n          {\r\n              token : \"comment\",\r\n              regex : \"\\\\/\\\\/\",\r\n              next : \"line_comment\"\r\n          },\r\n          DocCommentHighlightRules.getStartRule(\"doc-start\"),\r\n          {\r\n              token : \"comment\", // multi line comment\r\n              regex : /\\/\\*/,\r\n              next : \"comment\"\r\n          }, {\r\n              token : \"string\",\r\n              regex : \"'(?=.)\",\r\n              next  : \"qstring\"\r\n          }, {\r\n              token : \"string\",\r\n              regex : '\"(?=.)',\r\n              next  : \"qqstring\"\r\n          }, {\r\n              token : \"constant.numeric\", // hex\r\n              regex : /0[xX][0-9a-fA-F]+\\b/\r\n          }, {\r\n              token : \"constant.numeric\", // float\r\n              regex : /[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b/\r\n          }, {\r\n              // Sound.prototype.play =\r\n              token : [\r\n                  \"storage.type\", \"punctuation.operator\", \"support.function\",\r\n                  \"punctuation.operator\", \"entity.name.function\", \"text\",\"keyword.operator\"\r\n              ],\r\n              regex : \"(\" + identifierRe + \")(\\\\.)(prototype)(\\\\.)(\" + identifierRe +\")(\\\\s*)(=)\",\r\n              next: \"function_arguments\"\r\n          }, {\r\n              // Sound.play = function() {  }\r\n              token : [\r\n                  \"storage.type\", \"punctuation.operator\", \"entity.name.function\", \"text\",\r\n                  \"keyword.operator\", \"text\", \"storage.type\", \"text\", \"paren.lparen\"\r\n              ],\r\n              regex : \"(\" + identifierRe + \")(\\\\.)(\" + identifierRe +\")(\\\\s*)(=)(\\\\s*)(function)(\\\\s*)(\\\\()\",\r\n              next: \"function_arguments\"\r\n          }, {\r\n              // play = function() {  }\r\n              token : [\r\n                  \"entity.name.function\", \"text\", \"keyword.operator\", \"text\", \"storage.type\",\r\n                  \"text\", \"paren.lparen\"\r\n              ],\r\n              regex : \"(\" + identifierRe +\")(\\\\s*)(=)(\\\\s*)(function)(\\\\s*)(\\\\()\",\r\n              next: \"function_arguments\"\r\n          }, {\r\n              // Sound.play = function play() {  }\r\n              token : [\r\n                  \"storage.type\", \"punctuation.operator\", \"entity.name.function\", \"text\",\r\n                  \"keyword.operator\", \"text\",\r\n                  \"storage.type\", \"text\", \"entity.name.function\", \"text\", \"paren.lparen\"\r\n              ],\r\n              regex : \"(\" + identifierRe + \")(\\\\.)(\" + identifierRe +\")(\\\\s*)(=)(\\\\s*)(function)(\\\\s+)(\\\\w+)(\\\\s*)(\\\\()\",\r\n              next: \"function_arguments\"\r\n          }, {\r\n              // function myFunc(arg) { }\r\n              token : [\r\n                  \"storage.type\", \"text\", \"entity.name.function\", \"text\", \"paren.lparen\"\r\n              ],\r\n              regex : \"(function)(\\\\s+)(\" + identifierRe + \")(\\\\s*)(\\\\()\",\r\n              next: \"function_arguments\"\r\n          }, {\r\n              // foobar: function() { }\r\n              token : [\r\n                  \"entity.name.function\", \"text\", \"punctuation.operator\",\r\n                  \"text\", \"storage.type\"\r\n              ],\r\n              regex : \"(\" + identifierRe + \")(\\\\s*)(\\\\s*)(\\\\s*)(\\\\()\",\r\n              next: \"function_arguments\"\r\n          }, {\r\n              // : function() { } (this is for issues with 'foo': function() { })\r\n              token : [\r\n                  \"text\", \"text\", \"storage.type\", \"text\", \"paren.lparen\"\r\n              ],\r\n              regex : \"(:)(\\\\s*)(function)(\\\\s*)(\\\\()\",\r\n              next: \"function_arguments\"\r\n          }, {\r\n              token : \"keyword\",\r\n              regex : \"(?:\" + kwBeforeRe + \")\\\\b\",\r\n              next : \"start\"\r\n          }, {\r\n              token : [\"punctuation.operator\", \"support.function\"],\r\n              regex : /(\\.)(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\\b(?=\\()/\r\n          }, {\r\n              token : [\"punctuation.operator\", \"support.function.dom\"],\r\n              regex : /(\\.)(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\\b(?=\\()/\r\n          }, {\r\n              token : [\"punctuation.operator\", \"support.constant\"],\r\n              regex : /(\\.)(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\\b/\r\n          }, {\r\n              token : [\"support.constant\"],\r\n              regex : /that\\b/\r\n          }, {\r\n              token : [\"storage.type\", \"punctuation.operator\", \"support.function.firebug\"],\r\n              regex : /(console)(\\.)(warn|info|log|error|time|trace|timeEnd|assert)\\b/\r\n          }, {\r\n              token : keywordMapper,\r\n              regex : identifierRe\r\n          }, {\r\n              token : \"keyword.operator\",\r\n              regex : /--|\\+\\+|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|[!$%&*+\\-~\\/^]=?/,\r\n              next  : \"start\"\r\n          }, {\r\n              token : \"punctuation.operator\",\r\n              regex : /[?:,;.]/,\r\n              next  : \"start\"\r\n          }, {\r\n              token : \"paren.lparen\",\r\n              regex : /[\\[({]/,\r\n              next  : \"start\"\r\n          }, {\r\n              token : \"paren.rparen\",\r\n              regex : /[\\])}]/\r\n          }, {\r\n              token: \"comment\",\r\n              regex: /^#!.*$/\r\n          }\r\n      ],\r\n      // regular expressions are only allowed after certain tokens. This\r\n      // makes sure we don't mix up regexps with the divison operator\r\n      \"start\": [\r\n          DocCommentHighlightRules.getStartRule(\"doc-start\"),\r\n          {\r\n              token : \"comment\", // multi line comment\r\n              regex : \"\\\\/\\\\*\",\r\n              next : \"comment_regex_allowed\"\r\n          }, {\r\n              token : \"comment\",\r\n              regex : \"\\\\/\\\\/\",\r\n              next : \"line_comment_regex_allowed\"\r\n          }, {\r\n              token: \"string.regexp\",\r\n              regex: \"\\\\/\",\r\n              next: \"regex\"\r\n          }, {\r\n              token : \"text\",\r\n              regex : \"\\\\s+|^$\",\r\n              next : \"start\"\r\n          }, {\r\n              // immediately return to the start mode without matching\r\n              // anything\r\n              token: \"empty\",\r\n              regex: \"\",\r\n              next: \"no_regex\"\r\n          }\r\n      ],\r\n      \"regex\": [\r\n          {\r\n              // escapes\r\n              token: \"regexp.keyword.operator\",\r\n              regex: \"\\\\\\\\(?:u[\\\\da-fA-F]{4}|x[\\\\da-fA-F]{2}|.)\"\r\n          }, {\r\n              // flag\r\n              token: \"string.regexp\",\r\n              regex: \"/[sxngimy]*\",\r\n              next: \"no_regex\"\r\n          }, {\r\n              // invalid operators\r\n              token : \"invalid\",\r\n              regex: /\\{\\d+\\b,?\\d*\\}[+*]|[+*$^?][+*]|[$^][?]|\\?{3,}/\r\n          }, {\r\n              // operators\r\n              token : \"constant.language.escape\",\r\n              regex: /\\(\\?[:=!]|\\)|\\{\\d+\\b,?\\d*\\}|[+*]\\?|[()$^+*?.]/\r\n          }, {\r\n              token : \"constant.language.delimiter\",\r\n              regex: /\\|/\r\n          }, {\r\n              token: \"constant.language.escape\",\r\n              regex: /\\[\\^?/,\r\n              next: \"regex_character_class\"\r\n          }, {\r\n              token: \"empty\",\r\n              regex: \"$\",\r\n              next: \"no_regex\"\r\n          }, {\r\n              defaultToken: \"string.regexp\"\r\n          }\r\n      ],\r\n      \"regex_character_class\": [\r\n          {\r\n              token: \"regexp.charclass.keyword.operator\",\r\n              regex: \"\\\\\\\\(?:u[\\\\da-fA-F]{4}|x[\\\\da-fA-F]{2}|.)\"\r\n          }, {\r\n              token: \"constant.language.escape\",\r\n              regex: \"]\",\r\n              next: \"regex\"\r\n          }, {\r\n              token: \"constant.language.escape\",\r\n              regex: \"-\"\r\n          }, {\r\n              token: \"empty\",\r\n              regex: \"$\",\r\n              next: \"no_regex\"\r\n          }, {\r\n              defaultToken: \"string.regexp.charachterclass\"\r\n          }\r\n      ],\r\n      \"function_arguments\": [\r\n          {\r\n              token: \"variable.parameter\",\r\n              regex: identifierRe\r\n          }, {\r\n              token: \"punctuation.operator\",\r\n              regex: \"[, ]+\"\r\n          }, {\r\n              token: \"punctuation.operator\",\r\n              regex: \"$\"\r\n          }, {\r\n              token: \"empty\",\r\n              regex: \"\",\r\n              next: \"no_regex\"\r\n          }\r\n      ],\r\n      \"comment_regex_allowed\" : [\r\n          DocCommentHighlightRules.getTagRule(),\r\n          {token : \"comment\", regex : \"\\\\*\\\\/\", next : \"start\"},\r\n          {defaultToken : \"comment\", caseInsensitive: true}\r\n      ],\r\n      \"comment\" : [\r\n          DocCommentHighlightRules.getTagRule(),\r\n          {token : \"comment\", regex : \"\\\\*\\\\/\", next : \"no_regex\"},\r\n          {defaultToken : \"comment\", caseInsensitive: true}\r\n      ],\r\n      \"line_comment_regex_allowed\" : [\r\n          DocCommentHighlightRules.getTagRule(),\r\n          {token : \"comment\", regex : \"$|^\", next : \"start\"},\r\n          {defaultToken : \"comment\", caseInsensitive: true}\r\n      ],\r\n      \"line_comment\" : [\r\n          DocCommentHighlightRules.getTagRule(),\r\n          {token : \"comment\", regex : \"$|^\", next : \"no_regex\"},\r\n          {defaultToken : \"comment\", caseInsensitive: true}\r\n      ],\r\n      \"qqstring\" : [\r\n          {\r\n              token : \"constant.language.escape\",\r\n              regex : escapedRe\r\n          }, {\r\n              token : \"string\",\r\n              regex : \"\\\\\\\\$\",\r\n              next  : \"qqstring\"\r\n          }, {\r\n              token : \"string\",\r\n              regex : '\"|$',\r\n              next  : \"no_regex\"\r\n          }, {\r\n              defaultToken: \"string\"\r\n          }\r\n      ],\r\n      \"qstring\" : [\r\n          {\r\n              token : \"constant.language.escape\",\r\n              regex : escapedRe\r\n          }, {\r\n              token : \"string\",\r\n              regex : \"\\\\\\\\$\",\r\n              next  : \"qstring\"\r\n          }, {\r\n              token : \"string\",\r\n              regex : \"'|$\",\r\n              next  : \"no_regex\"\r\n          }, {\r\n              defaultToken: \"string\"\r\n          }\r\n      ]\r\n  };\r\n\r\n  }\r\n}\r\n\r\nexport class CustomMode extends window.ace.acequire(\"ace/mode/javascript\")\r\n  .Mode {\r\n  constructor() {\r\n    super();\r\n    this.HighlightRules =  CustomHighlightRules;\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { toast } from 'react-toastify'\r\nimport \"ace-builds\";\r\nimport \"ace-builds/src-noconflict/theme-monokai\";\r\nimport \"ace-builds/src-noconflict/ext-language_tools\";\r\nimport AceEditor from \"react-ace\";\r\nimport { CustomMode, setAutocomplete } from \"./Formula/CustomAceBehaveaurt\";\r\nimport Select from 'react-select'\r\nimport { cloneDeep } from 'lodash'\r\n\r\nimport {\r\n\tAlert,\r\n\tButton, \r\n\tCol,\r\n\tFormGroup,\r\n\tInput,\r\n\tLabel,\r\n\tModal,\r\n\tModalHeader,\r\n\tModalBody,\r\n\tModalFooter,\r\n\tRow,\r\n\tBadge\r\n} from 'reactstrap'\r\n\r\nimport { \r\n\tsetIsOpenModalFormula, \r\n\taddField,\r\n\tupdateSectionItem\r\n} from '../storage/actions'\r\n\r\nimport { fetchPreviewData } from '../storage/thunkActions'\r\n\r\nimport { \r\n\tisEmptyObj, \r\n\treduceToObj,\r\n\tgenerateSample,\r\n\tgetType,\r\n\tbuildMeta,\r\n\tformulasLib,\r\n\tgenerateName\r\n } from '../Utils'\r\n\r\nimport {\r\n\tformulaDescriptions,\r\n\temptyDesciptionObj,\r\n\tresetStateFormulaModal\r\n} from '../constants'\r\n\r\nclass FormulaModal extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\t'label': '',\r\n\t\t\t'name': '',\r\n\t\t\t'formula': '',\r\n\t\t\t'description': cloneDeep(emptyDesciptionObj),\r\n\t\t\t'section': 'columns',\r\n\t\t\t'formulaHelper': false,\r\n\t\t\t'formulaDescriptions': formulaDescriptions\r\n\t\t}\r\n\t\tthis.onHandleChange = this.onHandleChange.bind(this)\r\n\t\tthis.addToFormula = this.addToFormula.bind(this)\r\n\t\tthis.onAddField = this.onAddField.bind(this)\r\n\t\tthis.onHandleChangeFn = this.onHandleChangeFn.bind(this)\r\n\t\tthis.isOpen = false;\r\n\t}\r\n\r\n\tcomponentWillReceiveProps(nextProps) {\r\n\t\tif (nextProps.modalFormulaMode === 'edit')  {\r\n\t\t\tthis.setState(cloneDeep(nextProps.modalFormulaEditModeData))\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\t'label': '',\r\n\t\t\t\t'name': '',\r\n\t\t\t\t'formula': '',\r\n\t\t\t\t'description': cloneDeep(emptyDesciptionObj),\r\n\t\t\t\t'section': 'columns'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tonHandleChange(e) {\r\n\t\tconst { target: { name, value } } = e\r\n\t\tthis.setState({ ...this.state, ...{ [name]: value } })\r\n\t}\r\n\t\r\n\tonHandleChangeEditor(e) {\r\n\t\tthis.setState({ ...this.state, ...{ [\"formula\"]: e } })\r\n\t}\r\n\r\n\tonHandleChangeFn(fnOption) {\r\n\t\tif (isEmptyObj(fnOption)) {\r\n\t\t\tthis.setState({...this.state, ...{ description: cloneDeep(emptyDesciptionObj) } })\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.setState(\r\n\t\t\t{\r\n\t\t\t\t...this.state,\r\n\t\t\t\t...{ description: cloneDeep(fnOption) }\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\taddToFormula(field) {\r\n\t\tif (!field) return\r\n\t\tconst { name } = field\r\n\t\tthis.setState({ ...this.state, ...{ formula: `${this.state.formula} props(${name}) ` } })\r\n\t}\r\n\r\n\tonAddField(e) {\r\n\r\n\t\tif (!this.state.label) {\r\n\t\t\ttoast.error('Por favor ingrese un nombre a la columna')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst key_name = generateName(this.state.label)\r\n\r\n\t\tconst columnNames = this.props.columns.map(col => col.key_name).concat(this.props.groups.map(col => col.key_name))\r\n\r\n\t\tif (this.props.modalFormulaMode !== 'edit' && columnNames.indexOf(key_name) !== -1)\r\n\t\t{\r\n\t\t\ttoast.error(`Ya existe llave columna con el valor ${key_name}`)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (!this.state.formula) {\r\n\t\t\ttoast.error('Por favor ingrese una fórmula')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet formulaBuildError = {\r\n\t\t\t'error': false,\r\n\t\t\t'description': ''\r\n\t\t}\r\n\r\n\t\tconst formulaColumns = this.props.columns.filter(col => col.customFn).concat(this.props.groups.filter(col => col.customFn))\r\n\t\tconst regularColumns = this.props.columns.filter(col => !col.customFn).concat(this.props.groups.filter(col => !col.customFn))\r\n\r\n\t\tconst regularColumnsNames = regularColumns.map(col => col.key_name)\r\n\t\tconst calculatedColumnsNames = formulaColumns.map(col => col.key_name)\r\n\t\tconst calculatedColumnsFormulas = formulaColumns\r\n\t\t\t\t\t\t\t\t\t\t\t.map(col => Object.assign({}, { [col.key_name]: col.formula }))\r\n\t\t\t\t\t\t\t\t\t\t\t.reduce(reduceToObj, {})\r\n\r\n\t\tconst normalizeFormula = function (formula, regularColumnsNames, calculatedColumnsNames, calculatedColumnsFormulas) {\r\n\t\t\treturn formula.replace(/props\\((.*?)\\)/g, function (not_use, operand) {\r\n\t\t\t\tif (calculatedColumnsNames.indexOf(operand) === -1) {\r\n\r\n\t\t\t\t\tif(regularColumnsNames.indexOf(operand) !== -1) {\r\n\t\t\t\t\t\tconst typeOperand = regularColumns.find(col => col.key_name === operand).type\r\n\t\t\t\t\t\tconst sample = generateSample(typeOperand)\r\n\t\t\t\t\t\tif (typeOperand === 'CharField' || typeOperand === 'DateTimeField' || typeOperand === 'DateField')  {\r\n\t\t\t\t\t\t\treturn `'${sample}'`\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn sample\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tformulaBuildError.error = true\r\n\t\t\t\t\tformulaBuildError.description = `El operando ${operand} no pertenece a la lista de columnas seleccionadas`\r\n\t\t\t\t\treturn ''\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn `(${normalizeFormula(calculatedColumnsFormulas[operand], regularColumnsNames, calculatedColumnsNames, calculatedColumnsFormulas)})`\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tconst normFormula = normalizeFormula(this.state.formula, regularColumnsNames, calculatedColumnsNames, calculatedColumnsFormulas)\r\n\r\n\t\tif (formulaBuildError.error) {\r\n\t\t\ttoast.error(`Formula invalida: ${normFormula}`)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t//Evaluar la formula\r\n\t\tlet resultFormula = undefined\r\n\t\ttry {\r\n\t\t\tresultFormula = (\r\n\t\t\t\tnew Function(...Object.keys(formulasLib), `try {\r\n\t\t\t\t\treturn ${normFormula}\r\n\t\t\t\t} catch (err)  {\r\n\t\t\t\t\treturn err\r\n\t\t\t\t}`)\r\n\t\t\t)(...Object.values(formulasLib))\r\n\t\t} catch (err)  {\r\n\t\t\ttoast.error('Se produjo un error al evaluar la fórmula')\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (resultFormula instanceof Error) {\r\n\t\t\ttoast.error(resultFormula.message)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tlet resultType\r\n\r\n\t\tif (normFormula.indexOf('changeFormat') !== -1) {\r\n\t\t\tresultType = 'CharField'\r\n\t\t} else {\r\n\t\t\tresultType = getType(resultFormula)\r\n\t\t}\r\n\r\n\t\tif (!resultType) {\r\n\t\t\t//no permitir cerrar el modal, el resultado no es string ni number ni date ni boolean\r\n\t\t\ttoast.error(`Se obtuvo un tipo inesperado. datos: ${normFormula}`)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst metaType = buildMeta(resultType)\r\n\r\n\t\tif (this.props.modalFormulaMode === 'edit') {\r\n\t\t\tthis.props.dispatchUpdateSectionItem(this.state.section, this.props.index, 'formula', this.state.formula)\r\n\t\t\tthis.props.dispatchUpdateSectionItem(this.state.section, this.props.index, 'label', this.state.label)\r\n\t\t\tthis.props.dispatchUpdateSectionItem(this.state.section, this.props.index, 'type', metaType.type)\r\n\t\t\tthis.props.dispatchUpdateSectionItem(this.state.section, this.props.index, 'filter_options', { ...metaType.filter_options })\r\n\t\t} else {\r\n\t\t\tconst fieldMeta = {\r\n\t\t\t\t\"name\": key_name,\r\n\t\t\t\t\"label\": this.state.label,\r\n\t\t\t\t...metaType,\r\n\t\t\t\t\"path\": this.props.selected_class,\r\n\t\t\t\t\"key_name\": key_name,\r\n\t\t\t\t\"customFn\": true,\r\n\t\t\t\t\"formula\": this.state.formula\r\n\t\t\t}\r\n\t\t\tthis.props.dispatchAddField('columns', fieldMeta)\r\n\t\t}\r\n\r\n\t\tthis.props.dispatchFetchPreviewData()\r\n\t\tthis.setState(cloneDeep(resetStateFormulaModal))\r\n\t\tthis.props.dispatchSetIsOpen(false)\r\n\t}\r\n\r\n\tdetectFunctions (e) {\r\n\t\ttry {\r\n\t\t\tconst selection = e;\r\n\t\t\tconst cursorPosition = {column:selection.cursor.column, row:selection.cursor.row};\r\n\t\t\tconst textBeforeCursor = selection.doc.$lines[cursorPosition.row].slice(0, cursorPosition.column+1);\r\n\t\t\tif (textBeforeCursor.slice(-1) === '(') {\r\n\t\t\t\tconst lastName = textBeforeCursor.slice(0, textBeforeCursor.length - 1)\r\n\t\t\t\t.split(/\\(|\\)|--|\\+\\+|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|[!$%&*+\\-~\\/^]=?/)\r\n\t\t\t\t.pop().replaceAll(' ', '');\r\n\t\t\t\tformulaDescriptions.forEach(fnOption => {\r\n\t\t\t\t\tif (fnOption.name === lastName) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t...{ description: cloneDeep(fnOption) }\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t} else {\r\n\t\t\t\tif (!this.state.formulaHelper) {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t...{ description: cloneDeep(emptyDesciptionObj) }\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error)  {\r\n\t\t\tconsole.log(\"detectFunctions\", error)\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <Modal\r\n\t\t\t\tscrollable={false}\r\n\t\t\t\tcentered={true}\r\n\t\t\t\tsize=\"lg\"\r\n\t\t\t\tisOpen={ this.props.modalFormulaisOpen }\r\n\t\t\t\ttoggle={ () => this.props.dispatchSetIsOpen(false) }\r\n\t\t\t\tclassName=\"config-modal\">\r\n\t\t\t\t\t<ModalHeader\r\n\t\t\t\t\t\ttoggle={ () => this.props.dispatchSetIsOpen(false) }>\r\n\t\t\t\t\t\tFórmula\r\n\t\t\t\t\t</ModalHeader>\r\n\t\t\t\t\t<ModalBody>\r\n\t\t\t\t\t\t<div className=\"formula-modal-edit-container\">\r\n\t\t\t\t\t\t<div className=\"formula-modal-row\">\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t\t<Label for=\"label\">Nombre Columna</Label>\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"label\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"label\"\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"input-sm\"\r\n\t\t\t\t\t\t\t\t\t\tbsSize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={ this.state.label }\r\n\t\t\t\t\t\t\t\t\t\tonChange={ e => this.onHandleChange(e) } />\r\n\t\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"formula-modal-row\">\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t\t<Label for=\"name\">\r\n\t\t\t\t\t\t\t\t\t\tFórmula\r\n\t\t\t\t\t\t\t\t\t\t<Badge color=\"secondary\" className={!this.state.formulaHelper ? \"formula-edit-help\": \"active-option-button\"}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={ async (e) => { this.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t\t\t\t...{ formulaHelper: !this.state.formulaHelper }\r\n\t\t\t\t\t\t\t\t\t\t\t});} }>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"fa fa-question-circle\" aria-hidden=\"true\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t\t\t\t</Label>\r\n\t\t\t\t\t\t\t\t\t<AceEditor\r\n\t\t\t\t\t\t\t\t\t\tref=\"aceEditor\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"year(props(creation_date)) ...\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"text\"\r\n\t\t\t\t\t\t\t\t\t\ttheme=\"monokai\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"formula\"\r\n\t\t\t\t\t\t\t\t\t\tonLoad={editor => {setTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst customMode = new CustomMode();\r\n\t\t\t\t\t\t\t\t\t\t\teditor.session.setMode(customMode);\r\n\t\t\t\t\t\t\t\t\t\t\tsetAutocomplete(formulaDescriptions, this.props.columns.concat(this.props.groups));\r\n\t\t\t\t\t\t\t\t\t\t}, 100);}}\r\n\t\t\t\t\t\t\t\t\t\tonChange={ e => {this.onHandleChangeEditor(e);}  }\r\n\t\t\t\t\t\t\t\t\t\tonCursorChange = { e => this.detectFunctions(e) }\r\n\t\t\t\t\t\t\t\t\t\tvalue={ this.state.formula }\r\n\t\t\t\t\t\t\t\t\t\tfontSize={14}\r\n\t\t\t\t\t\t\t\t\t\tsetOptions={{\r\n\t\t\t\t\t\t\t\t\t\t\tenableBasicAutocompletion: true,\r\n\t\t\t\t\t\t\t\t\t\t\tshowLineNumbers: true,\r\n    \t\t\t\t\t\t\t\t\t\tenableLiveAutocompletion: true\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tshowPrintMargin={true}\r\n\t\t\t\t\t\t\t\t\t\tshowGutter={true}\r\n\t\t\t\t\t\t\t\t\t\thighlightActiveLine={true}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{width: \"100%\", height: \"100px\"}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t{(this.state.description && this.state.description.label !== '') || this.state.formulaHelper ?\r\n\t\t\t\t\t\t\t\t<ul className=\"formula-helper-container\">\r\n\t\t\t\t\t\t\t\t\t<li className=\"formula-helper\">\r\n\t\t\t\t\t\t\t\t\t<div style={{display:'flex'}}>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"helper-option-list\" style={{width: '30%', marginRight: '5%'}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h5>Funciones</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ formulaDescriptions.map((option, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li style={{listStyle: 'none'}}  key={index}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button color=\"secondary\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={!(this.state.description.name === option.name) ? \"helper-funtion-option\" : \"helper-funtion-option active-option-button\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.onHandleChangeFn(option)}>{option.label}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)) }\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{(this.state.description && this.state.description.label !== '') ?\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"helper-option-detail\" style={{width: '65%'}}>\r\n\t\t\t\t\t\t\t\t\t\t\t<h4>{ this.state.description.label } <span style={{fontSize: '12px', fontFamily: 'Avenir-Book,Arial,Helvetica,sans-serif'}}>(<i>{this.state.description.name}</i>)</span></h4>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ this.state.description.description }\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ this.state.description.syntax && 'Sintax' }\r\n\t\t\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t{ this.state.description.syntax && <Alert color=\"dark\"><i>{ this.state.description.syntax }</i></Alert> }\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ !!this.state.description.examples.length && 'Ejemplos' }\r\n\t\t\t\t\t\t\t\t\t\t\t</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t{ this.state.description.examples.map((example, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Alert key={ index } color=\"dark\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i>{ example }</i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Alert>\r\n\t\t\t\t\t\t\t\t\t\t\t)) }\r\n\t\t\t\t\t\t\t\t\t\t</div> : null}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t</ul> : null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</ModalBody>\r\n\t\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t\t<Button color=\"primary\" className=\"btn_primary_def_1\" onClick={ this.onAddField }>{ this.props.modalFormulaMode === 'edit' ? 'Aceptar' : 'Agregar' }</Button>\r\n\t\t\t\t\t\t<Button color=\"secondary\" className=\"btn_secondary_def_1\" onClick={ e => {\r\n\t\t\t\t\t\t\tthis.props.dispatchSetIsOpen(false)\r\n\t\t\t\t\t\t\tthis.setState(cloneDeep(resetStateFormulaModal))\r\n\t\t\t\t\t\t}}>Cancelar</Button>\r\n\t\t\t\t\t</ModalFooter>\r\n\t\t\t\t</Modal>\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = ({ modalFormula, general }) => {\r\n\treturn {\r\n\t\tmodalFormulaisOpen: modalFormula.isOpen,\r\n\t\tmodalFormulaMode: modalFormula.mode,\r\n\t\tmodalFormulaEditModeData: modalFormula.edit_mode_data,\r\n\t\tselected_class: general.report_header_data.selected_class,\r\n\t\tcolumns: general.columns,\r\n\t\tgroups: general.groups,\r\n\t\tindex: modalFormula.index,\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tdispatchSetIsOpen: isOpen => dispatch(setIsOpenModalFormula(isOpen)),\r\n\t\tdispatchAddField: (section, field) => dispatch(addField(section, field)),\r\n\t\tdispatchFetchPreviewData: () => dispatch(fetchPreviewData()),\r\n\t\tdispatchUpdateSectionItem: (section, index, property, value) => {\r\n\t\t\tdispatch(updateSectionItem(section, index, property, value))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(FormulaModal)","import cloneDeep from 'lodash/cloneDeep';\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport FieldsContainer from './FieldsContainer';\r\nimport FormulaModal from '../FormulaModal';\r\nimport { setIsOpenModalFormula, setModeModalFormula } from '../../storage/actions'\r\n\r\nexport class Sidebar extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      current_tab: 0,\r\n      collapse: (props.is_create_edit ? false: true)\r\n    }\r\n  }\r\n\r\n  changeTab(index) {\r\n    this.setState({ current_tab: index });\r\n  }\r\n\r\n  onClickIcon() {\r\n    let new_index = Math.abs(this.state.current_tab - 1);\r\n    this.setState({ current_tab: new_index });\r\n  }\r\n\r\n  toggleCollapse = () => {\r\n    this.setState(prevState => ({\r\n      collapse: !prevState.collapse\r\n    }));\r\n  }\r\n\r\n  openEditFormula = () => {\r\n    this.props.dispatchSetModeModalFormula('add')\r\n    this.props.dispatchSetIsOpen(true)\r\n  }\r\n\r\n  filterFieldList = (excluded_keys) => {\r\n    let result = [];\r\n    this.props.field_list.forEach(element => {\r\n      let tmp = cloneDeep(element);\r\n      if (tmp.options) {\r\n        let new_options = [];\r\n        for (let index = 0; index < tmp.options.length; index++) {\r\n          const option = tmp.options[index];\r\n          if (excluded_keys.indexOf(option.key_name) === -1) {\r\n            new_options.push(option);\r\n          }\r\n        }\r\n        tmp.options = new_options;\r\n        result.push(tmp);\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  render() {\r\n    const { columns, groups, filters, is_create_edit } = this.props;\r\n    let added_fields = columns.map(field => { return field.key_name }).concat(groups.map(field => { return field.key_name }));\r\n    if(this.state.collapse){\r\n      return (\r\n        <div className=\"oreports-sidebar collapsed\">\r\n          <div className=\"sidebar-header\">\r\n            <div className=\"sidebar-icon\" onClick={this.toggleCollapse}><i className=\"fa fa-chevron-right\" aria-hidden=\"true\"></i></div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"oreports-sidebar\">\r\n        <div className=\"sidebar-header\">\r\n          {this.state.current_tab === (is_create_edit ? 0 : 1) ? <div className=\"sidebar-title\"><i className=\"fa fa-th\" aria-hidden=\"true\"></i> Tabla base</div> : null}\r\n          <div className=\"sidebar-icon\" onClick={() => { this.onClickIcon(); }}>{this.state.current_tab === (is_create_edit ? 0 : 1) ? <i className=\"fa fa-filter\" aria-hidden=\"true\"></i> : <i className=\"fa fa-th\" aria-hidden=\"true\"></i>}</div>\r\n          {this.state.current_tab === (is_create_edit ? 1 : 0) ? <div className=\"sidebar-title\"><i className=\"fa fa-filter\" aria-hidden=\"true\"></i> Filtros</div> : null}\r\n          <div className=\"sidebar-collapse\" onClick={this.toggleCollapse}><i className=\"fa fa-chevron-left\" aria-hidden=\"true\"></i></div>\r\n        </div>\r\n        <div className=\"padding-15\">\r\n          {this.state.current_tab === (is_create_edit ? 0 : 1) ? <>\r\n            <FormulaModal />\r\n            <FieldsContainer title=\"Columnas\" section=\"columns\" fields={columns} field_list={this.filterFieldList(added_fields)}\r\n            titleButton={(is_create_edit ? {classes: 'btn btn-default oreports-primary-button outlined custom-columns-function', click: this.openEditFormula, classIcon: 'fa fa-columns' } : null)} />\r\n            <hr />\r\n            <FieldsContainer title=\"Grupos\" section=\"groups\" fields={groups} field_list={this.filterFieldList(added_fields)} />\r\n          </> : <FieldsContainer title=\"Filtros\" notitle={true} section=\"filters\" fields={filters} field_list={this.filterFieldList([])} />}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'field_list': state.general.field_list,\r\n    'columns': state.general.columns,\r\n    'groups': state.general.groups,\r\n    'filters': state.general.filters,\r\n    'is_create_edit': state.general.is_create_edit\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n    dispatchSetIsOpen: isOpen => dispatch(setIsOpenModalFormula(isOpen)),\r\n    dispatchSetModeModalFormula: mode => dispatch(setModeModalFormula(mode))\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Col, Modal, ModalBody, Row } from 'reactstrap';\r\nimport { zoomChart } from '../storage/actions';\r\n\r\nimport Table from '../components/Table';\r\nimport Sidebar from '../components/Sidebar/Sidebar';\r\n\r\nimport OpalChart from './Chart';\r\n\r\n\r\nclass ZoomChartModal extends Component {\r\n\r\n  render() {\r\n\r\n    const { zoomed_chart_def, toggleZoomChartModal } = this.props;\r\n\r\n    if (!zoomed_chart_def || !zoomed_chart_def.type) {\r\n      return null;\r\n    }\r\n\r\n    return (<Modal scrollable={false} centered={true} size=\"lg\" isOpen={true} toggle={toggleZoomChartModal} className=\"config-modal full-screen-modal modal-chart\">\r\n      <ModalBody>\r\n        <OpalChart chart_def={{ ...zoomed_chart_def }} isZoomed={true} />\r\n        <div className=\"chart-button-container\">\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\" onClick={toggleZoomChartModal}></i>\r\n        </div>\r\n\r\n        {this.props.show_table ?\r\n\r\n          <Row>\r\n            <Col>\r\n              <div className=\"oreports-container\">\r\n                <div className=\"oreports-body\">\r\n                  <Sidebar />\r\n                  <div className=\"oreports-table\">\r\n                    <Table in_modal={true} />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n          : null}\r\n      </ModalBody>\r\n\r\n    </Modal>);\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'zoomed_chart_def': state.general.zoomed_chart_def,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    'toggleZoomChartModal': () => {\r\n      dispatch(zoomChart({}));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ZoomChartModal);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Col } from 'reactstrap';\r\nimport { Button } from 'devextreme-react/button';\r\n\r\nimport OpalChart from './Chart';\r\n\r\nimport { removeChart, zoomChart, applyTableFilter, setEditChartIndex, toggleChartsModal } from '../storage/actions';\r\n\r\n\r\nclass ChartContainer extends Component {\r\n\r\n  render() {\r\n\r\n    const { chart_def, chart_index, is_create_edit, size, table_filters } = this.props;\r\n\r\n    let show_undo = false;\r\n    let undo_field = null;\r\n    for (let index = 0; index < table_filters.length; index++) {\r\n      const element = table_filters[index];\r\n      if ((element[0] === chart_def.xaxis || (chart_def.yaxis  && chart_def.yaxis.length > 0 && element[0] === chart_def.yaxis[0])) && element.length === 3 && element[2]) {\r\n        show_undo = true;\r\n        undo_field = (element[0] === chart_def.xaxis ? chart_def.xaxis: chart_def.yaxis[0]);\r\n        break;\r\n      }\r\n\r\n    }\r\n\r\n    return (\r\n      <Col md={size} className=\"chart-card\" style={{\r\n        padding: chart_def.type === \"numeric\" ? 0 : 'inherit'\r\n      }}>\r\n        <OpalChart chart_def={{ ...chart_def }} />\r\n        <div className=\"chart-button-container\">\r\n          {chart_def.type !== \"numeric\" ? <Button\r\n            icon=\"search\"\r\n            onClick={() => {\r\n              this.props.zoomChart({ ...chart_def });\r\n            }} /> : null}\r\n          {show_undo ?\r\n            <Button\r\n              icon=\"undo\"\r\n              onClick={() => {\r\n                this.props.applyFilter(undo_field, undefined);\r\n              }}\r\n            /> : null}\r\n          {is_create_edit ?\r\n          <>\r\n          <Button\r\n            icon=\"edit\"\r\n            onClick={() => {\r\n              this.props.editChart(chart_index);\r\n            }} />\r\n            <Button\r\n              icon=\"close\"\r\n              onClick={() => {\r\n                this.props.removeChart(chart_index);\r\n              }}\r\n            /> </>: null}\r\n        </div>\r\n      </Col>);\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'is_create_edit': state.general.is_create_edit,\r\n    'table_filters': state.general.table_filters,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    'removeChart': (index) => {\r\n      dispatch(removeChart(index));\r\n    },\r\n    'editChart': async (chart_index) => {\r\n      await dispatch(setEditChartIndex(chart_index));\r\n      dispatch(toggleChartsModal());\r\n    },\r\n    'zoomChart': (chart_def) => {\r\n      dispatch(zoomChart(chart_def));\r\n    },\r\n    'applyFilter': (column, value) => {\r\n      dispatch(applyTableFilter(column, value));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChartContainer);","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Group_2638\",\n  \"data-name\": \"Group 2638\",\n  transform: \"translate(18875 1576.005)\",\n  opacity: 0.5\n}, React.createElement(\"path\", {\n  id: \"Union_1\",\n  \"data-name\": \"Union 1\",\n  d: \"M16.385,36.808V24.457H4.035a4.035,4.035,0,0,1,0-8.07H16.385V4.036a4.035,4.035,0,1,1,8.07,0V16.386H36.806a4.035,4.035,0,1,1,0,8.07H24.456V36.808a4.035,4.035,0,0,1-8.07,0Z\",\n  transform: \"translate(-18774.404 -1547.535) rotate(-16)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_2\",\n  \"data-name\": \"Union 2\",\n  d: \"M16.385,36.808V24.458H4.035a4.036,4.036,0,0,1,0-8.071H16.385V4.036a4.035,4.035,0,1,1,8.07,0V16.386H36.806a4.036,4.036,0,0,1,0,8.071H24.456V36.808a4.035,4.035,0,0,1-8.07,0Z\",\n  transform: \"translate(-18632.051 -1576.005) rotate(28)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_4\",\n  \"data-name\": \"Union 4\",\n  d: \"M16.385,36.808V24.458H4.035a4.036,4.036,0,0,1,0-8.071H16.385V4.036a4.035,4.035,0,1,1,8.07,0V16.386H36.806a4.036,4.036,0,0,1,0,8.071H24.456V36.808a4.035,4.035,0,0,1-8.07,0Z\",\n  transform: \"translate(-18555.348 -1278.321) rotate(9)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_6\",\n  \"data-name\": \"Union 6\",\n  d: \"M16.385,36.808V24.458H4.035a4.036,4.036,0,0,1,0-8.071H16.385V4.036a4.035,4.035,0,1,1,8.07,0V16.386H36.806a4.036,4.036,0,0,1,0,8.071H24.456V36.808a4.035,4.035,0,0,1-8.07,0Z\",\n  transform: \"translate(-18847.463 -1282.31) rotate(-18)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_3\",\n  \"data-name\": \"Union 3\",\n  d: \"M10.427,23.423v-7.86H2.568a2.568,2.568,0,0,1,0-5.136h7.859V2.568a2.568,2.568,0,0,1,5.136,0v7.86h7.859a2.568,2.568,0,0,1,0,5.136H15.563v7.86a2.568,2.568,0,0,1-5.136,0Z\",\n  transform: \"translate(-18473.324 -1431.001) rotate(13)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_7\",\n  \"data-name\": \"Union 7\",\n  d: \"M10.427,23.423v-7.86H2.568a2.568,2.568,0,0,1,0-5.136h7.859V2.568a2.568,2.568,0,0,1,5.136,0v7.86h7.859a2.568,2.568,0,0,1,0,5.136H15.563v7.86a2.568,2.568,0,0,1-5.136,0Z\",\n  transform: \"translate(-18809.58 -1469.026) rotate(-15)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Union_5\",\n  \"data-name\": \"Union 5\",\n  d: \"M10.427,23.423v-7.86H2.568a2.568,2.568,0,0,1,0-5.136h7.859V2.568a2.568,2.568,0,0,1,5.136,0v7.86h7.859a2.568,2.568,0,0,1,0,5.136H15.563v7.86a2.568,2.568,0,0,1-5.136,0Z\",\n  transform: \"translate(-18690.037 -1227.109) rotate(-11)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_1\",\n  \"data-name\": \"Exclusion 1\",\n  d: \"M14,28a14.1,14.1,0,0,1-2.822-.284,13.921,13.921,0,0,1-5.006-2.106A14.039,14.039,0,0,1,1.1,19.449a13.926,13.926,0,0,1-.816-2.628,14.135,14.135,0,0,1,0-5.643A13.924,13.924,0,0,1,2.391,6.172,14.041,14.041,0,0,1,8.551,1.1,13.9,13.9,0,0,1,11.179.284a14.134,14.134,0,0,1,5.643,0,13.921,13.921,0,0,1,5.006,2.106A14.04,14.04,0,0,1,26.9,8.551a13.932,13.932,0,0,1,.816,2.628,14.137,14.137,0,0,1,0,5.643,13.925,13.925,0,0,1-2.107,5.006A14.041,14.041,0,0,1,19.45,26.9a13.914,13.914,0,0,1-2.628.816A14.1,14.1,0,0,1,14,28ZM14,4.359A9.6,9.6,0,0,0,8.61,6.006a9.669,9.669,0,0,0-3.493,4.242,9.628,9.628,0,0,0,.889,9.143,9.667,9.667,0,0,0,4.241,3.493,9.628,9.628,0,0,0,9.143-.889,9.671,9.671,0,0,0,3.493-4.241,9.628,9.628,0,0,0-.889-9.143,9.668,9.668,0,0,0-4.242-3.493A9.582,9.582,0,0,0,14,4.359Z\",\n  transform: \"translate(-18544 -1516)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_6\",\n  \"data-name\": \"Exclusion 6\",\n  d: \"M14,28a14.1,14.1,0,0,1-2.822-.284,13.921,13.921,0,0,1-5.006-2.106A14.039,14.039,0,0,1,1.1,19.449a13.926,13.926,0,0,1-.816-2.628,14.135,14.135,0,0,1,0-5.643A13.924,13.924,0,0,1,2.391,6.172,14.041,14.041,0,0,1,8.551,1.1,13.9,13.9,0,0,1,11.179.284a14.134,14.134,0,0,1,5.643,0,13.921,13.921,0,0,1,5.006,2.106A14.04,14.04,0,0,1,26.9,8.551a13.932,13.932,0,0,1,.816,2.628,14.137,14.137,0,0,1,0,5.643,13.925,13.925,0,0,1-2.107,5.006A14.041,14.041,0,0,1,19.45,26.9a13.914,13.914,0,0,1-2.628.816A14.1,14.1,0,0,1,14,28ZM14,4.359A9.6,9.6,0,0,0,8.61,6.006a9.669,9.669,0,0,0-3.493,4.242,9.628,9.628,0,0,0,.889,9.143,9.667,9.667,0,0,0,4.241,3.493,9.628,9.628,0,0,0,9.143-.889,9.671,9.671,0,0,0,3.493-4.241,9.628,9.628,0,0,0-.889-9.143,9.668,9.668,0,0,0-4.242-3.493A9.582,9.582,0,0,0,14,4.359Z\",\n  transform: \"translate(-18875 -1416)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_4\",\n  \"data-name\": \"Exclusion 4\",\n  d: \"M14,28a14.1,14.1,0,0,1-2.822-.284,13.921,13.921,0,0,1-5.006-2.106A14.039,14.039,0,0,1,1.1,19.449a13.926,13.926,0,0,1-.816-2.628,14.135,14.135,0,0,1,0-5.643A13.924,13.924,0,0,1,2.391,6.172,14.041,14.041,0,0,1,8.551,1.1,13.9,13.9,0,0,1,11.179.284a14.134,14.134,0,0,1,5.643,0,13.921,13.921,0,0,1,5.006,2.106A14.04,14.04,0,0,1,26.9,8.551a13.932,13.932,0,0,1,.816,2.628,14.137,14.137,0,0,1,0,5.643,13.925,13.925,0,0,1-2.107,5.006A14.041,14.041,0,0,1,19.45,26.9a13.914,13.914,0,0,1-2.628.816A14.1,14.1,0,0,1,14,28ZM14,4.359A9.6,9.6,0,0,0,8.61,6.006a9.669,9.669,0,0,0-3.493,4.242,9.628,9.628,0,0,0,.889,9.143,9.667,9.667,0,0,0,4.241,3.493,9.628,9.628,0,0,0,9.143-.889,9.671,9.671,0,0,0,3.493-4.241,9.628,9.628,0,0,0-.889-9.143,9.668,9.668,0,0,0-4.242-3.493A9.582,9.582,0,0,0,14,4.359Z\",\n  transform: \"translate(-18612 -1206)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_8\",\n  \"data-name\": \"Exclusion 8\",\n  d: \"M14,28a14.1,14.1,0,0,1-2.822-.284,13.921,13.921,0,0,1-5.006-2.106A14.039,14.039,0,0,1,1.1,19.449a13.926,13.926,0,0,1-.816-2.628,14.135,14.135,0,0,1,0-5.643A13.924,13.924,0,0,1,2.391,6.172,14.041,14.041,0,0,1,8.551,1.1,13.9,13.9,0,0,1,11.179.284a14.134,14.134,0,0,1,5.643,0,13.921,13.921,0,0,1,5.006,2.106A14.04,14.04,0,0,1,26.9,8.551a13.932,13.932,0,0,1,.816,2.628,14.137,14.137,0,0,1,0,5.643,13.925,13.925,0,0,1-2.107,5.006A14.041,14.041,0,0,1,19.45,26.9a13.914,13.914,0,0,1-2.628.816A14.1,14.1,0,0,1,14,28ZM14,4.359A9.6,9.6,0,0,0,8.61,6.006a9.669,9.669,0,0,0-3.493,4.242,9.628,9.628,0,0,0,.889,9.143,9.667,9.667,0,0,0,4.241,3.493,9.628,9.628,0,0,0,9.143-.889,9.671,9.671,0,0,0,3.493-4.241,9.628,9.628,0,0,0-.889-9.143,9.668,9.668,0,0,0-4.242-3.493A9.582,9.582,0,0,0,14,4.359Z\",\n  transform: \"translate(-18494 -1302)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_2\",\n  \"data-name\": \"Exclusion 2\",\n  d: \"M8.5,17a8.559,8.559,0,0,1-1.713-.173,8.452,8.452,0,0,1-3.039-1.279,8.524,8.524,0,0,1-3.08-3.74,8.455,8.455,0,0,1-.5-1.6,8.582,8.582,0,0,1,0-3.426,8.454,8.454,0,0,1,1.279-3.04A8.525,8.525,0,0,1,5.192.668a8.441,8.441,0,0,1,1.6-.5,8.582,8.582,0,0,1,3.426,0,8.452,8.452,0,0,1,3.039,1.279,8.524,8.524,0,0,1,3.08,3.74,8.459,8.459,0,0,1,.5,1.6,8.583,8.583,0,0,1,0,3.426,8.455,8.455,0,0,1-1.279,3.04,8.525,8.525,0,0,1-3.74,3.079,8.448,8.448,0,0,1-1.6.5A8.558,8.558,0,0,1,8.5,17Zm0-14.353a5.826,5.826,0,0,0-3.273,1A5.871,5.871,0,0,0,3.107,6.222a5.845,5.845,0,0,0,.54,5.551,5.869,5.869,0,0,0,2.575,2.121,5.846,5.846,0,0,0,5.551-.54,5.872,5.872,0,0,0,2.121-2.575,5.846,5.846,0,0,0-.54-5.551,5.87,5.87,0,0,0-2.575-2.121A5.818,5.818,0,0,0,8.5,2.647Z\",\n  transform: \"translate(-18539 -1374)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_5\",\n  \"data-name\": \"Exclusion 5\",\n  d: \"M8.5,17a8.559,8.559,0,0,1-1.713-.173,8.452,8.452,0,0,1-3.039-1.279,8.524,8.524,0,0,1-3.08-3.74,8.455,8.455,0,0,1-.5-1.6,8.582,8.582,0,0,1,0-3.426,8.454,8.454,0,0,1,1.279-3.04A8.525,8.525,0,0,1,5.192.668a8.441,8.441,0,0,1,1.6-.5,8.582,8.582,0,0,1,3.426,0,8.452,8.452,0,0,1,3.039,1.279,8.524,8.524,0,0,1,3.08,3.74,8.459,8.459,0,0,1,.5,1.6,8.583,8.583,0,0,1,0,3.426,8.455,8.455,0,0,1-1.279,3.04,8.525,8.525,0,0,1-3.74,3.079,8.448,8.448,0,0,1-1.6.5A8.558,8.558,0,0,1,8.5,17Zm0-14.353a5.826,5.826,0,0,0-3.273,1A5.871,5.871,0,0,0,3.107,6.222a5.845,5.845,0,0,0,.54,5.551,5.869,5.869,0,0,0,2.575,2.121,5.846,5.846,0,0,0,5.551-.54,5.872,5.872,0,0,0,2.121-2.575,5.846,5.846,0,0,0-.54-5.551,5.87,5.87,0,0,0-2.575-2.121A5.818,5.818,0,0,0,8.5,2.647Z\",\n  transform: \"translate(-18765 -1215)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_3\",\n  \"data-name\": \"Exclusion 3\",\n  d: \"M8.5,17a8.559,8.559,0,0,1-1.713-.173,8.452,8.452,0,0,1-3.039-1.279,8.524,8.524,0,0,1-3.08-3.74,8.455,8.455,0,0,1-.5-1.6,8.582,8.582,0,0,1,0-3.426,8.454,8.454,0,0,1,1.279-3.04A8.525,8.525,0,0,1,5.192.668a8.441,8.441,0,0,1,1.6-.5,8.582,8.582,0,0,1,3.426,0,8.452,8.452,0,0,1,3.039,1.279,8.524,8.524,0,0,1,3.08,3.74,8.459,8.459,0,0,1,.5,1.6,8.583,8.583,0,0,1,0,3.426,8.455,8.455,0,0,1-1.279,3.04,8.525,8.525,0,0,1-3.74,3.079,8.448,8.448,0,0,1-1.6.5A8.558,8.558,0,0,1,8.5,17Zm0-14.353a5.826,5.826,0,0,0-3.273,1A5.871,5.871,0,0,0,3.107,6.222a5.845,5.845,0,0,0,.54,5.551,5.869,5.869,0,0,0,2.575,2.121,5.846,5.846,0,0,0,5.551-.54,5.872,5.872,0,0,0,2.121-2.575,5.846,5.846,0,0,0-.54-5.551,5.87,5.87,0,0,0-2.575-2.121A5.818,5.818,0,0,0,8.5,2.647Z\",\n  transform: \"translate(-18683 -1502)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"path\", {\n  id: \"Exclusion_7\",\n  \"data-name\": \"Exclusion 7\",\n  d: \"M8.5,17a8.559,8.559,0,0,1-1.713-.173,8.452,8.452,0,0,1-3.039-1.279,8.524,8.524,0,0,1-3.08-3.74,8.455,8.455,0,0,1-.5-1.6,8.582,8.582,0,0,1,0-3.426,8.454,8.454,0,0,1,1.279-3.04A8.525,8.525,0,0,1,5.192.668a8.441,8.441,0,0,1,1.6-.5,8.582,8.582,0,0,1,3.426,0,8.452,8.452,0,0,1,3.039,1.279,8.524,8.524,0,0,1,3.08,3.74,8.459,8.459,0,0,1,.5,1.6,8.583,8.583,0,0,1,0,3.426,8.455,8.455,0,0,1-1.279,3.04,8.525,8.525,0,0,1-3.74,3.079,8.448,8.448,0,0,1-1.6.5A8.558,8.558,0,0,1,8.5,17Zm0-14.353a5.826,5.826,0,0,0-3.273,1A5.871,5.871,0,0,0,3.107,6.222a5.845,5.845,0,0,0,.54,5.551,5.869,5.869,0,0,0,2.575,2.121,5.846,5.846,0,0,0,5.551-.54,5.872,5.872,0,0,0,2.121-2.575,5.846,5.846,0,0,0-.54-5.551,5.87,5.87,0,0,0-2.575-2.121A5.818,5.818,0,0,0,8.5,2.647Z\",\n  transform: \"translate(-18788 -1411)\",\n  fill: \"#909090\",\n  opacity: 0.5\n}), React.createElement(\"g\", {\n  id: \"Group_2635\",\n  \"data-name\": \"Group 2635\",\n  transform: \"translate(-19752.715 -1958)\"\n}, React.createElement(\"g\", {\n  id: \"Rectangle_1657\",\n  \"data-name\": \"Rectangle 1657\",\n  transform: \"translate(1007.715 527)\",\n  fill: \"#c1c1c1\",\n  stroke: \"#c1c1c1\",\n  strokeWidth: 1\n}, React.createElement(\"rect\", {\n  width: 171,\n  height: 31,\n  rx: 5,\n  stroke: \"none\"\n}), React.createElement(\"rect\", {\n  x: 0.5,\n  y: 0.5,\n  width: 170,\n  height: 30,\n  rx: 4.5,\n  fill: \"none\"\n})), React.createElement(\"g\", {\n  id: \"Rectangle_1658\",\n  \"data-name\": \"Rectangle 1658\",\n  transform: \"translate(1007.715 570)\",\n  fill: \"#c1c1c1\",\n  stroke: \"#c1c1c1\",\n  strokeWidth: 1\n}, React.createElement(\"rect\", {\n  width: 171,\n  height: 15,\n  rx: 5,\n  stroke: \"none\"\n}), React.createElement(\"rect\", {\n  x: 0.5,\n  y: 0.5,\n  width: 170,\n  height: 14,\n  rx: 4.5,\n  fill: \"none\"\n})), React.createElement(\"g\", {\n  id: \"Rectangle_1658-2\",\n  \"data-name\": \"Rectangle 1658\",\n  transform: \"translate(1007.715 596)\",\n  fill: \"#c1c1c1\",\n  stroke: \"#c1c1c1\",\n  strokeWidth: 1\n}, React.createElement(\"rect\", {\n  width: 171,\n  height: 15,\n  rx: 5,\n  stroke: \"none\"\n}), React.createElement(\"rect\", {\n  x: 0.5,\n  y: 0.5,\n  width: 170,\n  height: 14,\n  rx: 4.5,\n  fill: \"none\"\n})), React.createElement(\"g\", {\n  id: \"Rectangle_1658-3\",\n  \"data-name\": \"Rectangle 1658\",\n  transform: \"translate(1007.715 623)\",\n  fill: \"#c1c1c1\",\n  stroke: \"#c1c1c1\",\n  strokeWidth: 1\n}, React.createElement(\"rect\", {\n  width: 171,\n  height: 15,\n  rx: 5,\n  stroke: \"none\"\n}), React.createElement(\"rect\", {\n  x: 0.5,\n  y: 0.5,\n  width: 170,\n  height: 14,\n  rx: 4.5,\n  fill: \"none\"\n})), React.createElement(\"g\", {\n  id: \"Rectangle_1658-4\",\n  \"data-name\": \"Rectangle 1658\",\n  transform: \"translate(1007.715 649)\",\n  fill: \"#c1c1c1\",\n  stroke: \"#c1c1c1\",\n  strokeWidth: 1\n}, React.createElement(\"rect\", {\n  width: 171,\n  height: 15,\n  rx: 5,\n  stroke: \"none\"\n}), React.createElement(\"rect\", {\n  x: 0.5,\n  y: 0.5,\n  width: 170,\n  height: 14,\n  rx: 4.5,\n  fill: \"none\"\n}))));\n\nvar SvgEmptyReport = function SvgEmptyReport(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 426.998,\n    height: 398.005,\n    viewBox: \"0 0 426.998 398.005\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgEmptyReport, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/empty_report.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react';\r\nimport { ReactComponent as EmptyImage } from '../images/empty_report.svg';\r\n\r\nexport class EmptyState extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"table-empty-placeholder\">\r\n                <EmptyImage />\r\n                <span>Seleccione al menos una columna</span>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default EmptyState\r\n","import React, { Component } from 'react';\r\nimport OpalChart from './Chart';\r\nimport Table from './Table';\r\n\r\nclass Dashlet extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"oreport-dashlet\">\r\n        <OpalChart chart_def={this.props.chart_def} />\r\n        <Table hidden={true} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Dashlet;\r\n","import 'devextreme/dist/css/dx.common.css';\r\nimport 'devextreme/dist/css/dx.light.css';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n//import 'bootstrap/dist/css/bootstrap.css';\r\nimport './index.scss';\r\n\r\nimport React, { Component } from 'react';\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\nimport { connect } from 'react-redux';\r\nimport { Col, Container, Row, Modal, ModalBody, ModalHeader, Button } from 'reactstrap';\r\nimport ConfigModal from './components/ConfigModal';\r\nimport ChartsModal from './components/ChartsModal';\r\nimport ZoomChartModal from './components/ZoomChartModal';\r\nimport ChartContainer from './components/ChartContainer';\r\nimport EmptyState from './components/EmptyState';\r\nimport Sidebar from './components/Sidebar/Sidebar';\r\nimport Table from './components/Table';\r\nimport './sass/mixins.scss';\r\nimport { moveField, setDraggingField, toggleConfigModal, toggleChartsModal, setCurrentView } from './storage/actions';\r\nimport { fetchPreviewData as fetchPreviewDataAction, save as saveAction, fetchMainConfig as fetchMainConfigAction } from './storage/thunkActions';\r\nimport Dashlet from './components/Dashlet';\r\n\r\n\r\n\r\nexport class App extends Component {\r\n  state = {\r\n    show_modal_dashlet: false\r\n  }\r\n\r\n  initialize = async () => {\r\n    const { fetchPreviewData, fetchMainConfig } = this.props;\r\n    await fetchMainConfig();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { fetchPreviewData, fetchMainConfig } = this.props;\r\n    this.initialize();\r\n    window[\"oreports_app_\" + this.props.app_id] = this;\r\n  }\r\n\r\n  toggleZoomDashlet = async () => {\r\n    if (this.props.is_create_edit) {\r\n      await this.props.setCurrentView('detail');\r\n      this.props.fetchPreviewData();\r\n    }\r\n    this.setState(prevState => ({\r\n      show_modal_dashlet: !prevState.show_modal_dashlet\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    const { chart_list, is_ajax, ajax_show_all } = this.props;\r\n\r\n    let charts = null;\r\n    if (chart_list && chart_list.length > 0) {\r\n      let size = Math.floor(12 / chart_list.length);\r\n      charts = chart_list.map((chart_item, index) => {\r\n        return (<ChartContainer key={index} size={size < 4 ? 4 : size} chart_index={index} chart_def={chart_item} />);\r\n      });\r\n    }\r\n\r\n    if (is_ajax) {\r\n      this.zoomChart = () => {\r\n        this.toggleZoomDashlet();\r\n      }\r\n\r\n      this.editFromDashlet = async (dashlet_id) => {\r\n        await this.props.setCurrentView('edit');\r\n        this.props.fetchPreviewData();\r\n        this.setState(prevState => ({\r\n          show_modal_dashlet: !prevState.show_modal_dashlet\r\n        }));\r\n      }\r\n    }\r\n\r\n    const render_component = (\r\n      <div>\r\n        <ConfigModal />\r\n        <ChartsModal />\r\n        <ZoomChartModal />\r\n        <DragDropContext onDragEnd={this.props.moveField} onDragStart={this.props.startDragging}>\r\n          <Container fluid={true}>\r\n            {charts && charts.length > 0 ?\r\n              <Row className=\"row-chart-container\">\r\n                <div className=\"chart-container\">\r\n                  {charts}\r\n                </div>\r\n              </Row> : null}\r\n            <Row>\r\n              <Col>\r\n                <div className=\"oreports-container\">\r\n\r\n                  <div className=\"oreports-body\">\r\n                    <Sidebar />\r\n                    <div className=\"oreports-table\">\r\n                      {this.props.columns && this.props.columns.length > 0 ?\r\n                        <Table />\r\n                        : <EmptyState />}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Col>\r\n            </Row>\r\n          </Container>\r\n        </DragDropContext>\r\n      </div>\r\n    );\r\n\r\n    if (is_ajax) {\r\n      const dashlet_title = (this.props.detail_name  ? ' - ' + this.props.detail_name: '');\r\n      let modal_header = (<ModalHeader toggle={this.toggleZoomDashlet}><i className=\"fa fa-cog\" aria-hidden=\"true\"></i> Detalle{dashlet_title}</ModalHeader>);\r\n      if (this.props.is_create_edit) {\r\n        modal_header = (\r\n          <ModalHeader close={<></>} toggle={this.toggleZoomDashlet}>\r\n            <div className=\"dashlet-modal-header\">\r\n              <div className=\"self-center\"><i className=\"fa fa-cog\" aria-hidden=\"true\"></i> Edición{dashlet_title}</div>\r\n              <div className=\"modal-header-buttons\">\r\n                <Button className=\"btn-icon\" onClick={() => { this.props.toggleChartsModal() }}><i className=\"fa fa-pie-chart\" aria-hidden=\"true\"></i></Button>\r\n                <Button color=\"primary\" className=\"oreports-primary-button\" onClick={() => { this.props.save() }}>Guardar</Button>\r\n                <Button color=\"primary\" onClick={() => { this.toggleZoomDashlet() }}>Cerrar</Button>\r\n              </div>\r\n            </div>\r\n          </ModalHeader>);\r\n      }\r\n      return (<div>\r\n        {(!ajax_show_all && chart_list && chart_list.length > 0) ? <Dashlet chart_def={chart_list[0]} /> : render_component}\r\n        <Modal scrollable={false} centered={true} size=\"lg\" isOpen={this.state.show_modal_dashlet} toggle={this.toggleZoomDashlet} className=\"root_oreports config-modal full-screen-modal\">\r\n          {modal_header}\r\n          <ModalBody>\r\n            {render_component}\r\n          </ModalBody>\r\n        </Modal>\r\n      </div>);\r\n    }\r\n\r\n    return render_component;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    'columns': state.general.columns,\r\n    'saving': state.general.saving,\r\n    'chart_list': state.general.chart_list,\r\n    'is_ajax': state.general.is_ajax,\r\n    'ajax_show_all': state.general.ajax_show_all,\r\n    'app_id': state.general.app_id,\r\n    'is_create_edit': state.general.is_create_edit,\r\n    'detail_name': state.general.detail_name,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    'moveField': async (result) => {\r\n      dispatch(setDraggingField(false));\r\n      dispatch(moveField(result));\r\n      //dispatch(fetchPreviewDataAction());\r\n    },\r\n    'startDragging': () => {\r\n      dispatch(setDraggingField(true));\r\n    },\r\n    'fetchPreviewData': () => {\r\n      dispatch(fetchPreviewDataAction());\r\n    },\r\n    'fetchMainConfig': () => {\r\n      dispatch(fetchMainConfigAction());\r\n    },\r\n    'save': (close_window = false) => {\r\n      dispatch(saveAction(close_window));\r\n    },\r\n    'toggleConfigModal': () => {\r\n      dispatch(toggleConfigModal());\r\n    },\r\n    'toggleChartsModal': (dashlet_id) => {\r\n      dispatch(toggleChartsModal(dashlet_id));\r\n    },\r\n    'setCurrentView': (current_view) => {\r\n      dispatch(setCurrentView(current_view));\r\n    }\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import cloneDeep from 'lodash/cloneDeep';\r\nimport { combineReducers } from 'redux';\r\nimport { \r\n  ADD_FIELD, \r\n  FETCH_PREVIEW_DATA_ERROR, \r\n  FETCH_PREVIEW_DATA_PENDING, \r\n  FETCH_PREVIEW_DATA_SUCCESS, \r\n  GET_CONFIG_ERROR,\r\n  GET_CONFIG_PENDING,\r\n  GET_CONFIG_SUCCESS,\r\n  MOVE_FIELD, \r\n  REMOVE_FIELD, \r\n  SAVE_DATA_ERROR, \r\n  SAVE_DATA_PENDING, \r\n  SAVE_DATA_SUCCESS, \r\n  SET_DRAGGING_FIELD, \r\n  TOGGLE_CONFIG_MODAL, \r\n  TOGGLE_CHARTS_MODAL, \r\n  UPDATE_FIELD_LIST, \r\n  UPDATE_OBJECT_PROPERTY, \r\n  UPDATE_SECTION_ITEM, \r\n  ADD_CHART, \r\n  REMOVE_CHART, \r\n  APPLY_TABLE_FILTER, \r\n  SET_CHARTS_DATA, \r\n  ZOOM_CHART, \r\n  SET_CURRENT_VIEW, \r\n  SET_EDIT_CHART_INDEX, \r\n  SET_ORDER_COLUMNS, \r\n  EDIT_CHART, \r\n  SET_IS_OPEN_MODAL_FORMULA,\r\n  SET_MODE_MODAL_FORMULA,\r\n  SET_EDIT_MODE_DATA_MODAL_FORMULA,\r\n  SET_INDEX_MODAL_FORMULA\r\n} from './actions';\r\n\r\nconst onMoveField = (state, result) => {\r\n  const { destination, source } = result;\r\n\r\n  if (!destination) {\r\n    return state;\r\n  }\r\n\r\n  if (\r\n    destination.droppableId === source.droppableId &&\r\n    destination.index === source.index\r\n  ) {\r\n    return state;\r\n  }\r\n\r\n  const newState = cloneDeep(state);\r\n  const start = newState[source.droppableId];\r\n  const finish = (source.droppableId === destination.droppableId ? start : newState[destination.droppableId]);\r\n  const field_obj = start[source.index];\r\n\r\n  start.splice(source.index, 1);\r\n  finish.splice(destination.index, 0, field_obj);\r\n\r\n  return newState;\r\n}\r\n\r\nconst ReducerGeneral = (state = {}, action) => {\r\n  let tmp_list = [];\r\n  let new_state = {};\r\n  switch (action.type) {\r\n    case ADD_FIELD:\r\n      tmp_list = [...state[action.section]];\r\n      tmp_list.push(action.field);\r\n      new_state = { ...state };\r\n      new_state[action.section] = tmp_list;\r\n      return new_state;\r\n\r\n    case REMOVE_FIELD:\r\n      tmp_list = [...state[action.section]];\r\n      tmp_list.splice(action.index, 1)\r\n      new_state = { ...state };\r\n      new_state[action.section] = tmp_list;\r\n      return new_state;\r\n\r\n    case ADD_CHART:\r\n      new_state = cloneDeep(state);\r\n      new_state.chart_list.push(action.chart_def);\r\n      return new_state;\r\n\r\n    case REMOVE_CHART:\r\n      tmp_list = [...state.chart_list];\r\n      tmp_list.splice(action.index, 1)\r\n      new_state = { ...state };\r\n      new_state.chart_list = tmp_list;\r\n      return new_state;\r\n\r\n    case UPDATE_SECTION_ITEM:\r\n      new_state = cloneDeep(state);\r\n      new_state[action.section][action.item_index][action.property] = action.value;\r\n      return new_state;\r\n\r\n    case SET_DRAGGING_FIELD:\r\n      return { ...state, dragging: action.dragging };\r\n\r\n    case MOVE_FIELD:\r\n      return onMoveField(state, action.result);\r\n    case FETCH_PREVIEW_DATA_PENDING:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n        timeout_data_id: action.timeout_id\r\n      }\r\n    case FETCH_PREVIEW_DATA_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        preview_data: action.data\r\n      }\r\n    case FETCH_PREVIEW_DATA_ERROR:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.error\r\n      }\r\n    case GET_CONFIG_PENDING:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      }\r\n    case GET_CONFIG_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        modules_list: action.data.modules_list,\r\n        report_header_data: action.data.report_header_data,\r\n        field_list: (action.data.report_header_data.metadata && action.data.report_header_data.metadata.field_list ? action.data.report_header_data.metadata.field_list  : []),\r\n        detail_name: (action.data.report_header_data.name && action.data.report_header_data.name ? action.data.report_header_data.name  : ''),\r\n        columns: (action.data.report_header_data.select_list && action.data.report_header_data.select_list ? action.data.report_header_data.select_list  : []),\r\n        filters: (action.data.report_header_data.filter_list && action.data.report_header_data.filter_list ? action.data.report_header_data.filter_list  : []),\r\n        groups: (action.data.report_header_data.group_list && action.data.report_header_data.group_list ? action.data.report_header_data.group_list  : []),\r\n        chart_list: (action.data.report_header_data.chart_list && action.data.report_header_data.chart_list ? action.data.report_header_data.chart_list  : []),\r\n      }\r\n    case GET_CONFIG_ERROR:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        error: action.error\r\n      }\r\n    case SAVE_DATA_PENDING:\r\n      return {\r\n        ...state,\r\n        saving: true\r\n      }\r\n    case SAVE_DATA_SUCCESS:\r\n      return {\r\n        ...state,\r\n        saving: false,\r\n        id: action.data.id\r\n      }\r\n    case SAVE_DATA_ERROR:\r\n      return {\r\n        ...state,\r\n        saving: false,\r\n        error: action.error\r\n      }\r\n    case TOGGLE_CONFIG_MODAL:\r\n      return {\r\n        ...state,\r\n        show_config_modal: !state.show_config_modal\r\n      }\r\n    case TOGGLE_CHARTS_MODAL:\r\n      return {\r\n        ...state,\r\n        show_charts_modal: !state.show_charts_modal,\r\n        dashlet_id: (action.dashlet_id ? action.dashlet_id : state.dashlet_id)\r\n      }\r\n\r\n    case UPDATE_OBJECT_PROPERTY:\r\n      new_state = cloneDeep(state);\r\n      new_state[action.object_name][action.property] = action.value;\r\n      return new_state;\r\n\r\n    case UPDATE_FIELD_LIST:\r\n      new_state = { ...state };\r\n      new_state.field_list = action.field_list;\r\n      return new_state;\r\n\r\n    case APPLY_TABLE_FILTER:\r\n      tmp_list = cloneDeep(state.table_filters);\r\n      let current_filter = tmp_list.find(item => {\r\n        if (Array.isArray(item) && item.length > 0) {\r\n          return item[0] === action.column;\r\n        }\r\n        return false;\r\n      });\r\n\r\n      if (current_filter && current_filter.length === 3) {\r\n        current_filter[1] = \"=\";\r\n        current_filter[2] = action.value;\r\n      } else {\r\n        tmp_list.push([action.column, \"=\", action.value]);\r\n      }\r\n\r\n      new_state = { ...state };\r\n      new_state.table_filters = tmp_list;\r\n      return new_state;\r\n\r\n\r\n    case SET_CHARTS_DATA:\r\n      new_state = { ...state };\r\n      new_state.charts_data = action.data;\r\n      return new_state;\r\n\r\n    case ZOOM_CHART:\r\n      new_state = { ...state };\r\n      new_state.zoomed_chart_def = action.chart_def;\r\n      return new_state;\r\n\r\n    case SET_EDIT_CHART_INDEX:\r\n      new_state = { ...state };\r\n      new_state.edit_chart_index = action.chart_index;\r\n      return new_state;\r\n\r\n    case EDIT_CHART:\r\n      tmp_list = [...state.chart_list];\r\n      tmp_list[action.index] = action.chart_def;\r\n      new_state = { ...state };\r\n      new_state.chart_list = tmp_list;\r\n      return new_state;\r\n      \r\n    case SET_CURRENT_VIEW:\r\n      new_state = { ...state };\r\n      new_state.current_view = action.current_view;\r\n      new_state.is_create_edit = ['edit', 'create'].indexOf(action.current_view) !== -1;\r\n      new_state.preview_data = [];\r\n      new_state.table_filters = [];\r\n      return new_state;\r\n\r\n    case SET_ORDER_COLUMNS:\r\n      return { ...state, columns: state.columns.map(e=> {\r\n          let newE = {...e, ...{isSorter:false, sortType:null}};\r\n          if(action.column.name === newE.name){\r\n            return {...newE,...action.values}\r\n          }\r\n          return newE;\r\n        })\r\n      }\r\n        \r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst reducerModalFormula = (state = {\r\n  isOpen:false,\r\n  mode: 'add',\r\n  edit_mode_data: {},\r\n  index: undefined,\r\n}, action) => {\r\n  const { type, payload } = action\r\n\r\n  switch (type) {\r\n    case SET_IS_OPEN_MODAL_FORMULA:\r\n      return { ...state, isOpen: payload.isOpen }\r\n    case SET_MODE_MODAL_FORMULA:\r\n      return { ...state, mode: payload.mode }\r\n    case SET_EDIT_MODE_DATA_MODAL_FORMULA:\r\n      return { ...state, edit_mode_data: payload.edit_mode_data }\r\n    case SET_INDEX_MODAL_FORMULA:\r\n      return { ...state, index: payload.index }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst reducers = combineReducers({\r\n  'general': ReducerGeneral,\r\n  'modalFormula': reducerModalFormula\r\n});\r\n\r\nexport default reducers;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { toast, ToastContainer } from 'react-toastify';\r\nimport { applyMiddleware, createStore } from 'redux';\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport thunk from 'redux-thunk';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport reducers from './storage/reducers';\r\nimport { arrayEval, getJSONAttribute, updateFieldKeyName, defaultJSONParse } from './Utils';\r\n\r\n\r\nexport let store;\r\nwindow.mountOReportsReact = function (id) {\r\n  const ELEMENT = document.getElementById(id);\r\n  const columns = getJSONAttribute(ELEMENT, 'select_list', []);\r\n  const chart_list = getJSONAttribute(ELEMENT, 'chart_list', []);\r\n  const filters = getJSONAttribute(ELEMENT, 'filter_list', []);\r\n  const base_obj_id = ELEMENT.getAttribute(\"base_obj_id\") || '';\r\n  const current_user_id = ELEMENT.getAttribute(\"current_user_id\") || '';\r\n  const current_view = ELEMENT.getAttribute(\"current_view\") || '';\r\n  const groups = getJSONAttribute(ELEMENT, 'groups', []);\r\n  const modules_list = getJSONAttribute(ELEMENT, 'modules', []);\r\n  const teams_list = getJSONAttribute(ELEMENT, 'teams', []); //TODO: Crear campo relacionado\r\n  const users_list = getJSONAttribute(ELEMENT, 'users', []);\r\n  const roles_list = getJSONAttribute(ELEMENT, 'roles', []);\r\n  const operator_list = getJSONAttribute(ELEMENT, 'operator_list', []);\r\n  const report_header_data = getJSONAttribute(ELEMENT, 'report_header_data', {});\r\n  const chart_error = getJSONAttribute(ELEMENT, 'chart_error', {});\r\n  const is_ajax = getJSONAttribute(ELEMENT, 'is_ajax', false);\r\n  const ajax_show_all = getJSONAttribute(ELEMENT, 'ajax_show_all', false);\r\n  const current_record = ELEMENT.getAttribute(\"current_record\") || '';\r\n\r\n  report_header_data.visible_users = arrayEval(report_header_data.visible_users);\r\n  report_header_data.visible_roles = arrayEval(report_header_data.visible_roles);\r\n  report_header_data.metadata = defaultJSONParse(report_header_data.metadata, {});\r\n\r\n  if (!report_header_data.owner_id) {\r\n    report_header_data.owner_id = current_user_id;\r\n  }\r\n\r\n  updateFieldKeyName(columns);\r\n  updateFieldKeyName(filters);\r\n  updateFieldKeyName(groups);\r\n\r\n\r\n\r\n  let generalState = {\r\n    id: base_obj_id,\r\n    app_id: id,\r\n    columns,\r\n    groups,\r\n    filters,\r\n    modules_list,\r\n    teams_list,\r\n    users_list,\r\n    roles_list,\r\n    operator_list,\r\n    report_header_data,\r\n    field_list: (report_header_data.metadata && report_header_data.metadata.field_list ? report_header_data.metadata.field_list  : []),\r\n    dragging: false,\r\n    loading: false,\r\n    preview_data: [],\r\n    saving: false,\r\n    show_config_modal: (base_obj_id ? false : true),\r\n    current_view,\r\n    is_create_edit: ['edit', 'create'].indexOf(current_view) !== -1,\r\n    chart_list,\r\n    table_filters: [],\r\n    charts_data: [],\r\n    chart_error,\r\n    is_ajax,\r\n    ajax_show_all,\r\n    zoomed_chart_def: {},\r\n    current_record,\r\n    detail_name: (report_header_data.name && report_header_data.name ? report_header_data.name  : '')\r\n  };\r\n\r\n  let initialState = {\r\n    general: generalState\r\n  }\r\n  const middlewares = [thunk];\r\n\r\n  store = createStore(reducers, initialState, composeWithDevTools(applyMiddleware(...middlewares)));\r\n  ReactDOM.render((\r\n    <Provider store={store}>\r\n      <App />\r\n      <ToastContainer position={toast.POSITION.BOTTOM_RIGHT} />\r\n    </Provider>), ELEMENT);\r\n}\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}