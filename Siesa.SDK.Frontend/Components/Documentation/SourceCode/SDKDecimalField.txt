@using Siesa.SDK.Frontend.Components.Fields
@using Siesa.SDK.Frontend.Components.Visualization
@using Siesa.SDK.Components.Visualization
@using System.Globalization
@inject SDKNotificationService Notification

@layout EmptyLayout

<div class="container-flui">
    <div class="container-fluid">
            <h2>SDKDecimalField</h2> 
            <p>Demonstration and configuration of the SDKDecimalField component</p> 
    </div>
    <div class="row px-3"> 
        <div class="col-md-6 p-3">
            <SDKCard>
                <h3>Default</h3>
                <SDKDecimalField @bind-Value="@DecimalValue"/>
                <p class="demo-text cw-320 mt-2">
                    Value: <b>@DecimalValue</b>
                </p>
            </SDKCard>
        </div>

        <div class="col-md-6 p-3">
            <SDKCard>
                <h3>Demacial Field MaxLength(3)</h3>
                <SDKDecimalField @bind-Value="@DecimalValue2" MaxLength="3"/>
                <p class="demo-text cw-320 mt-2">
                    Value: <b>@DecimalValue2</b>
                </p>
            </SDKCard>
        </div>
        <div class="col-md-6 p-3">
            <SDKCard>
                <h3>ReadOnly</h3>
                <SDKDecimalField @bind-Value="@DecimalValue3" ReadOnly="true"/>
                <p class="demo-text cw-320 mt-2">
                    Value: <b>@DecimalValue3</b>
                </p>
            </SDKCard>
        </div>
        <div class="col-md-6 p-3">
            <SDKCard>
                <h3>Apply a Mask</h3>
                <SDKDecimalField @bind-Value="@Percentage"
                            Mask="@NumericMaskValue" Culture="MaskCultureInfo.Value"
                            MaxLength="4"/>

                <p class="demo-text cw-320 mt-2">
                    Percentage: <b>@Percentage %</b>
                </p>
            </SDKCard>
        </div>
        <div class="col-md-6 p-3">
            <SDKCard>
                <h3>Decimal Value Change</h3>
                <SDKDecimalField Value="@valueChange"
                            Mask="@NumericMaskValue" Culture="MaskCultureInfo.Value" 
                            ValueChanged="((value) => Onchange(value))"/>

                <p class="demo-text cw-320 mt-2">
                    Percentage: <b>@valueChange %</b>
                </p>
            </SDKCard>
        </div>
    </div>
</div>


@code {
    public double DecimalValue { get; set; } = 3.1415;

    public double DecimalValue2 { get; set; } = 0.0;
    public double DecimalValue3 { get; set; } = 1.1;
    public double Percentage { get; set; }

    double valueChange;
    CultureInfoItem MaskCultureInfo { get; set; } = CultureInfoItems.FirstOrDefault();
    string NumericMaskValue { get; set; } = NumericMask.Percentage;

    class CultureInfoItem {
        public CultureInfo Value { get; set; }
        public string Text { get; set; }
        public override string ToString() { return Text; }
    }
    static CultureInfoItem[] CultureInfoItems { get; set; } = new CultureInfoItem[] {
        new CultureInfoItem() { Value = CultureInfo.GetCultureInfo("en-US"), Text = "American English" },
        new CultureInfoItem() { Value = CultureInfo.GetCultureInfo("de-DE"), Text = "German" },
    };
    public double Onchange(double value){

        valueChange = value;
        Notification.ShowWarning("This Percentage changed " + $"{valueChange} %");

        return valueChange;  
    }
}