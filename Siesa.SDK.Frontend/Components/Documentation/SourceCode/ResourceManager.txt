@using Siesa.SDK.Shared.Services
@using System.Reflection;
@using System.Text;
@using Siesa.SDK.Shared.Utilities;
@using System.IO;
@using Siesa.SDK.Frontend.Components.Visualization
@using Siesa.SDK.Frontend.Components.Fields
@using Siesa.SDK.Frontend.Services


@inject IBackendRouterService BackendRouterService
@inject IAuthenticationService AuthenticationService
@inject SDKNotificationService Notification
@inject IResourceManager ResourceManager

@layout EmptyLayout


<div class="container-fluid">
    <div class="container-fluid">
            <h2>ResourceManager</h2> 
    </div>
    <div class="row px-3"> 
        <div class="col-12">
            <SDKCard >
                <h3>Demo ResourceManager</h3>
                <p>Este servicio ofrecido por el SDK se utiliza para traducir los recursos del sistema.</p>
                <p>Para utilizarlo se debe inyectar el servicio, no sin antes importar el respectivo using asi:
                    using Siesa.SDK.Shared.Services;
                    inject IResourceManager ResourceManager
                    Tambien se puede inyectar a traves del constructo de un BLFront, o BLBack.
                </p>
                <p>Luego de eso podremos hacer uso de los diferentes metodos que nos provee la interfaz para traducir los recursos del sistema, al final es el mismo metodo y lo que cambia es la firma, a continuacion los vemos:</p>
                <ul>
                    <li>Task(string) GetResource(Int64 resourceRowid, Int64 cultureRowid),
                        En este caso los parametros son el rowid del recurso y el rowid de la cultura a la que se quiere traducir el recurso.
                    </li>
                    <li>Task(string) GetResource(string resourceTag, Int64 cultureRowid)
                        En este caso los parametros son el tag del recurso y el rowid de la cultura.
                    </li>
                    <li>Task(string) GetResource(Int64 resourceRowid, IAuthenticationService authenticationService)
                        En este caso los parametros son el rowid del recurso y el servicio de autenticacion, el cual se utiliza para obtener la cultura del usuario logueado.
                    </li>
                    <li>Task(string) GetResource(string resourceTag, IAuthenticationService authenticationService)
                        En este caso los parametros son el tag del recurso y el servicio de autenticacion.
                    </li>
                    <li>public Task(Dictionary(byte,string)) GetEnumValues(string enumName, Int64 cultureRowid)
                        Este metodo nos sirve para traducir el Tag de un Enum, En este caso los parametros son el nombre del enum y el rowid de la cultura.
                    </li>
                </ul>

                <p>En el Tab para ver el codigo fuente, queda evidenciado como se puede usar el servicio.</p>

                <SDKCharField @bind-Value="@resourceTag1" Disabled="true" />

                <SDKCharField @bind-Value="@resourceTag2" Disabled="true"/>

                <SDKCharField @bind-Value="@resourceTag3" Disabled="true"/>

                <SDKCharField @bind-Value="@resourceTag4" Disabled="true"/>

                <SDKCharField @bind-Value="@resourceTag5" Disabled="true"/>

                <SDKCharField @bind-Value="@resourceTag6" Disabled="true"/>


            </SDKCard>
        </div>
     </div>
</div>

    

@code 
{
   public string resourceTag1 {get; set; } 
   public string resourceTag2 {get; set; }
   public string resourceTag3 {get; set; }
   public string resourceTag4 {get; set; }
   public string resourceTag5 {get; set; }
   public string resourceTag6 {get; set; }
   public Dictionary<byte, string> resourceEnum {get; set; }
   public Dictionary<byte, string> resourceEnum2 {get; set; }

    protected override async Task OnInitializedAsync()
    {
        resourceTag1 = await ResourceManager.GetResource(5423, 1);
        resourceTag2 = await ResourceManager.GetResource("BLLogin.Project.Welcome", 1);
        resourceTag3 = await ResourceManager.GetResource(5423, AuthenticationService);
        resourceTag4 = await ResourceManager.GetResource("BLLogin.Project.Welcome", AuthenticationService);
        resourceEnum = await ResourceManager.GetEnumValues("enumGender", 1);
        resourceEnum2 = await ResourceManager.GetEnumValues("enumGender", AuthenticationService.GetRoiwdCulture());

        resourceTag5 = resourceEnum.Values.First();
        resourceTag6 = resourceEnum2.Values.Last();


        base.OnInitializedAsync();
    }



}
