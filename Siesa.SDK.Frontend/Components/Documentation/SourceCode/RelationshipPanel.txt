@using Siesa.SDK.Entities
@using Siesa.SDK.Frontend.Components.FormManager.Model
@using Siesa.SDK.Frontend.Components.Visualization 
@using Siesa.SDK.Frontend.Components.Fields
@using Siesa.SDK.Frontend.Components.Layout
@using Siesa.SDK.Frontend.Components.Layout.Detail.Relationship
@inject SDKNotificationService NotificationService



<div class="container-fluid">
    <div class="container-fluid">
            <h2>RelationshipPanel</h2> 
            <p>Demonstration and configuration of the RelationshipPanel component</p>
            <p>El RelationshipPanel component permite configurar el ancho y alto del modal con las propiedades:</p>
            <ul>
                <li>Width: para definir el ancho del modal, por defecto 600 px, por ejemplo Width="700px"</li>
                <li>Height: para definit el alto del modal, por defecto lo calcula basado en el anlto de la ventana, por ejemplo Height="500px" </li>
            </ul>
    </div>
    <div class="row px-3"> 
        <div class="col-md-6 p-3">
            <SDKCard>
                <h3>Demo RelationshipPanel</h3>
                <div class="d-flex justify-content-around">
                    <SDKBooleanField @bind-Value="@AllowCreate"> AllowCreate</SDKBooleanField>
                    <SDKBooleanField @bind-Value="@AllowDelete"> AllowDelete</SDKBooleanField>
                    <SDKBooleanField @bind-Value="@AllowEdit"> AllowEdit</SDKBooleanField>
                    <SDKBooleanField @bind-Value="@AllowDetail"> AllowDetail</SDKBooleanField>
                </div>
            <RelationshipPanel Relationship="@pbrRelationShip" Parent="@pbrUser" ShowHeader="false" AllowCreate="@AllowCreate"   AllowDelete="@AllowDelete"   AllowEdit="@AllowEdit" AllowDetail="@AllowDetail"  Width="200px"/>
            </SDKCard>
        </div>
        <div class="col-md-6 p-3">
            <SDKCard>
                <h3>Demo RelationshipPanel Actions</h3>
            <RelationshipPanel Relationship="@pbrRelationShip" Parent="@pbrUser" ShowHeader="false" 
                        AllowEdit="true" AllowDetail="true"
                        AllowCreate="true" AllowDelete="true"
                        />
            </SDKCard>
        </div>
         <div class="col-md-6 p-3">
            <SDKCard>
                <h3>Demo RelationshipPanel Collapse</h3>
            <RelationshipPanel Relationship="@pbrRelationShip" Parent="@pbrUser" />
            </SDKCard>
        </div>
    </div>
</div>

@code{
    bool AllowCreate = false;
    bool AllowDelete = false;
    bool AllowEdit = false;
    bool AllowDetail = false;

    
    E00220_User pbrUser = new E00220_User();
    Relationship pbrRelationShip = new Relationship();

    protected override void OnInitialized()
    {
        pbrUser.Rowid= 1;
        pbrUser.Name = "Usuario demo";
        pbrUser.Id = "demo";
        
        pbrRelationShip = new Relationship(){

            Name  = "PruebaRelationship",
            Type = RelationshipType.OneToMany,
            RelatedBusiness = "BLUser",
            RelatedField = "BaseObj.UserReportTo"
        };
        base.OnInitialized();
    }

}