@using Siesa.SDK.Frontend.Components.Visualization
@using Siesa.SDK.Frontend.Components.Fields

<div class="container-fluid">
    <div class="row p-3">
        <div class="col-12"><h2>Builder Views</h2></div>
        <div class="col-12"><p>El SDK genera formularios y vistas  predeterminadas a patir de Metadatos definidos en un archivo JSON.</p></div>
        <div class="col-12"><p>Todos los archivos JSON se deben crear en la carpeta Frontend/NombreDelNegocio/Viewdefs/</p></div> 
    </div>
    <div class="row px-3 mt-3"> 
        <div class="col-12 p-3 ">
                <h3 class="d-flex justify-content-center">Viewdef</h3>
                <p>Un archivo de metadatos para una vista de creación, edición o detalle tiene el
                siguiente formato:
                </p>
                    <SDKTextField CssClass="text-area-demoviewdef" Value="@ViewdefCreate"/>

                <p>El archivo de metadatos para una vista de lista, tiene el siguiente formato:</p>
                    <SDKTextField CssClass="text-area-demoviewdef" Value="@ViewdefList"/>

                <p>Tambien se da soporte para los campos de tipo control entidad, 
                    indicando el campo que se relaciona y con cual entidad hace relacion. Genera un campo de tipo
                    select con los valores de la entidad relacionada:</p>
                    <SDKTextField CssClass="text-area-demoviewdef" Value="@ControlEntidad"/>
                
                <p>Estos archivos se procesan en tiempo de ejecución y se generan las vistas
                    correspondientes al ingresar a la URL del negocio:</p>
                    <ul>
                        <li>Creación: /NombreDelNegocio/create/</li>
                        <li>Edición: /NombreDelNegocio/edit/RowId/</li>
                        <li>Detalle: /NombreDelNegocio/detail/RowId/</li>
                        <li>Lista: /NombreDelNegocio/</li>
                    </ul>

                <p>Tambien podemos renderizar un componente personalizado como un campo:</p>
                        <SDKTextField CssClass="text-area-demoviewdef" Value="@CustomComponent"/>

                <p>Se implementó en el generador unas directivas que se pueden utilizar en cada
                    campo para definir comportamientos específicos, por ejemplo, 
                    ocultar o mostrar un campo dependiendo de alguna condicion:</p>

                    <SDKTextField CssClass="text-area-demoviewdef" Value="@CustomAtributtes"/>
                
                <p>En el Ejemplo anterior vemos que la seccion CustomAtributtes nos ayudara a definir dichas reglas. 
                    en este caso especifico, solo mostrara el campo Name si cumple la condicion PersonType == 1, y lo 
                    mismo aplica para el campo BusinessName, solo se mostrara si cumple con PersonType == 2.</p>
                
                <p><strong>Las directivas implementadas son las siguientes:</strong></p>

                <ul>
                    <li>sdk-show: Determina si el campo debe mostrarse cuando se cumpla la condición</li>
                    <li>sdk-hide: Determina si el campo debe ocultarse cuando se cumpla la condición</li>
                    <li>sdk-required: Determina si el campo es obligatorio</li>
                    <li>sdk-readonly: Determina si el campo es solo lectura</li>
                    <li>sdk-disabled: Determina si el campo está deshabilitado</li>
                    <li>sdk-change: Ejecuta el código cuando se cambia el valor del campo</li>
                </ul>

                <p>El generador de vistas tambien nos permite especificar un campo de tipo personalizado, 
                    los soportados hasta el momento son los siguientes:</p>

                <ul>
                   <li>SwitchField: Para campos de tipo Bool</li>
                   <li>SelectBarField: Para Campos de Tipo Enum</li>
                   <li>TextField: Para Campos tipo Texto</li>
                </ul>

                <p>Lo podemos utilizar de la siguiente forma:</p>
                    <SDKTextField CssClass="text-area-demoviewdef" Value="@CustomType"/>

                <p>Tambien podemos definir el tamaño de un campo en especifico,
                     con la propiedad ColSize.</p> 
                <p>por ejemplo:</p> 
                    <SDKTextField CssClass="text-area-demoviewdef" Value="@ColSize"/>

                <p>Tabien podemos asignar el tamaño de todos los campos de la vista(Dentro de Fields, tenemos todos los campos de la vista), asi:</p>

                    <SDKTextField CssClass="text-area-demoviewdef" Value="@ColSizeAll"/>

                <p>Se da soporte para agregar botones que ejecuten metodos que se encuentren en el BL del Frontend:</p>
                    
                        <SDKTextField CssClass="text-area-demoviewdef" Value="@Buttons"/>

        </div>
    </div>
</div>

@code{
    string ViewdefCreate = @"{
                                ""Panels"": [
                                    {
                                    ""Fields"": [
                                        {
                                        ""Name"": ""BaseObj.Id""
                                        },
                                        {
                                        ""Name"": ""BaseObj.Name""
                                        },
                                        {
                                        ""Name"": ""BaseObj.Description""
                                        },
                                        {
                                        ""Name"": ""BaseObj.Status""
                                        }
                                            ]
                                    }
                                ]
                            }";

    string ViewdefList = @"{
                                ""OrderBy"": {
                                    ""Field"": ""BaseObj.Id"",
                                    ""Direction"": ""Asc""
                                },
                                ""Paging"": {
                                    ""PageSize"": 10,
                                    ""AllowedPageSizes"": [
                                    10,
                                    20,
                                    50,
                                    100
                                    ]
                                },
                                ""Filters"": [],
                                ""Fields"": [
                                    {
                                    ""Name"": ""BaseObj.Name""
                                    },
                                    {
                                    ""Name"": ""BaseObj.Description""
                                    },
                                    {
                                    ""Name"": ""BaseObj.Status""
                                    }
                                ]
                            }";

    string ControlEntidad = @"  {
                                ""Name"": ""BaseObj.IdentificationType""
                                ""RelatedBusiness"": ""IdentificationType"",
                                }";


    string CustomComponent = @"{
                                ""Panels"": [
                                    {
                                    ""Fields"": [
                                        {
                                        ""Name"": ""CreditRatingGauge"",
                                        ""CustomComponent"": {
                                         ""Name"": ""SDKRadialGauge"",
                                         ""Namespace"": ""Siesa.SDK.Frontend.Components.Visualization"",
                                         ""Attributes"": {
                                         ""Value"": ""(double)BaseObj.CreditRating"",
                                        }
                                            ]
                                    }
                                ]
                            }";


    string CustomAtributtes = @"{
                                    ""Name"": ""BaseObj.Name"",
                                    ""Hidden"":""true"",
                                    ""CustomAttributes"": {
                                    ""sdk-show"": ""(int)BaseObj.PersonType == 1""}

                                    ""Name"": ""BaseObj.BusinessName"",
                                    ""Hidden"": ""true"",
                                    ""CustomAttributes"": {
                                    ""sdk-show"": ""(int)BaseObj.PersonType == 2""}
                                }" ;

    string CustomType = @"{
                            ""Name"": ""BaseObj.IsClient"", 
                            ""CustomType"": ""SwitchField"",
                            }";

    string ColSize = @"{
                        ""Name"": ""BaseObj.Id"",
                        ""CustomAttributes"":{
                        ""sdk-show"": ""ItemIdSite""},
                        ""ColSize"": {
                        ""XS"": ""12"",
                        ""SM"": ""12"",
                        ""MD"": ""3"",
                        ""LG"": ""3""
                        }
                    }," ;        

    string ColSizeAll = @"{
                            ""Panels"": [{,
                                ""Fields"": [...],
                                ""ColSize"": {
                                ""XS"": ""12"",
                                ""SM"": ""12"",
                                ""MD"": ""12"",
                                ""LG"": ""12""
                                }
                            }
                            ]
                        }";
    
    string Buttons=@"
                    ""Buttons"": [{
                        ""Action"": ""await MetodoBLFrontend()"",
                        ""Style"": ""secondary""
                        }]";
}