@page "/{BusinessName}/"
@attribute [Authorize]
@using Microsoft.AspNetCore.Authorization
@inherits Siesa.SDK.Frontend.Components.FormManager.ViewModels.DynamicBaseViewModel
@if (ErrorMsg != null && ErrorMsg != "")
{
    <text>@ErrorMsg</text>
}
else if (BusinessObj != null)
{
    <DynamicComponent Type="@(typeof(Views.ListView))" Parameters="@parameters" />
}

@code {
    [Parameter] public string SubpanelFilter { get; set; }
    protected override void SetParameters(dynamic businessObj, string businessName){
        parameters.Clear();
        parameters.Add("BusinessObj", businessObj);
        parameters.Add("BusinessName", businessName);
        if (IsSubpanel)
        {
            parameters.Add("SetTopBar", false);
            parameters.Add("ConstantFilters", new List<string>() { SubpanelFilter });
        }
    }
}