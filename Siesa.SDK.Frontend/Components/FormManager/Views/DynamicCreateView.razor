@page "/{BusinessName}/create/"
@attribute [Authorize]
@using Microsoft.AspNetCore.Authorization
@inherits Siesa.SDK.Frontend.Components.FormManager.ViewModels.DynamicBaseViewModel
@if (ErrorMsg != null && ErrorMsg != "")
{
    <text>@ErrorMsg</text>
}
else if (BusinessObj == null)
{
    <text>Loading...</text>
}
else if (BusinessObj != null)
{
    <DynamicComponent Type="@(typeof(Views.CreateView))" Parameters="@parameters" />
}

@code {
    [Parameter] public Dictionary<string, object> DefaultFields { get; set; }
    protected override void OnInitialized()
    {
        base.OnInitialized();
        if (DefaultFields != null)
        {
            foreach (var item in DefaultFields)
            {
                BusinessObj.SetPropertyValue(item.Key, item.Value);
            }
        }

        BusinessObj.OnReady();
    }


}