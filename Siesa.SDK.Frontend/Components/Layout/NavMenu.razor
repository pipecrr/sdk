@using Siesa.SDK.Frontend.Backend;

<DxMenu Orientation="Orientation.Horizontal"
        DropDownActionMode="MenuDropDownActionMode.Click"
        DisplayMode="MenuDisplayMode.Desktop"
        Title="Siesa"
        CollapseItemsToHamburgerMenu="true"
        CollapseItemToIconMode="MenuCollapseItemToIconMode.All">
    <TitleTemplate>
        <img class="menu-title-template-img" src="_content/Siesa.SDK.Frontend/images/header_logo.svg" alt="@context" />
    </TitleTemplate>
    <Items>
        <DxMenuItem Text="Home" IconCssClass="oi oi-home" />
        @foreach (KeyValuePair<string, BackendRegistry> entry in BackendManager.Instance.GetBackendDict())
        {
            @foreach (var backendBusiness in entry.Value.businessRegisters.Businesses)
            {
                <DxMenuItem Text="@backendBusiness.Name" IconCssClass="oi oi-list-rich  menu-icon">
                    <Items>
                        <DxMenuItem Text="Consultar" NavigateUrl="@(backendBusiness.Name + "/")" />
                        <DxMenuItem Text="Crear" NavigateUrl="@(backendBusiness.Name + "/create/")" />
                    </Items>
                </DxMenuItem>
            }
        }
        <DxMenuItem CssClass="notoggle" Position="ItemPosition.End">
            <TextTemplate>
                <div class="menu-icon-user-profile menu-icon" />
            </TextTemplate>
            <SubMenuTemplate>
                <div class="w-100 user-profile">
                    <div class="flex-column align-items-center justify-content-center">
                        <div class="logo-container d-flex align-items-center justify-content-center">
                            <div class="menu-icon-user-profile menu-icon menu-icon-large" />
                        </div>
                        <div class="user-name-container bm-3 mb-2">
                            <div class="user-name-title text-muted text-center">User Name</div>
                            <div class="user-name text-center">John Heart</div>
                        </div>
                        <div class="d-flex justify-content-center log-off-btn">
                            <DxButton Text="Log Off" RenderStyle="@ButtonRenderStyle.Secondary"></DxButton>
                        </div>
                    </div>
                </div>
            </SubMenuTemplate>
        </DxMenuItem>
    </Items>
</DxMenu>